!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/codebase/",n(n.s=66)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return _}));var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(){a(this,e)},u=function(){function e(t){a(this,e),this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},e.prototype.setParam=function(e,t,n){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),n))return this.show(null)},e.prototype.getParam=function(e,t){var n=this._data[e];if(void 0!==n||!t)return n;var o=this.getParentView();return o?o.getParam(e,t):void 0},e.prototype.getUrl=function(){return this._segment.suburl()},e.prototype.getUrlString=function(){return this._segment.toString()},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(n){return(n.config.id===e||n.config.localId===e)&&n.$scope===t.$scope}),"self")}return e},e.prototype.on=function(e,t,n){var o=e.attachEvent(t,n);return this._events.push({obj:e,id:o}),o},e.prototype.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},e.prototype.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},e.prototype._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},e.prototype._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},e.prototype._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},e.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var n=t.view._getDefaultSub();if(n)return n}}},e.prototype._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function c(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],o=0;o<t.length;o++){var r=t[o],i={},a=r.indexOf(":");if(-1===a&&(a=r.indexOf("?")),-1!==a){var s=r.substr(a+1).split(/[\:\?\&]/g),u=Array.isArray(s),c=0;for(s=u?s:s[Symbol.iterator]();;){var l;if(u){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var f=l.split("=");i[f[0]]=decodeURIComponent(f[1])}}n[o]={page:a>-1?r.substr(0,a):r,params:i,isNew:!0}}return n}function l(e){var t=[],n=e,o=Array.isArray(n),r=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if((r=n.next()).done)break;i=r.value}var a=i;t.push("/"+a.page);var s=f(a.params);s&&t.push("?"+s)}return t.join("")}function f(e){var t=[];for(var n in e)t.length&&t.push("&"),t.push(n+"="+encodeURIComponent(e[n]));return t.join("")}var d=function(){function e(t,n){a(this,e),this._next=1,this.route="string"==typeof t?{url:c(t),path:t}:t,this.index=n}return e.prototype.current=function(){return this.route.url[this.index]},e.prototype.next=function(){return this.route.url[this.index+this._next]},e.prototype.suburl=function(){return this.route.url.slice(this.index)},e.prototype.shift=function(){return new e(this.route,this.index+this._next)},e.prototype.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},e.prototype.toString=function(){var e=l(this.suburl());return e?e.substr(1):""},e.prototype._join=function(e,t){var n=this.route.url;if(null===e)return n;var o=this.route.url;if(n=o.slice(0,this.index+(t?this._next:0)),e){n=n.concat(c(e));for(var r=0;r<n.length;r++)o[r]&&(n[r].view=o[r].view),o[r]&&n[r].page===o[r].page&&(n[r].isNew=!1)}return n},e.prototype.append=function(e){var t=this._join(e,!0);return this.route.path=l(t),this.route.url=t,this.route.path},e.prototype.show=function(e,t,n){var o=this,r=this._join(e,n);return new Promise((function(e,n){var i=l(r),a={url:r,redirect:i,confirm:Promise.resolve()},u=t?t.app:null;if(u&&!u.callEvent("app:guard",[a.redirect,t,a]))return void n(new s);a.confirm.catch((function(e){return n(e)})).then((function(){if(null!==a.redirect){if(a.redirect!==i)return u.show(a.redirect),void n(new s);o.route.path=i,o.route.url=r,e()}else n(new s)}))}))},e.prototype.size=function(e){this._next=e},e.prototype.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=l(t.url)),new e(t,0)},e.prototype.update=function(e,t,n){var o=this.route.url[this.index+(n||0)];if(!o)return this.route.url.push({page:"",params:{}}),this.update(e,t,n);""===e?o.page=t:o.params[e]=t,this.route.path=l(this.route.url)},e}(),p=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n.webix));return i.app=n,i._children=[],i}return i(t,e),t.prototype.ui=function(e,t){var n=(t=t||{}).container||e.container,r=this.app.createView(e);return this._children.push(r),r.render(n,this._segment,this),"object"!==(void 0===e?"undefined":o(e))||e instanceof u?r:r.getRoot()},t.prototype.show=function(e,t){if(t=t||{},"object"===(void 0===e?"undefined":o(e))){for(var n in e)this.setParam(n,e[n]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var r=this.getParentView();return r?r.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var i=this.getSubViewInfo(t.target);if(i){if(i.parent!==this)return i.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,i.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},t.prototype._show=function(e,t,n){var o=this;return e.show(t,n,!0).then((function(){return o._init_url_data(),o._urlChange()})).then((function(){e.route.linkRouter&&(o.app.getRouter().set(e.route.path,{silent:!0}),o.app.callEvent("app:route",[e.route.path]))}))},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},t.prototype.render=function(e,t,n){var o=this;"string"==typeof t&&(t=new d(t,0)),this._segment=t,this._parent=n,this._init_url_data();var r="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==r?(this._container=r,this._render(t)):this._urlChange().then((function(){return o.getRoot()}))},t.prototype._render=function(e){var t=this,n=this.config();return n.then?n.then((function(n){return t._render_final(n,e)})):this._render_final(n,e)},t.prototype._render_final=function(e,t){var n=this,o=null,r=null,i=!1;if(this._container.tagName?r=this._container:(o=this._container).popup?(r=document.body,i=!0):r=this.webix.$$(o.id),!this.app||!r)return Promise.reject(null);var a=void 0,s=this._segment.current(),u={ui:{}};this.app.copyConfig(e,u.ui,this._subs),this.app.callEvent("app:render",[this,t,u]),u.ui.$scope=this,!o&&s.isNew&&s.view&&s.view.destructor();try{if(o&&!i){var c=r,l=c.getParentView();l&&"multiview"===l.name&&!u.ui.id&&(u.ui.id=c.config.id)}this._root=this.app.webix.ui(u.ui,r);var f=this._root;i&&f.setPosition&&!f.isVisible()&&f.show(),o&&(o.view&&o.view!==this&&o.view!==this.app&&o.view.destructor(),o.id=this._root.config.id,this.getParentView()||!this.app.app?o.view=this:o.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,t)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,t.suburl())}))}))}catch(e){a=Promise.reject(e)}return a.catch((function(e){return n._initError(n,e)}))},t.prototype._init=function(e,t){return this.init(e,t.suburl())},t.prototype._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var n in this._subs){var o=this._subs[n],r=this._renderFrameLock(n,o,null);r&&t.push(r)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},t.prototype._renderFrameLock=function(e,t,n){if(!t.lock){var o=this._renderFrame(e,t,n);o&&(t.lock=o.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},t.prototype._renderFrame=function(e,t,n){var o=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==n&&(t.url=n),t.route){if(null!==n)return t.route.show(n,t.view).then((function(){return o._createSubView(t,t.route)}));if(t.branch)return}var r=t.view;if(!r&&t.url){if("string"==typeof t.url)return t.route=new d(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||r instanceof t.url||(r=new t.url(this.app,"")),r||(r=t.url)}if(r)return r.render(t,t.route||this._segment,this)},t.prototype._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var n=this;return this.app.createFromURL(t.current()).then((function(o){return o.render(e,t,n)}))},t.prototype._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(u),h=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n,o));return i._ui=o.ui,i}return i(t,e),t.prototype.config=function(){return this._ui},t}(p),b=function(){function e(t,n,o){a(this,e),this.path="",this.app=o}return e.prototype.set=function(e,t){this.path=e;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},e.prototype.get=function(){return this.path},e}(),m=!0,w=function(e){function t(n){a(this,t);var o=(n||{}).webix||window.webix,i=r(this,e.call(this,o));return i.config=i.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),i.app=i.config.app,i.ready=Promise.resolve(),i._services={},i.webix.extend(i,i.webix.EventSystem),i}return i(t,e),t.prototype.getUrl=function(){return this._subSegment.suburl()},t.prototype.getUrlString=function(){return this._subSegment.toString()},t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},t.prototype.copyConfig=function(e,t,n){if((e instanceof u||"function"==typeof e&&e.prototype instanceof u)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,n);for(var r in t=t||(e instanceof Array?[]:{}),e){var i=e[r];if("function"==typeof i&&i.prototype instanceof u&&(i={$subview:i}),!i||"object"!==(void 0===i?"undefined":o(i))||i instanceof this.webix.DataCollection||i instanceof RegExp||i instanceof Map)t[r]=i;else if(i instanceof Date)t[r]=new Date(i);else{var a=this.copyConfig(i,i instanceof Array?[]:{},n);null!==a&&(t[r]=a)}}return t},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var n=t.getAttribute("trigger");if(n)return this._forView(t,(function(e){return e.app.trigger(n)})),e.cancelBubble=!0,e.preventDefault();var o=t.getAttribute("route");if(o)return this._forView(t,(function(e){return e.show(o)})),e.cancelBubble=!0,e.preventDefault()}var r=t.parentNode;r&&this.clickHandler(e,r)},t.prototype.getRoot=function(){return this.getSubView().getRoot()},t.prototype.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},t.prototype.loadView=function(e){var t=this,n=this.config.views,o=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(o="function"==typeof n?n(e):n[e])&&(e=o,o=null),o||(o="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){o=this._loadError(e,t)}return o.then||(o=Promise.resolve(o)),o=o.then((function(e){return e.__esModule?e.default:e})).catch((function(n){return t._loadError(e,n)}))},t.prototype._forView=function(e,t){var n=this.webix.$$(e);n&&t(n.$scope)},t.prototype._loadViewDynamic=function(e){return null},t.prototype.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},t.prototype.createView=function(e,n){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:n,router:b});if(e.prototype instanceof u)return new e(this,{name:n});e=e(this)}return e instanceof u?e:new h(this,{name:n,ui:e})},t.prototype.show=function(e){return this.render(this._container,e||this.config.start)},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.apply(e,n)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.apply(e,n)}),this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var n=0;n<t.length;n++)if(console.error(t[n]),t[n]instanceof Error){var o=t[n].message;0===o.indexOf("Module build failed")?(o=o.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+o+"</pre>"):(o+="<br><br>Check console for more details",this.webix.message({type:"error",text:o,expire:-1}))}},t.prototype.render=function(e,t,n){var o=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var r=null;!this.$router?(m&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return o.clickHandler(e)})),m=!1),"string"==typeof t&&(t=new d(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0):r="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString();var i=this.getSubView(),a=this._subSegment,s=a.show(r,i).then((function(){return o.createFromURL(a.current())})).then((function(t){return t.render(e,a)})).then((function(e){return o.$router.set(a.route.path,{silent:!0}),o.callEvent("app:route",[o.getUrl()]),e}));return this.ready=this.ready.then((function(){return s})),s},t.prototype.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new p(this,{})},t.prototype._first_start=function(e){var t=this;this._segment=e;if(this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof s))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(n,"webixappstart"),t.webix.html.addCss(n,"webixapp")}),10)}if(e)this.app&&(e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new d(this.config.start,0));else{var o=this.$router.get();o||(o=this.config.start,this.$router.set(o,{silent:!0})),e=new d(o,0)}return e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,n){var o=!0!==e.$subview?e.$subview:null,r=e.name||(o?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(n[r]={id:t.id,url:o,branch:e.branch,popup:e.popup}).popup?null:t},t}(u),_=function(){function e(t,n){var o=this;a(this,e),this.config=n||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return o.cb(o.get())}}return e.prototype.set=function(e,t){var n=this;if(this.config.routes){var o=e.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===o[0]){e=r+(o.length>1?"?"+o[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},e.prototype._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},e.prototype._getRaw=function(){return document.location.href},e}(),y=!1;function g(e){if(!y&&e){y=!0;var t=window;t.Promise||(t.Promise=e.promise);var n=e.version.split(".");10*n[0]+1*n[1]<53&&(e.ui.freeze=function(t){var n=t();return n&&n.then?n.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),n});var r=e.ui.baselayout.prototype.addView,i=e.ui.baselayout.prototype.removeView,a={addView:function(e,t){var n=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return r.apply(this,arguments);var i=function(){var o=n.$scope,i={};e=o.app.copyConfig(e,{},i),r.apply(n,[e,t]);var a=function(e){o._renderFrame(e,i[e],null).then((function(){o._subs[e]=i[e]}))};for(var s in i)a(s);return{v:e.id}}();return"object"===(void 0===i?"undefined":o(i))?i.v:void 0},removeView:function(){if(i.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var n in t){var o=t[n];e.$$(o.id)||(o.view.destructor(),delete t[n])}}}};e.extend(e.ui.layout.prototype,a,!0),e.extend(e.ui.baselayout.prototype,a,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var n=e.uid().toString();for(var o in t.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var r=this.$app[o];"function"!=typeof r||this[o]||(this[o]=r.bind(this.$app))}}},e.ui.proxy)}}var v=function(e){function t(n){a(this,t),n.router=n.router||_;var o=r(this,e.call(this,n));return g(o.webix),o}return i(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),n(63)("./"+e)},t}(w);(function(){function e(t,n,o){a(this,e),this.storage=n.storage||o.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=t}e.prototype.set=function(e,t){var n=this;this.storage.put(this.name,e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.storage.get(this.name)}})(),function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}i(t,e),t.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},t.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(_),function(){function e(t,n){a(this,e),this.path="",this.cb=t}e.prototype.set=function(e,t){var n=this;this.path=e,t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.path}}();function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e,t,n){for(var o in e)$(e,o)&&t.call(n||e,e[o],o,e)}function O(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var j=String.prototype.replace,k=String.prototype.split,S=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},P={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:S,chinese:function(){return 0},croatian:S,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:S,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},E={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function T(e){var t,n=(t={},x(E,(function(e,n){x(e,(function(e){t[e]=n}))})),t);return n[e]||n[k.call(e,/-/,1)[0]]||n.en}function z(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var C=/\$/g,V=/%\{(.*?)\}/g;function A(e,t,n,o){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var r=e,i=o||V,a="number"==typeof t?{smart_count:t}:t;if(null!=a.smart_count&&r){var s=k.call(r,"||||");r=(s[function(e,t){return P[T(e)](t)}(n||"en",a.smart_count)]||s[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return r=j.call(r,i,(function(e,t){return $(a,t)&&null!=a[t]?j.call(a[t],C,"$$"):e}))}function I(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?A:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||O,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if("||||"===t||"||||"===n)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(z(t)+"(.*?)"+z(n),"g")}(t.interpolation)}I.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},I.prototype.extend=function(e,t){x(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.extend(e,r):this.phrases[r]=e}),this)},I.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:x(e,(function(e,n){var r=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.unset(e,r):delete this.phrases[r]}),this)},I.prototype.clear=function(){this.phrases={}},I.prototype.replace=function(e){this.clear(),this.extend(e)},I.prototype.t=function(e,t){var n,o,r=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof r._)n=r._;else if(this.onMissingKey){o=(0,this.onMissingKey)(e,r,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),o=e;return"string"==typeof n&&(o=A(n,r,this.currentLocale,this.tokenRegex)),o},I.prototype.has=function(e){return $(this.phrases,e)},I.transformPhrase=function(e,t,n){return A(e,t,n)};var R=I;function N(e,t,n){if(t.urls)n=t.urls[n]||n;else if(t.param){var o;(o={})[t.param]=n,n=o}e.show(n)}var D={good:"check",error:"warning",saving:"refresh fa-spin"},q={good:"Ok",error:"Error",saving:"Connecting..."};function L(e,t,n){for(var o=0;o<n.length;o++)e[n[o]]=t[o+1]?t[o+1].page:""}var F=window.webix;F&&g(F);var B={UnloadGuard:function(e,t,n){t.on(e,"app:guard",(function(e,o,r){if(o===t||o.contains(t)){var i=n();r.confirm=!1===i?Promise.reject(new s):r.confirm.then((function(){return i}))}}))},Locale:function(e,t,o){var r=(o=o||{}).storage,i=r?r.get("lang")||"en":o.lang||"en";function a(t,n,a){n.__esModule&&(n=n.default);var s={phrases:n};o.polyglot&&e.webix.extend(s,o.polyglot);var c=u.polyglot=new R(s);if(c.locale(t),u._=e.webix.bind(c.t,c),i=t,r&&r.put("lang",i),o.webix){var l=o.webix[t];l&&e.webix.i18n.setLocale(l)}return a?Promise.resolve():e.refresh()}function s(e,t){if(!1!==o.path){var r=(o.path?o.path+"/":"")+e;a(e,n(65)("./"+r),t)}}var u={getLang:function(){return i},setLang:s,setLangData:a,_:null,polyglot:null};e.setService("locale",u),s(i,!0)},Menu:function(e,t,n){var o=t.getSubViewInfo().parent,r=t.$$(n.id||n),i=!1;r.attachEvent("onchange",(function(){i||N(o,n,this.getValue())})),r.attachEvent("onafterselect",(function(){if(!i){var e=null;r.setValue?e=this.getValue():r.getSelectedId&&(e=r.getSelectedId()),N(o,n,e)}})),t.on(e,"app:route",(function(){var e="";if(n.param)e=t.getParam(n.param,!0);else{var a=o.getUrl()[1];a&&(e=a.page)}e&&(i=!0,r.setValue&&r.getValue()!==e?r.setValue(e):r.select&&r.exists(e)&&r.getSelectedId()!==e&&r.select(e),i=!1)}))},Theme:function(e,t,n){var o=(n=n||{}).storage,r=o?o.get("theme")||"flat-default":n.theme||"flat-default",i={getTheme:function(){return r},setTheme:function(t,n){for(var i=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var u=a[s].getAttribute("title");u&&(u===t||u===i[0]?a[s].disabled=!1:a[s].disabled=!0)}e.webix.skin.set(i[0]),e.webix.html.removeCss(document.body,"theme-"+r),e.webix.html.addCss(document.body,"theme-"+t),r=t,o&&o.put("theme",t),n||e.refresh()}};e.setService("theme",i),i.setTheme(r,!0)},User:function(e,t,n){var o=(n=n||{}).login||"/login",r=n.logout||"/logout",i=n.afterLogin||e.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,u=n.model,c=n.user,l={getUser:function(){return c},getStatus:function(e){return e?u.status().catch((function(){return null})).then((function(e){c=e})):null!==c},login:function(t,n){return u.login(t,n).then((function(t){if(c=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[c]),e.show(i)}))},logout:function(){return c=null,u.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function f(e,t){e===r?(l.logout(),t.redirect=a):e===o||l.getStatus()||(t.redirect=o)}e.setService("user",l),e.attachEvent("app:guard",(function(e,t,o){return!(!n.public||!n.public(e))||(void 0===c&&(o.confirm=l.getStatus(!0).then((function(){return f(e,o)}))),f(e,o))})),s&&setInterval((function(){return l.getStatus(!0)}),s)},Status:function(e,t,n){var o="good",r=0,i=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||q,u=n.icons||D;function c(e){var r=t.$$(n.target);r&&(e||(e="<div class='status_"+o+"'><span class='webix_icon fa-"+u[o]+"'></span> "+s[o]+"</div>"),r.setHTML(e))}function l(){r--,h("good")}function f(e){r--,h("error",e)}function d(e){r++,h("saving"),e&&e.then&&e.then(l,f)}function p(){0===r&&c(" ")}function h(t,n){r<0&&(r=0),"saving"===t?(o="saving",c()):(i="error"===t,0===r&&(o=i?"error":"good",i?e.error("app:error:server",[n.responseText||n]):a&&setTimeout(p,a),c()))}function b(n){var o=e.webix.dp(n);o&&(t.on(o,"onAfterDataSend",d),t.on(o,"onAfterSaveError",(function(e,t,n){return f(n)})),t.on(o,"onAfterSave",l))}"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:function(){return o},setStatus:h,track:b}),n.remote&&t.on(e.webix,"onRemoteCall",d),n.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,n,o,r,i,a){d(a)})),n.data&&b(n.data)},UrlParam:function(e,t,n){var o=n.route||n,r={};t.on(e,"app:urlchange",(function(e,n){t===e&&(L(r,n.suburl(),o),n.size(o.length+1))}));var i=t.setParam,a=t.getParam;t.setParam=function(e,n,a){var s=o.indexOf(e);return s>=0?(r[e]=n,this._segment.update("",n,s+1),a?t.show(null):void 0):i.call(this,e,n,a)},t.getParam=function(e,t){var n=r[e];return void 0!==n?n:a.call(this,e,t)},L(r,t.getUrl(),o)}},M=window;M.Promise||(M.Promise=M.webix.promise)},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return f}));var o="ZPG",r="z_",i=(location.port,location.port,"http://10.109.129.137:9000/api/v1"),a="zpgtool",s="ldbserver",u="ldbconn",c="lvdbconn",l=9e5,f=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=n(1).a+"/profile"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(8);function r(){return{"Content-Type":"application/json"}}function i(e){e["Content-type"]="application/json",e.Authorization="Bearer "+Object(o.a)()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n(11),r={viewScope:{},currentTabQuery:0,currentTabViewData:0,currentDBSelected:"",meta:{},appProfile:{}},i=[{value:"Database",id:o.routeName.database,icon:"mdi mdi-database"},{value:"Query",id:o.routeName.query,icon:"mdi mdi-play"},{value:"Task",id:o.routeName.task,icon:"mdi mdi-chart-gantt"},{value:"Compare",id:o.routeName.compare,icon:"mdi mdi-swap-horizontal-bold"},{value:"View Data",id:o.routeName.viewdata,icon:"mdi mdi-view-grid"},{value:"Copy Data",id:o.routeName.copydata,icon:"mdi mdi-layers"},{value:"Generator",id:o.routeName.generator,icon:"mdi mdi-atom-variant"},{value:"Setting",id:o.routeName.setting,icon:"mdi mdi-cog"}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(1),r={prefix:o.c+"query",countPage:0},i=o.a+"/query"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var o=n(1),r={prefix:o.c+"task",isEdit:!1,dataSelected:{}},i=o.a+"/task",a=o.a+"/task_item"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u}));var o=1e3,r=(webix.Date.dateToStr("%Y-%m-%d"),function(e){return{view:"pager",id:e,css:"z-pager-aligned",size:o,template:function(e,t){var n=e.page*e.size,r=n+e.size;return r>e.count&&(r=e.count),e.size>o&&webix.message("Data show only "+o+" records"),"<span class='z-pager-no'>"+(n+1)+"-"+r+" of "+e.count+"</span> "+t.prev()+t.next()}}}),i=function(e){return{view:"pager",css:{"line-height":"2.5","text-align":"right"},id:e,size:o,template:function(e,t){return console.log("data.size",e.size),e.size>o&&webix.message("Data show only "+o+" records"),e.count+" rows"}}};function a(e){if(SHOW_ERR_DEBUG){var t="UNKNOWN_ERR",n="Unknown error, check console for details";if(200!=e.status||201!=e.status||202!=e.status){var o={responseText:e.responseText,statusText:e.statusText},r=Object.keys(o).map((function(e){return e+": "+o[e]})).join("<br />");if(t="HTTP_ERR_"+e.status,n=r,500==e.status){var i=JSON.parse(e.response)||e.response;t="DB_ERR_"+i.r_code,n=i.err_msg}else if(""!==JSON.parse(e).r_code){var a=JSON.parse(e);t="DB_ERR_"+a.r_code,n=a.err_msg}}n=n.substring(0,65)+"...\n<span>"+n.substring(65,1e3)+"</span>",webix.alert({title:"Server Error",type:"alert-error",width:"500px",text:"<div style='padding:0 10px;'><span style='font-weight: bold;'>Code:</span> "+t+" <br><span style='font-weight: bold;'>Message:</span> "+n+"</div>"})}}function s(e){var t=JSON.parse(e),n="";Object.keys(t).forEach((function(e){console.log(e,t[e]),n+="<b>"+e+":</b> "+t[e]+"<br>"})),webix.message({text:n,type:"error"})}function u(e,t){webix.alert({title:"Session expired",text:"Your session has expired, please login again"}).then((function(){t&&(e.show("/logout"),setTimeout((function(){return window.location.reload()}),600))}))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var o=n(1),r={userId:0,token:"",username:"",userLevel:0,fullname:""},i=function(e){var t=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}(e);null!=t&&(r.token=e,r.userId=t.uid,r.userLevel=t.ulv,r.username=t.username,r.fullname=t.fullname)};function a(){var e=webix.storage.cookie.get(o.d),t=r.token||e;return t&&i(t),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(1),r={prefix:o.c+"viewdata",countPage:0},i=o.a+"/viewdata"},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=n(1).a+"/db"},function(e,t,n){"use strict";n.r(t),n.d(t,"routeName",(function(){return p})),n.d(t,"routes",(function(){return h}));var o=n(19),r=n(21),i=n(20),a=n(22),s=n(23),u=n(24),c=n(14),l=n(5),f=n(9),d=n(27),p={task:"task",database:"database",query:"query",migration:"migration",compare:"compare",viewdata:"viewdata",copydata:"copydata",generator:"generator",setting:"setting"},h=[{id:p.task,type:"clean",borderless:!0,rows:[a.default]},{id:p.database,type:"clean",borderless:!0,rows:[r.default]},{id:p.query,type:"clean",borderless:!0,rows:[Object(c.QueryPage)(l.a.prefix)]},{id:p.compare,type:"clean",borderless:!0,rows:[o.default]},{id:p.copydata,type:"clean",borderless:!0,rows:[i.default]},{id:p.viewdata,type:"clean",borderless:!0,rows:[Object(d.ViewDataPage)(f.a.prefix)]},{id:p.setting,type:"clean",borderless:!0,rows:[u.default]},{id:p.generator,type:"clean",borderless:!0,rows:[s.default]}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(1),r={prefix:o.c+"user_config",isEdit:!1,dataSelected:{}},i=o.a+"/user_config"},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s}));var o=n(1),r=n(3),i={prefix:o.c+"user",isEdit:!1,dataSelected:{}},a=o.a;function s(e){return console.log("inputData",e),webix.ajax().headers(Object(r.a)()).post(o.a+"/register",e).then((function(e){return e.json()}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryPage",(function(){return Ze}));var o="en",r={},i={};function a(){return o}function s(e){return r[e]?e:i[e.toLowerCase()]?i[e.toLowerCase()]:void 0}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.localeMatcher||"lookup";switch(n){case"lookup":case"best fit":return c(e);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function c(e){var t=s(e);if(t)return t;for(var n=e.split("-");e.length>1;){n.pop();var o=s(e=n.join("-"));if(o)return o}}var l={af:function(e){return 1==e?"one":"other"},am:function(e){return e>=0&&e<=1?"one":"other"},ar:function(e){var t=String(e).split("."),n=Number(t[0])==e&&t[0].slice(-2);return 0==e?"zero":1==e?"one":2==e?"two":n>=3&&n<=10?"few":n>=11&&n<=99?"many":"other"},ast:function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"},be:function(e){var t=String(e).split("."),n=Number(t[0])==e,o=n&&t[0].slice(-1),r=n&&t[0].slice(-2);return 1==o&&11!=r?"one":o>=2&&o<=4&&(r<12||r>14)?"few":n&&0==o||o>=5&&o<=9||r>=11&&r<=14?"many":"other"},br:function(e){var t=String(e).split("."),n=Number(t[0])==e,o=n&&t[0].slice(-1),r=n&&t[0].slice(-2),i=n&&t[0].slice(-6);return 1==o&&11!=r&&71!=r&&91!=r?"one":2==o&&12!=r&&72!=r&&92!=r?"two":(3==o||4==o||9==o)&&(r<10||r>19)&&(r<70||r>79)&&(r<90||r>99)?"few":0!=e&&n&&0==i?"many":"other"},bs:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",r=!t[1],i=n.slice(-1),a=n.slice(-2),s=o.slice(-1),u=o.slice(-2);return r&&1==i&&11!=a||1==s&&11!=u?"one":r&&i>=2&&i<=4&&(a<12||a>14)||s>=2&&s<=4&&(u<12||u>14)?"few":"other"},cs:function(e){var t=String(e).split("."),n=t[0],o=!t[1];return 1==e&&o?"one":n>=2&&n<=4&&o?"few":o?"other":"many"},cy:function(e){return 0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e){var t=String(e).split("."),n=t[0],o=Number(t[0])==e;return 1!=e&&(o||0!=n&&1!=n)?"other":"one"},dsb:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",r=!t[1],i=n.slice(-2),a=o.slice(-2);return r&&1==i||1==a?"one":r&&2==i||2==a?"two":r&&(3==i||4==i)||3==a||4==a?"few":"other"},dz:function(e){return"other"},fil:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",r=!t[1],i=n.slice(-1),a=o.slice(-1);return r&&(1==n||2==n||3==n)||r&&4!=i&&6!=i&&9!=i||!r&&4!=a&&6!=a&&9!=a?"one":"other"},fr:function(e){return e>=0&&e<2?"one":"other"},ga:function(e){var t=String(e).split("."),n=Number(t[0])==e;return 1==e?"one":2==e?"two":n&&e>=3&&e<=6?"few":n&&e>=7&&e<=10?"many":"other"},gd:function(e){var t=String(e).split("."),n=Number(t[0])==e;return 1==e||11==e?"one":2==e||12==e?"two":n&&e>=3&&e<=10||n&&e>=13&&e<=19?"few":"other"},he:function(e){var t=String(e).split("."),n=t[0],o=!t[1],r=Number(t[0])==e,i=r&&t[0].slice(-1);return 1==e&&o?"one":2==n&&o?"two":o&&(e<0||e>10)&&r&&0==i?"many":"other"},is:function(e){var t=String(e).split("."),n=t[0],o=Number(t[0])==e,r=n.slice(-1),i=n.slice(-2);return o&&1==r&&11!=i||!o?"one":"other"},ksh:function(e){return 0==e?"zero":1==e?"one":"other"},lt:function(e){var t=String(e).split("."),n=t[1]||"",o=Number(t[0])==e,r=o&&t[0].slice(-1),i=o&&t[0].slice(-2);return 1==r&&(i<11||i>19)?"one":r>=2&&r<=9&&(i<11||i>19)?"few":0!=n?"many":"other"},lv:function(e){var t=String(e).split("."),n=t[1]||"",o=n.length,r=Number(t[0])==e,i=r&&t[0].slice(-1),a=r&&t[0].slice(-2),s=n.slice(-2),u=n.slice(-1);return r&&0==i||a>=11&&a<=19||2==o&&s>=11&&s<=19?"zero":1==i&&11!=a||2==o&&1==u&&11!=s||2!=o&&1==u?"one":"other"},mk:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",r=!t[1],i=n.slice(-1),a=n.slice(-2),s=o.slice(-1),u=o.slice(-2);return r&&1==i&&11!=a||1==s&&11!=u?"one":"other"},mt:function(e){var t=String(e).split("."),n=Number(t[0])==e&&t[0].slice(-2);return 1==e?"one":0==e||n>=2&&n<=10?"few":n>=11&&n<=19?"many":"other"},pa:function(e){return 0==e||1==e?"one":"other"},pl:function(e){var t=String(e).split("."),n=t[0],o=!t[1],r=n.slice(-1),i=n.slice(-2);return 1==e&&o?"one":o&&r>=2&&r<=4&&(i<12||i>14)?"few":o&&1!=n&&(0==r||1==r)||o&&r>=5&&r<=9||o&&i>=12&&i<=14?"many":"other"},pt:function(e){var t=String(e).split(".")[0];return 0==t||1==t?"one":"other"},ro:function(e){var t=String(e).split("."),n=!t[1],o=Number(t[0])==e&&t[0].slice(-2);return 1==e&&n?"one":!n||0==e||1!=e&&o>=1&&o<=19?"few":"other"},ru:function(e){var t=String(e).split("."),n=t[0],o=!t[1],r=n.slice(-1),i=n.slice(-2);return o&&1==r&&11!=i?"one":o&&r>=2&&r<=4&&(i<12||i>14)?"few":o&&0==r||o&&r>=5&&r<=9||o&&i>=11&&i<=14?"many":"other"},se:function(e){return 1==e?"one":2==e?"two":"other"},si:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"";return 0==e||1==e||0==n&&1==o?"one":"other"},sl:function(e){var t=String(e).split("."),n=t[0],o=!t[1],r=n.slice(-2);return o&&1==r?"one":o&&2==r?"two":o&&(3==r||4==r)||!o?"few":"other"}};l.as=l.am,l.az=l.af,l.bg=l.af,l.bn=l.am,l.ca=l.ast,l.ce=l.af,l.chr=l.af,l.de=l.ast,l.ee=l.af,l.el=l.af,l.en=l.ast,l.es=l.af,l.et=l.ast,l.eu=l.af,l.fa=l.am,l.fi=l.ast,l.fo=l.af,l.fur=l.af,l.fy=l.ast,l.gl=l.ast,l.gu=l.am,l.hi=l.am,l.hr=l.bs,l.hsb=l.dsb,l.hu=l.af,l.hy=l.fr,l.ia=l.ast,l.id=l.dz,l.it=l.ast,l.ja=l.dz,l.jgo=l.af,l.jv=l.dz,l.ka=l.af,l.kea=l.dz,l.kk=l.af,l.kl=l.af,l.km=l.dz,l.kn=l.am,l.ko=l.dz,l.ku=l.af,l.ky=l.af,l.lb=l.af,l.lkt=l.dz,l.lo=l.dz,l.ml=l.af,l.mn=l.af,l.mr=l.am,l.ms=l.dz,l.my=l.dz,l.nb=l.af,l.ne=l.af,l.nl=l.ast,l.nn=l.af,l.or=l.af,l.ps=l.af,l["pt-PT"]=l.ast,l.sah=l.dz,l.sd=l.af,l.sk=l.cs,l.so=l.af,l.sq=l.af,l.sr=l.bs,l.sv=l.ast,l.sw=l.ast,l.ta=l.af,l.te=l.af,l.th=l.dz,l.ti=l.pa,l.tk=l.af,l.to=l.dz,l.tr=l.af,l.ug=l.af,l.uk=l.ru,l.ur=l.ast,l.uz=l.af,l.vi=l.dz,l.wae=l.af,l.yi=l.ast,l.yue=l.dz,l.zh=l.dz,l.zu=l.am;var f=l;function d(e){return"pt-PT"===e?e:function(e){var t=e.match(p);if(!t)throw new TypeError("Invalid locale: ".concat(e));return t[1]}(e)}var p=/^([a-z0-9]+)/i;function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=e.supportedLocalesOf(t);if(0===o.length)throw new RangeError("Unsupported locale: "+t);if(n&&"cardinal"!==n.type)throw new RangeError('Only "cardinal" "type" is supported');this.$=f[d(o[0])]}var t,n,o;return t=e,o=[{key:"supportedLocalesOf",value:function(e){return"string"==typeof e&&(e=[e]),e.filter((function(e){return f[d(e)]}))}}],(n=[{key:"select",value:function(e){return this.$(e)}}])&&h(t.prototype,n),o&&h(t,o),e}(),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function w(e){return(w="function"==typeof Symbol&&"symbol"===m(Symbol.iterator)?function(e){return void 0===e?"undefined":m(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":m(e)})(e)}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){$(e,t,n[t])}))}return e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=["second","minute","hour","day","week","month","quarter","year"],O=["auto","always"],j=["long","short","narrow"],k=["lookup","best fit"],S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(this,e),$(this,"numeric","always"),$(this,"style","long"),$(this,"localeMatcher","lookup");var o=n.numeric,r=n.style,i=n.localeMatcher;if(void 0!==o){if(O.indexOf(o)<0)throw new RangeError('Invalid "numeric" option: '.concat(o));this.numeric=o}if(void 0!==r){if(j.indexOf(r)<0)throw new RangeError('Invalid "style" option: '.concat(r));this.style=r}if(void 0!==i){if(k.indexOf(i)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(i));this.localeMatcher=i}if("string"==typeof t&&(t=[t]),t.push(a()),this.locale=e.supportedLocalesOf(t,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");b.supportedLocalesOf(this.locale).length>0?this.pluralRules=new b(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),"undefined"!=typeof Intl&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=u(this.locale,{localeMatcher:this.localeMatcher})}var t,n,o;return t=e,(n=[{key:"format",value:function(){var e=z(arguments),t=y(e,2),n=t[0],o=t[1];return this.getRule(n,o).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"formatToParts",value:function(){var e=z(arguments),t=y(e,2),n=t[0],o=t[1],r=this.getRule(n,o),i=r.indexOf("{0}");if(i<0)return[{type:"literal",value:r}];var a=[];return i>0&&a.push({type:"literal",value:r.slice(0,i)}),a=a.concat(this.formatNumberToParts(Math.abs(n)).map((function(e){return _({},e,{unit:o})}))),i+"{0}".length<r.length-1&&a.push({type:"literal",value:r.slice(i+"{0}".length)}),a}},{key:"getRule",value:function(e,t){var n,o=(n=this.locale,r[n])[this.style][t];if("auto"===this.numeric)if(-2===e||-1===e){var i=o["previous".concat(-1===e?"":"-"+Math.abs(e))];if(i)return i}else if(1===e||2===e){var a=o["next".concat(1===e?"":"-"+Math.abs(e))];if(a)return a}else if(0===e&&o.current)return o.current;var s,u=o[(s=e,s<0||0===s&&function(e){return 1/e==-1/0}(s)?"past":"future")];return"string"==typeof u?u:u[this.pluralRules&&this.pluralRules.select(Math.abs(e))||"other"]||u.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"formatNumberToParts",value:function(e){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(e):[{type:"integer",value:this.formatNumber(e)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}])&&v(t.prototype,n),o&&v(t,o),e}();S.supportedLocalesOf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)e=[e];else if(!Array.isArray(e))throw new TypeError('Invalid "locales" argument');return e.filter((function(e){return u(e,t)}))},S.addLocale=function(e){if(!e)throw new Error("No locale data passed");r[e.locale]=e,i[e.locale.toLowerCase()]=e.locale},S.setDefaultLocale=function(e){o=e},S.getDefaultLocale=a,S.PluralRules=b;var P='Invalid "unit" argument';function E(e){if("symbol"===w(e))throw new TypeError(P);if("string"!=typeof e)throw new RangeError("".concat(P,": ").concat(e));if("s"===e[e.length-1]&&(e=e.slice(0,e.length-1)),x.indexOf(e)<0)throw new RangeError("".concat(P,": ").concat(e));return e}function T(e){if(e=Number(e),Number.isFinite&&!Number.isFinite(e))throw new RangeError("".concat('Invalid "number" argument',": ").concat(e));return e}function z(e){if(e.length<2)throw new TypeError('"unit" argument is required');return[T(e[0]),E(e[1])]}var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function V(e){return(V="function"==typeof Symbol&&"symbol"===C(Symbol.iterator)?function(e){return void 0===e?"undefined":C(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":C(e)})(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var I=function(){function e(){var t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o={},(n="cache")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}var t,n,o;return t=e,(n=[{key:"get",value:function(){for(var e=this.cache,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var r=0;r<n.length;r++){var i=n[r];if("object"!==V(e))return;e=e[i]}return e}},{key:"put",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var o=t.pop(),r=t.pop(),i=this.cache,a=0;a<t.length;a++){var s=t[a];"object"!==V(i[s])&&(i[s]={}),i=i[s]}return i[r]=o}}])&&A(t.prototype,n),o&&A(t,o),e}(),R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function N(e){return(N="function"==typeof Symbol&&"symbol"===R(Symbol.iterator)?function(e){return void 0===e?"undefined":R(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":R(e)})(e)}function D(e,t){var n=e,o=Array.isArray(n),r=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if((r=n.next()).done)break;i=r.value}var a=i;if(t(a))return a;for(var s=a.split("-");s.length>1;)if(s.pop(),t(a=s.join("-")))return a}throw new Error("No locale data has been registered for any of the locales: ".concat(e.join(", ")))}function q(){return"object"===("undefined"==typeof Intl?"undefined":N(Intl))&&"function"==typeof Intl.DateTimeFormat}var L=86400;function F(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return 3600;case"day":return L;case"week":return 604800;case"month":return 2630016;case"year":return 31556952}}function B(e){return void 0!==e.factor?e.factor:F(e.unit||e.formatAs)||1}function M(e){switch(e){case"floor":return Math.floor;default:return Math.round}}function U(e){switch(e){case"floor":return 1;default:return.5}}var H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function K(e){return(K="function"==typeof Symbol&&"symbol"===H(Symbol.iterator)?function(e){return void 0===e?"undefined":H(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":H(e)})(e)}function Q(e,t){var n,o=t.prevStep,r=t.timestamp,i=t.now,a=t.future,s=t.round;return o&&(o.id||o.unit)&&(n=e["threshold_for_".concat(o.id||o.unit)]),void 0===n&&void 0!==e.threshold&&"function"==typeof(n=e.threshold)&&(n=n(i,a)),void 0===n&&(n=e.minTime),"object"===K(n)&&(n=o&&o.id&&void 0!==n[o.id]?n[o.id]:n.default),"function"==typeof n&&(n=n(r,{future:a,getMinTimeForUnit:function(e,t){return W(e,t||o&&o.formatAs,{round:s})}})),void 0===n&&e.test&&(n=e.test(r,{now:i,future:a})?0:9007199254740991),void 0===n&&(o?e.formatAs&&o.formatAs&&(n=W(e.formatAs,o.formatAs,{round:s})):n=0),void 0===n&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(e,null,2)),n}function W(e,t,n){var o,r=n.round,i=F(e);if(o=F("now"===t?e:t),void 0!==i&&void 0!==o)return i-o*(1-U(r))}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){G(e,t,n[t])}))}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t,n){var o=n.now,r=n.future,i=n.round,a=n.units,s=n.getNextStep,u=function(e,t,n){var o=n.now,r=n.future,i=n.round;if(0===e.length)return;var a=function e(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Q(t[r],J({prevStep:t[r-1],timestamp:o.now-1e3*n},o));if(void 0===i)return r-1;if(Math.abs(n)<i)return r-1;if(r===t.length-1)return r;return e(t,n,o,r+1)}(e,t,{now:o,future:r||t<0,round:i});if(-1===a)return;var s=e[a];if(s.granularity){if(0===M(i)(Math.abs(t)/B(s)/s.granularity)*s.granularity&&a>0)return e[a-1]}return s}(e=function(e,t){return e.filter((function(e){var n=e.unit,o=e.formatAs;return!(n=n||o)||t.indexOf(n)>=0}))}(e,a),t,{now:o,future:r,round:i});return s?u?[e[e.indexOf(u)-1],u,e[e.indexOf(u)+1]]:[void 0,void 0,e[0]]:u}function X(e,t,n){var o=n.now,r=n.round;if(F(e)){var i=1e3*F(e),a=t>o,s=Math.abs(t-o),u=M(r)(s/i)*i;return a?u>0?s-u+function(e,t){return(1-U(e))*t+1}(r,i):s-u+1:-(s-u)+function(e,t){return U(e)*t}(r,i)}}function Z(e,t,n){var o=n.prevStep,r=n.nextStep,i=n.now,a=n.future,s=n.round,u=e.getTime?e.getTime():e,c=function(e){return X(e,u,{now:i,round:s})},l=function(e,t,n){var o=n.now,r=n.future,i=n.round,a=n.prevStep;if(e){var s=function(e,t,n){var o=n.now,r=n.future,i=n.round,a=n.prevStep,s=Q(e,{timestamp:t,now:o,future:r,round:i,prevStep:a});if(void 0===s)return;return r?t-1e3*s+1:0===s&&t===o?31536e9:t+1e3*s}(e,t,{now:o,future:r,round:i,prevStep:a});if(void 0===s)return;return s-o}return r?t-o+1:31536e9}(a?t:r,u,{future:a,now:i,round:s,prevStep:a?o:t});if(void 0!==l){var f;if(t&&(t.getTimeToNextUpdate&&(f=t.getTimeToNextUpdate(u,{getTimeToNextUpdateForUnit:c,getRoundFunction:M,now:i,future:a,round:s})),void 0===f)){var d=t.unit||t.formatAs;d&&(f=c(d))}return void 0===f?l:Math.min(f,l)}}var ee={};function te(e){return ee[e]}function ne(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");ee[e.locale]=e}var oe={steps:[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],labels:"long"};function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){re(e,t,n[t])}))}return e}({},oe,{steps:oe.steps.filter((function(e){return"second"!==e.formatAs}))}),ae=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:60,unit:"minute"},{threshold:150,granularity:5,factor:60,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:3600,unit:"hour"},{threshold:73800,factor:L,unit:"day"},{threshold:475200,factor:604800,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:27615168,factor:31556952,unit:"year"}],se={gradation:ae,flavour:"long",units:["now","minute","hour","day","week","month","year"]},ue={gradation:ae,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function ce(e){return e instanceof Date?e:new Date(e)}var le=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],fe={},de={minTime:function(e,t){t.future;return(0,t.getMinTimeForUnit)("day")},format:function(e,t){return fe[t]||(fe[t]={}),fe[t].dayMonth||(fe[t].dayMonth=new Intl.DateTimeFormat(t,{month:"short",day:"numeric"})),fe[t].dayMonth.format(ce(e))}},pe={minTime:function(e,t){return t.future?(e-(new Date(new Date(e).getFullYear(),0).getTime()-1))/1e3:(new Date(new Date(e).getFullYear()+1,0).getTime()-e)/1e3},format:function(e,t){return fe[t]||(fe[t]={}),fe[t].dayMonthYear||(fe[t].dayMonthYear=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"})),fe[t].dayMonthYear.format(ce(e))}};q()?le.push(de,pe):le.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var he={steps:le,labels:["mini","short-time","narrow","short"]};function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){be(e,t,n[t])}))}return e}({},he,{steps:[{formatAs:"now"}].concat(he.steps)});function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){we(e,t,n[t])}))}return e}({},he,{steps:he.steps.filter((function(e){return"second"!==e.formatAs}))});function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ge=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){ye(e,t,n[t])}))}return e}({},_e,{steps:[{formatAs:"now"}].concat(_e.steps)});function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){$e(e,t,n[t])}))}return e}function $e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=ve({},he,{steps:he.steps.filter((function(e){return"second"!==e.formatAs})).map((function(e){return"minute"===e.formatAs?ve({},e,{minTime:60}):e}))}),Oe={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){je(e,t,n[t])}))}return e}({},Oe,{steps:[{formatAs:"now"}].concat(Oe.steps)});function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Se(e,t,n[t])}))}return e}({},Oe,{steps:Oe.steps.filter((function(e){return"second"!==e.formatAs}))});function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Te=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Ee(e,t,n[t])}))}return e}({},Pe,{steps:[{formatAs:"now"}].concat(Pe.steps)});var ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"===ze(Symbol.iterator)?function(e){return void 0===e?"undefined":ze(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":ze(e)})(e)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Re,Ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.polyfill;Ae(this,e),"string"==typeof t&&(t=[t]),this.locale=D(t.concat(e.getDefaultLocale()),te),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),!1===o?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=S,this.IntlPluralRules=S.PluralRules),this.relativeTimeFormatCache=new I,this.pluralRulesCache=new I}var t,n,o;return t=e,(n=[{key:"format",value:function(e,t,n){var o,r;n||(!t||"string"==typeof(o=t)||function(e){return void 0!==Ce(e)&&null!==e&&e.constructor===qe}(r=o)&&(Array.isArray(r.steps)||Array.isArray(r.gradation)||Array.isArray(r.flavour)||"string"==typeof r.flavour||Array.isArray(r.labels)||"string"==typeof r.labels||Array.isArray(r.units)||"function"==typeof r.custom)?n={}:(n=t,t=void 0)),t||(t=ie),"string"==typeof t&&(t=function(e){switch(e){case"default":case"round":return oe;case"round-minute":return ie;case"approximate":return se;case"time":case"approximate-time":return ue;case"mini":return Oe;case"mini-now":return ke;case"mini-minute":return Pe;case"mini-minute-now":return Te;case"twitter":return he;case"twitter-now":return me;case"twitter-minute":return _e;case"twitter-minute-now":return ge;case"twitter-first-minute":return xe;default:return se}}(t));var i,a=function(e){if(e.constructor===Date||function(e){return"object"===Ce(e)&&"function"==typeof e.getTime}(e))return e.getTime();if("number"==typeof e)return e;throw new Error("Unsupported relative time formatter input: ".concat(Ce(e),", ").concat(e))}(e),s=this.getLabels(t.flavour||t.labels),u=s.labels,c=s.labelsType;void 0!==t.now&&(i=t.now),void 0===i&&void 0!==n.now&&(i=n.now),void 0===i&&(i=Date.now());var l=(i-a)/1e3,f=n.future||l<0,d=function(e,t,n,o){var r=e.now||t&&t.now;return r?"string"==typeof r?r:o?r.future:r.past:n&&n.second&&n.second.current?n.second.current:void 0}(u,te(this.locale).now,te(this.locale).long,f);if(t.custom){var p=t.custom({now:i,date:new Date(a),time:a,elapsed:l,locale:this.locale});if(void 0!==p)return p}var h=function(e,t,n){var o=Object.keys(t);return n&&o.push("now"),e&&(o=e.filter((function(e){return"now"===e||o.indexOf(e)>=0}))),o}(t.units,u,d),b=n.round||t.round,m=Ve(Y(t.gradation||t.steps||ie.steps,l,{now:i,units:h,round:b,future:f,getNextStep:!0}),3),w=m[0],_=m[1],y=m[2],g=this.formatDateForStep(a,_,l,{labels:u,labelsType:c,nowLabel:d,now:i,future:f,round:b})||"";return n.getTimeToNextUpdate?[g,Z(a,_,{nextStep:y,prevStep:w,now:i,future:f,round:b})]:g}},{key:"formatDateForStep",value:function(e,t,n,o){var r=this,i=o.labels,a=o.labelsType,s=o.nowLabel,u=o.now,c=o.future,l=o.round;if(t){if(t.format)return t.format(e,this.locale,{formatAs:function(e,t){return r.formatValue(t,e,{labels:i,future:c})},now:u,future:c});var f=t.unit||t.formatAs;if(!f)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(t)));if("now"===f)return s;var d=Math.abs(n)/B(t);t.granularity&&(d=M(l)(d/t.granularity)*t.granularity);var p=-1*Math.sign(n)*M(l)(d);switch(0===p&&(p=c?0:-0),a){case"long":case"short":case"narrow":return this.getFormatter(a).format(p,f);default:return this.formatValue(p,f,{labels:i,future:c})}}}},{key:"formatValue",value:function(e,t,n){var o=n.labels,r=n.future;return this.getFormattingRule(o,t,e,{future:r}).replace("{0}",this.formatNumber(Math.abs(e)))}},{key:"getFormattingRule",value:function(e,t,n,o){var r=o.future;if(this.locale,"string"==typeof(e=e[t]))return e;var i=e[0===n?r?"future":"past":n<0?"past":"future"]||e;return"string"==typeof i?i:i[this.getPluralRules().select(Math.abs(n))]||i.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"getFormatter",value:function(e){return this.relativeTimeFormatCache.get(this.locale,e)||this.relativeTimeFormatCache.put(this.locale,e,new this.IntlRelativeTimeFormat(this.locale,{style:e}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"==typeof e&&(e=[e]),e=(e=e.map((function(e){switch(e){case"tiny":case"mini-time":return"mini";default:return e}}))).concat("long");var t=te(this.locale),n=e,o=Array.isArray(n),r=0;for(n=o?n:n[Symbol.iterator]();;){var i;if(o){if(r>=n.length)break;i=n[r++]}else{if((r=n.next()).done)break;i=r.value}var a=i;if(t[a])return{labelsType:a,labels:t[a]}}}}])&&Ie(t.prototype,n),o&&Ie(t,o),e}(),De="en";Ne.getDefaultLocale=function(){return De},Ne.setDefaultLocale=function(e){return De=e},Ne.addDefaultLocale=function(e){if(Re)throw new Error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");Re=!0,Ne.setDefaultLocale(e.locale),Ne.addLocale(e)},Ne.addLocale=function(e){ne(e),S.addLocale(e)},Ne.locale=Ne.addLocale,Ne.addLabels=function(e,t,n){var o=te(e);o||(ne({locale:e}),o=te(e)),o[t]=n};var qe={}.constructor;var Le=n(61),Fe=n.n(Le),Be=n(7),Me=n(3),Ue=n(10),He=n(4),Ke=n(2),Qe=n(5),We=n(38),Je=n(39),Ge=n(1),Ye=n(60);Ne.addDefaultLocale(Fe.a);var Xe=new Ne("en-US");function Ze(e,t){console.log("prefix",e),Qe.a.countPage=parseInt(e.split("_")[2])||0;var n={view:"toolbar",css:"z_query_toolbar",elements:[{view:"button",type:"icon",css:"zmdi_padding",autowidth:!0,tooltip:"Open new Query",icon:"mdi mdi-play-box-multiple-outline",click:function(){!function(){var e,t,n=parseInt(He.b.currentTabQuery)+1,o=Qe.a.prefix,r=o.substring(o.lastIndexOf("_")+1,o.length);if(e=r,isNaN(e)||(0|(t=parseFloat(e)))!==t)Qe.a.prefix=Qe.a.prefix+"_"+n;else{var i=Qe.a.prefix,a=i.substring(0,i.lastIndexOf("_"));Qe.a.prefix=a+"_"+n}He.b.viewScope.addTab({header:"Query "+n,id:Qe.a.prefix,close:!0,width:150,body:Ze(Qe.a.prefix)}),$$("tabs").getTabbar().setValue(Qe.a.prefix),He.b.currentTabQuery++}()}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_showhide_db",autowidth:!0,tooltip:"Show database content",icon:"mdi mdi-forwardburger",click:function(){var t=$$(e+"_db_tree");t.isVisible()?(t.hide(),this.config.icon="mdi mdi-forwardburger",this.config.tooltip={template:"Show database content"},this.refresh(),c(!1)):(t.show(),this.config.icon="mdi mdi-backburger",this.config.tooltip={template:"Hide database content"},this.refresh(),c(!0))}},{view:"combo",id:e+"_source_combo",placeholder:"Source DB",width:200,options:{url:Ke.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){var t,n;t=$$(e+"_source_combo"),(n=t.getPopup().getList()).clearAll(),t.setValue(""),t.getPopup().getList().unselect(),n.load(Ke.a+"/content?type=2&ls=true")}}},on:{onChange:function(t,n){webix.storage.local.put(Ge.e,t),t?$$(e+"_run_btn").enable():$$(e+"_run_btn").disable()}}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_dbconn_toggle",autowidth:!0,tooltip:"Manage DB Connection",icon:"mdi mdi-connection",click:function(){this.$scope.ui(We.QueryDatabase).show()}},{view:"toggle",type:"icon",autowidth:!0,css:"zmdi_padding",tooltip:"Show multi Connection",icon:"mdi mdi-playlist-play",on:{onChange:function(t){$$(e+"_search_content_right").isVisible()&&$$(e+"_search_content_right").hide(),$$(e+"_sidemenu_right").isVisible()||$$(e+"_sidemenu_right").show(),t?$$(e+"_list_multi").show():($$(e+"_list_multi").hide(),$$(e+"_history").isVisible()||$$(e+"_sidemenu_right").hide()),$$(e+"_list_multi").isVisible()&&$$(e+"_history").isVisible()?$$(e+"_right_resizer").show():$$(e+"_right_resizer").hide()}}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-play",id:e+"_run_btn",tooltip:"Execute (Ctrl+Enter or F5)",disabled:!0,autowidth:!0,click:function(){f($$(e+"_source_combo").getValue())}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-playlist-check",tooltip:"Auto Format",autowidth:!0,click:function(){h()}},{view:"button",tooltip:"Bookmark",id:e+"_bookmark_btn",type:"icon",css:"zmdi_padding",icon:"mdi mdi-bookmark-outline",autowidth:!0,popup:{view:"contextmenu",data:[],submenuConfig:{width:300},on:{onBeforeShow:function(){var t=this;this.clearAll(),webix.ajax().get(Ke.a+"/content?type=4").then((function(n){var o=[];o.push({id:e+"_add_bookmark",value:"<span class='mdi mdi-star-outline webix_icon'></span>Add Bookmark"}),o.push({id:e+"_all_bookmark",value:"<span class='webix_icon'></span>All Bookmark"});var r=n.json().data;r.length>0?(o.push({$template:"Separator"}),t.config.width=300):t.config.width=150,t.refresh(),r.forEach((function(e,t){var n=t+1;o.push({id:e.id,value:n+". "+e.content})})),t.parse(o)}))},onMenuItemClick:function(t){if(t==e+"_add_bookmark"){var n={title:"",content:$$(e+"_sql_editor").getValue(),user_id:Ye.userId,type:4};webix.ajax().headers(Object(Me.a)()).post(Ke.a+"/content",n)}else webix.ajax().get(Ke.a+"/content/"+t+"?type=4").then((function(t){$$(e+"_sql_editor").setValue(t.json().data.content)}))}}}},{view:"toggle",type:"icon",css:"zmdi_padding",icon:"mdi mdi-history",tooltip:"History",id:e+"_history_toggle",autowidth:!0,on:{onChange:function(t){$$(e+"_search_content_right").isVisible()&&$$(e+"_search_content_right").hide(),$$(e+"_sidemenu_right").isVisible()||$$(e+"_sidemenu_right").show(),t?($$(e+"_history").show(),p()):($$(e+"_history").hide(),$$(e+"_list_multi").isVisible()||$$(e+"_sidemenu_right").hide()),$$(e+"_list_multi").isVisible()&&$$(e+"_history").isVisible()?$$(e+"_right_resizer").show():$$(e+"_right_resizer").hide()}}},{view:"text",css:"search_suggest",id:e+"_database_search",placeholder:"Search name..",width:300,suggest:{keyPressTimeout:500,body:{dataFeed:function(t,n){var o=$$(e+"_source_combo").getValue();if(o){if(t.length<3){var r=$$(e+"_database_search");return webix.extend(r,webix.OverlayBox),r&&$$(r).hideOverlay(),void this.clearAll()}this.clearAll(),this.load(Ue.a+"/content_search?id="+o+"&root=0&filter[value]="+t)}else webix.message({text:"Ops, select source DB first",type:"error"})},on:{onBeforeLoad:function(){var t=$$(e+"_database_search");webix.extend(t,webix.OverlayBox),t&&t.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:2.5; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var t=$$(e+"_database_search");webix.delay((function(){webix.extend(t,webix.OverlayBox),t&&$$(t).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(e){b(0,e.id)}}},on:{onKeyPress:function(t,n){9==t&&$$(e+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"text",css:"search_suggest",id:e+"_database_search_content",placeholder:"Search content..",tooltip:"Type and enter",width:300,hidden:!0,on:{onKeyPress:function(t,n){if(13==t){var o=$$(e+"_source_combo").getValue(),r=this.getValue(),i=$$(e+"_page_panel");webix.extend(i,webix.ProgressBar),i.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),i.disable(),webix.ajax().headers(Object(Me.a)()).get(Ue.a+"/content_search?id="+o+"&root=0&filter[value]="+r+"&type=content").then((function(t){var n=t.json().data;if(void 0!==n){$$(e+"_sidemenu_right").isVisible()&&$$(e+"_sidemenu_right").hide(),$$(e+"_history_preview").isVisible()&&$$(e+"_history_preview").hide(),$$(e+"_history_toggle").setValue(!1),$$(e+"_dbconn_toggle").setValue(!1),$$(e+"_search_content_right").show();var o=$$(e+"_result_content");o.clearAll(),o.parse(n),o.registerFilter($$(e+"_filter_content"),{columnId:"content_name"},{getValue:function(e){return e.getValue()},setValue:function(e,t){e.setValue(t)}})}else{var r=$$(e+"_result_content");r&&r.clearAll(),webix.message("No record found")}i.hideProgress(),i.enable()}))}}}},{view:"icon",icon:"mdi mdi-magnify",id:e+"_search_more_btn",tooltip:"Search by name",popup:{view:"popup",width:120,body:{view:"list",data:[{id:"sname",name:"name",icon:"mdi mdi-magnify",tooltip:"Search by name"},{id:"scontent",name:"content",icon:"mdi mdi-text-search",tooltip:"Search by content"}],template:"<span class='#icon#'></span> #name#",autoheight:!0,select:!0,on:{onItemClick:function(t){t,this.getParentView().hide();var n=$$(e+"_search_more_btn"),o=this.getItem(t);n.config.icon=o.icon,n.config.tooltip=o.tooltip,n.refresh();var r=$$(e+"_database_search"),i=$$(e+"_database_search_content");"sname"==t?(r.show(),r.focus(),i.hide()):"scontent"==t&&(r.hide(),i.show(),i.focus())}}}}},{},{view:"icon",icon:"mdi mdi-help-circle-outline",id:e+"_help_btn",tooltip:"Show help, shortcut",autowidth:!0,click:function(){this.$scope.ui(Je.QueryHelp).show()}}]},o=void 0,r={view:"tree",width:250,id:e+"_db_tree",css:"z_db_tree",hidden:!0,select:!0,type:{icon:function(e,t){return e.open&&e.$count<=0?'<div class=" webix_icon mdi mdi-sync spin_mdi"></div>':'<div class="webix_tree_'+(e.$count?e.open?"open":"close":"none")+'"></div>'},my_folder:function(e){var t=e.id.split("_")[1];return"d"==t?"<span class='webix_icon mdi mdi-database-outline "+(e.open?"z_tree_d_open":"")+"'></span>":"s"==t?"<span class='webix_icon mdi mdi-rhombus-split-outline "+(e.open?"z_tree_s_open":"")+"'></span>":"t"==t?"<span class='webix_icon mdi mdi-table-large "+(e.open?"z_tree_t_open":"")+"'></span>":"u"==t?"<span class='webix_icon mdi mdi-table z_tree_u_open z_tree_u_open'></span>":"f"==t?"<span class='webix_icon mdi mdi-script-text-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"g"==t?"<span class='webix_icon mdi mdi-script-outline z_tree_g_open'></span>":"<span class='webix_icon mdi mdi-radiobox-blank'></span>"}},template:"{common.icon()} {common.my_folder()} <span>#value#</span>",on:{onAfterSelect:function(e){this.getItem(e);for(o=e;this.getParentId(o);)o=this.getParentId(o);this.getItem(o).value,b(o,e)},onItemClick:function(e){var t=e,n=this.getItem(e);for(He.b.currentDBSelected=n.value;this.getParentId(t);)t=this.getParentId(t);this.getItem(t).value},onItemDblClick:function(e){this.isBranchOpen(e)?this.close(e):this.open(e)},onAfterContextMenu:function(e,t,n){for(this.select(e),o=e;this.getParentId(o);)o=this.getParentId(o);e},onDataRequest:function(e){return l(this,e),!1}}},i={type:"line",id:e+"_history_preview",hidden:!0,cols:[{width:100,css:{background:"#fff"},rows:[{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-close",autowidth:!0,tooltip:"Close",click:function(){$$(e+"_history_preview").hide(),$$(e+"_sql_editor").show()}}]},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-arrange-send-backward",autowidth:!0,tooltip:"Copy to query editor",click:function(){d(document.getElementById(e+"_result_history").innerHTML),$$(e+"_sql_editor").focus()}}]},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:e+"_copy_clipboard",tooltip:"Copy to clipboard",click:function(){u($$(e+"_history_content"),document.getElementById(e+"_result_history").innerHTML)}}]},{}]},{view:"template",id:e+"_history_content",css:"z_out_template",scroll:"xy",template:"test"}]},a={id:e+"_sidemenu_right",hidden:!0,width:300,rows:[{id:e+"_list_multi",hidden:!0,rows:[{view:"toolbar",cols:[{view:"label",label:"DB Connections"},{}]},{view:"list",select:!1,width:300,type:{height:"auto"},url:Ke.a+"/content?type=2&ls=true",template:"#value# <span style='float:right;width:50px;line-height:1.3' class='run_button z_multi_conn_icon webix_button webix_icon mdi mdi-play hover_only'></span>",onClick:{run_button:function(e,t,n){f(t)}}}]},{view:"resizer",css:"z_resizer_hor_thin",id:e+"_right_resizer",hidden:!0},{id:e+"_history",hidden:!0,rows:[{view:"toolbar",cols:[{view:"label",label:"History",width:50},{view:"icon",icon:"mdi mdi-delete-sweep-outline",tooltip:"Clear all History",click:function(){console.log("clear")}},{}]},{view:"list",id:e+"_history_list",template:function(e){if(e.content)return e.content.substring(0,40)+" <span style='color: grey;font-style:italic;font-size:13;float:right;'>"+Xe.format(new Date(e.created_at),"mini")+"</span>"},select:!0,headerRowHeight:0,url:Ke.a+"/content?type=3",on:{onItemClick:function(t){$$(e+"_history_preview").show(),$$(e+"_sql_editor").hide();var n=this.getItem(t);$$(e+"_history_content").setHTML("<pre id='"+e+"_result_history'>"+n.content+"</pre>")}}}],gravity:2}]},s={id:e+"_search_content_right",hidden:!0,width:400,rows:[{view:"toolbar",cols:[{view:"label",label:"Result Content",width:100},{view:"text",id:e+"_filter_content",placeholder:"Filter..",on:{onTimedKeyPress:function(){$$(e+"_result_content").filterByAll()}}},{view:"icon",icon:"mdi mdi-close",tooltip:"Close",width:50,click:function(){$$(e+"_search_content_right").hide()}}]},{view:"datatable",select:!0,resizeColumn:!0,id:e+"_result_content",columns:[{id:"content_schema",header:"Schema"},{id:"content_name",header:"Name",fillspace:!0},{id:"ttype",header:"Type",width:50}],on:{onItemClick:function(e){console.log("sel",e.row),b(0,e.row)}}}]},u=function(e,t){try{navigator.clipboard.writeText(t),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class=\"z_overlay\"><span class='z_copied_label animate__animated animate__flash'>Copied! <span class='mdi mdi-hand-okay' style='color:orange;'></span></span></div>"),setTimeout((function(){e.hideOverlay()}),1e3)}catch(e){console.error("Failed to copy: ",e)}},c=function(t){var n=$$(e+"_source_combo").getValue(),o=$$(e+"_db_tree");o.clearAll(),t&&o.load(Ue.a+"?id="+n+"&t=1")},l=function(t,n,r){var i=void 0;if(void 0===r){for(var a=n;t.getParentId(a);)a=t.getParentId(a);i=a}else i=o;var s=t,u=$$(e+"_source_combo").getValue();t.parse(webix.ajax().get(Ue.a+"/schema?id="+u+"&root="+i+"&parent="+n).then((function(e){var t=s.getItem(n);return setTimeout((function(){t.$count<=0&&(t.open=!1,s.refresh(n))}),600),e.json()})))},f=function(t){var n=$$(e+"_sql_editor"),o=n.getEditor(),r=o.getModel().getValueInRange(o.getSelection()),i={source_id:t,sql:r.length>0?r:n.getValue()},a=$$(e+"_source_combo").getValue();if(""!=i.sql&&a){(new Date).getTime();webix.extend($$(e+"_page_panel"),webix.OverlayBox),$$(e+"_page_panel").showOverlay('<div class="loading-content"><div class="loading-ico no-border"></div>\n        <span id=\''+e+"_z_cancel_query' class='mdi mdi-close-circle-outline' style='\n        position: absolute;\n        bottom: 15px;\n        right: 15px;\n        z-index: 999;\n        font-size: 13px;\n        cursor:pointer;\n        color: #e15353;\n        '>&nbsp;Cancel</span>\n        <span>Running query...</span></div>"),document.getElementById(e+"_z_cancel_query").onclick=function(){alert("Not implemented yet"),$$(e+"_page_panel").hideOverlay()},webix.ajax().headers(Object(Me.a)()).post(Qe.b+"/run",i).then((function(t){var n=t.json();console.log("rData.config",n.config);var o={type:"clean",rows:[{cols:[{borderless:!0,view:"tabbar",width:310,height:30,id:e+"_tabbar",value:"listView",multiview:!0,options:[{value:"Result",id:e+"_result",width:150},{value:"Console",id:e+"_console",width:150}],on:{onChange:function(t){t==e+"_console"?$$(e+"_copy_result_clipboard").show():$$(e+"_copy_result_clipboard").hide()}}},{view:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:e+"_copy_result_clipboard",tooltip:"Copy result to clipboard",click:function(){var t=document.getElementById("query_result_message").innerHTML.split("--notice:--")[1];u($$(e+"_console"),t)}},Object(Be.b)(e+"_result_row_pager"),{width:10},{view:"button",label:"X",autowidth:!0,click:function(){$$(e+"_resizer").hide(),$$(e+"_result_scrollview").hide()}}]},{animate:!1,cells:[{},{view:"datatable",datafetch:Be.a,select:"row",id:e+"_result",columns:n.config,resizeColumn:!0,data:n.data,pager:e+"_result_row_pager"},{view:"template",scroll:"xy",css:"z_out_template",id:e+"_console",template:function(e){return""}}]}]},r=$$(e+"_scrollview_body").getChildViews();if(console.log("views",r),r[0]&&$$(e+"_scrollview_body").removeView(r[0]),$$(e+"_resizer").show(),$$(e+"_result_scrollview").show(),console.log("rData.error",n.error),n.error){$$(e+"_scrollview_body").addView(o);var i=n.error,a=i.match(/errline:(.*)/);if(null!=a){var s=Number(a[1]),c=$$(e+"_sql_editor").getEditor();c.revealLineInCenter(s),c.setPosition({lineNumber:s,column:1})}$$(e+"_console").setHTML("<pre>"+i.charAt(0).toUpperCase()+i.slice(1)+"</pre>"),$$(e+"_tabbar").setValue(e+"_console")}else console.log("onerror>>>>>>>>>>>>>>>>>>>>>>>>>"),$$(e+"_scrollview_body").addView(o),void 0!==n.message&&$$(e+"_console").setHTML("<pre id='query_result_message'>"+n.message+"</pre>"),n.total_count>0||n.data.length>0?$$(e+"_tabbar").setValue(e+"_result"):$$(e+"_tabbar").setValue(e+"_console");$$(e+"_page_panel").hideOverlay(),p()}))}else webix.message({text:"Select DB Connection and type SQL your command",type:"error"})},d=function(t){$$(e+"_sql_editor").setValue(t),$$(e+"_history_preview").hide(),$$(e+"_sql_editor").show()};function p(){var t=$$(e+"_history_list");t.clearAll(),t.load(Ke.a+"/content?type=3")}var h=function(){$$(e+"_sql_editor").setValue(sqlFormatter.format($$(e+"_sql_editor").getValue(),{uppercase:!0}))},b=function(t,n){var o=n.split("_")[1];if("g"==o||"u"==o){var r=$$(e+"_source_combo").getValue(),i=$$(e+"_sql_editor");webix.extend(i,webix.ProgressBar),i.showProgress({type:"top"}),webix.ajax().get(Ue.a+"/schema_content?id="+r+"&root="+t+"&oid="+n).then((function(e){i.hideProgress(),i.setValue(e.json().data)}))}};return{id:e,type:"clean",borderless:!0,rows:[{type:"clean",borderless:!0,rows:[{id:e+"_page_panel",css:"z_query_page_panel",rows:[{rows:[n,{cols:[r,{view:"monaco-editor",id:e+"_sql_editor",language:"sql"},i,a,s]}],gravity:2},{view:"resizer",id:e+"_resizer",css:"z_resizer",hidden:!0},{view:"scrollview",id:e+"_result_scrollview",hidden:!0,scroll:!1,body:{id:e+"_scrollview_body",rows:[]}}]}]}],on:{onViewShow:function(){var n=$$(e+"_source_combo");if(void 0!==t)setTimeout((function(){var o=n.getPopup().getList().serialize().filter((function(e){return e.value==t}));$$(e+"_source_combo").setValue(o[0].id)}),500);else{var o=webix.storage.local.get(Ge.e);o&&$$(e+"_source_combo").setValue(o)}$$(e+"_sql_editor").getEditor(!0).then((function(t){!function(e,t,n){e._standaloneKeybindingService.addDynamicKeybinding("-"+t),e._standaloneKeybindingService.addDynamicKeybinding(t,n)}(t,"editor.action.deleteLines",monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_E),t.focus();var n="12";He.b.appProfile&&Array.isArray(He.b.appProfile)&&(n=He.b.appProfile.find((function(e){return"editor_font_size"==e.m_key})).m_val),t.updateOptions({fontSize:n+"px"}),t.addAction({id:"run-query",label:"Run Query",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter,monaco.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(t){return f($$(e+"_source_combo").getValue()),null}}),t.addAction({id:"auto-format-sql",label:"Auto format sql",keybindings:[monaco.KeyMod.Shift|monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_F],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return h(),null}}),t.addAction({id:"search-focus",label:"Search focus cursor",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_P],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(t){return $$(e+"_database_search").focus(),null}})})),webix.UIManager.addHotKey("Ctrl+;",(function(){$$(e+"_database_search").focus()}))},onDestruct:function(){}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var o=n(1),r={prefix:o.c+"generator"},i=o.a+"/generator"},function(e,t,n){"use strict";n.r(t),n.d(t,"runTarget",(function(){return d}));var o=n(0),r=n(1),i=(n(3),n(6)),a=(n(8),n(26));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c={view:"toolbar",elements:[{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-plus",autowidth:!0,click:function(){p(this.$scope,!1)}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-pencil-outline",id:"task_edit_btn",autowidth:!0,hidden:!0,click:function(){p(this.$scope,!0)}},{view:"button",type:"icon",css:"zmdi_padding",id:"task_delete_btn",icon:"mdi mdi-minus",autowidth:!0,hidden:!0,click:function(){var e,t,n,o;e=$$("task_table"),t=e.getSelectedId(),n=e.getItem(t),o=""+n.task_name,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+o+"</strong> ?",callback:function(e){e&&webix.ajax().del(i.b+"/"+n.id,null,(function(e){webix.message("<strong>"+o+" </strong> deleted."),b(),h()}))}})}},{view:"text",placeholder:"search",width:200},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-refresh",id:"task_refresh_btn",autowidth:!0,click:function(){b()}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-chevron-triple-right",id:"task_run_btn",tooltip:"Run Target",autowidth:!0,hidden:!0,click:function(){d()}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-download-outline",id:"task_download_btn",autowidth:!0,tooltip:"Download SQL script",hidden:!0,click:function(){var e=i.a.dataSelected,t=r.a+"/task/download/"+e.id;webix.ajax().get(t,(function(e){var t,n,o,r=JSON.parse(e);t=r.name+".sql",n=r.bundle,(o=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}))}}]};var l={width:400,view:"datatable",id:"task_table",select:"row",columns:[{id:"task_name",header:"Task",fillspace:!0,sort:"string"}],url:r.a+"/task",on:{onItemClick:function(e){var t=this.getItem(e);i.a.dataSelected=t,i.a.isEdit=!0,Object(a.reloadTaskItem)($$("task_item_table"),t.id),$$("task_delete_btn").show(),$$("task_edit_btn").show(),$$("task_download_btn").show(),$$("task_run_btn").show()},onItemDblClick:function(){p(this.$scope,!0)}}},f={view:"datatable",id:"task_item_table",select:"row",columns:[{id:"schema",header:["Schema",{content:"textFilter"}]},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0},{id:"type",header:"Type",adjust:!0}]};function d(){var e=i.a.dataSelected,t=e.task_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure run transfer to target server: <strong>"+t+"</strong> ?",callback:function(n){if(n){var o=$$("task_page_panel"),r=$$("task_run_btn");webix.extend(o,webix.ProgressBar),o.showProgress(),r.disable(),webix.ajax().post(i.b+"/transfer/"+e.id,null,(function(e){webix.message("<strong>"+t+" </strong> transfered."),setTimeout((function(){o.hideProgress(),r.enable()}),1e3)}))}}})}function p(e,t){i.a.isEdit=t,e.show("task.form?m=add",{target:"z_task_page"})}function h(){$$("task_delete_btn").hide(),$$("task_edit_btn").hide(),$$("task_download_btn").hide(),$$("task_run_btn").hide()}function b(){$$("task_table").clearAll(),$$("task_table").load(r.a+"/task"),h()}var m=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"task_page_panel",css:"z_overlay_loading",rows:[c,{cols:[l,{view:"resizer",css:"z_resizer_small"},f]}]}},t}(o.c);t.default=m},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadDbConfig",(function(){return p}));var o=n(0),r=n(7),i=n(41),a=n(12);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=a.a.prefix,l={view:"toolbar",css:"z-tb",elements:[{view:"button",id:c+"_add_btn",value:"Add",autowidth:!0,click:function(){d(this.$scope)}},{view:"button",id:c+"_edit_btn",value:"Edit",hidden:!0,autowidth:!0,click:function(){d(this.$scope,!0)}},{view:"button",id:c+"_delete_btn",value:"Delete",autowidth:!0,hidden:!0,click:function(){var e,t,n;e=$$(c+"_table"),t=e.getItem(e.getSelectedId()),n=""+t.conn_name,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.b+"/"+t.id,(function(e){webix.message({text:"<strong>"+n+"</strong> deleted."}),p()})).fail((function(e){showError(e)}))}})}},{view:"button",id:c+"_refresh_btn",value:"Refresh",autowidth:!0,click:function(){p()}},{},Object(r.c)(c+"_pager")]},f={view:"datatable",id:c+"_table",columns:[{id:"conn_name",header:"Name",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:150},{id:"database",header:"Database",width:150},{id:"user",header:"User",width:150}],resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",pager:c+"_pager",on:{onLoadError:function(e,t,n){showError(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(c+"_edit_btn").show(),$$(c+"_delete_btn").show();var t=this.getItem(e);a.a.dataSelected=t,a.a.isEdit=!0},onItemDblClick:function(){d(this.$scope,!0)}},url:"http://localhost:5000/api/user_config"};function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.a.isEdit=t,e.ui(i.DbConfigForm).show()}function p(){$$(c+"_table").clearAll(),$$(c+"_table").load("http://localhost:5000/api/user_config"),$$(c+"_edit_btn").hide(),$$(c+"_delete_btn").hide()}var h=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",rows:[l,f]}},t.prototype.init=function(e){},t.prototype.destructor=function(){},t}(o.c);t.default=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n(1),r=n(3),i=n(2),a={prefix:o.c+"database",isEdit:!1,dataSelected:{}},s=function(e,t){var n=webix.ajax().headers(Object(r.a)()).post(i.a+"/conn/test",t,(function(e){return console.log("res",e),webix.message({text:"Connection Ok"}),e})).fail((function(e){var t=JSON.parse(e.response);return webix.alert({type:"alert-error",title:"Connection Failed",text:"Can't Connect to Database Server<br>"+t.message}),e}));if(e)return n}},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(46);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(34);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(25);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0);n(16);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[{$subview:!0,name:"z_task_page"}]}},t.prototype.init=function(){this.show("task.page",{target:"z_task_page"})},t}(o.c);t.default=a},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(35);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(47);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadServerCombo",(function(){return v}));var o=n(0),r=n(18),i=n(4),a=n(10),s=n(2),u=n(5),c=n(14),l=n(40),f=n(1);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=r.a.prefix,b=void 0,m=void 0,w=void 0,_={view:"toolbar",elements:[{view:"combo",id:h+"_server",placeholder:"Source server",width:150,options:{url:s.a+"/conn?type=1&ls=true",fitMaster:!1,width:200},on:{onChange:function(e,t){!function(e){var t=$$(h+"_db_tree");t.clearAll(),t.load(a.a+"?id="+e),webix.storage.local.put(f.g,e)}(e)}}},{view:"button",type:"icon",autowidth:!0,icon:"mdi mdi-connection",click:function(){this.$scope.ui(l.DatabaseServer).show()}},{view:"button",type:"icon",autowidth:!0,icon:"mdi mdi-sync",click:function(){}},{view:"text",css:"search_suggest",id:h+"_database_search",placeholder:"Search..",width:300,hidden:!0,suggest:{keyPressTimeout:500,body:{dataFeed:function(e,t){if(e.length<3){var n=$$(h+"_database_search");return n&&$$(n).hideOverlay(),void this.clearAll()}this.clearAll();var o=$$(h+"_server").getValue();this.load(a.a+"/content_search?id="+o+"&root="+b+"&filter[value]="+e)},on:{onBeforeLoad:function(){var e=$$(h+"_database_search");webix.extend(e,webix.OverlayBox),e&&e.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:1; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var e=$$(h+"_database_search");webix.delay((function(){webix.extend(e,webix.OverlayBox),e&&$$(e).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(e){g(b,e.id)}}},on:{onKeyPress:function(e,t){9==e&&$$(h+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"button",type:"icon",autowidth:!0,id:h+"_copy_content",hidden:!0,icon:"mdi mdi-content-copy",click:function(){""!=$$("database_sql_editor").getValue()&&function(e,t){try{navigator.clipboard.writeText(t),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class=\"z_overlay\"><span class='z_copied_label animate__animated animate__flash'>Copied!</span></div>"),setTimeout((function(){e.hideOverlay()}),1e3)}catch(e){console.error("Failed to copy: ",e)}}($$("database_sql_editor"),$$("database_sql_editor").getValue())}},{view:"button",type:"icon",id:h+"_send_backward",icon:"mdi mdi-arrange-send-backward",autowidth:!0,hidden:!0,tooltip:"Copy to query editor",click:function(){var e=$$(h+"_server").getValue(),t=$$("database_sql_editor");webix.extend(t,webix.OverlayBox),t.showOverlay("Checking profile.."),webix.ajax().get(s.a+"/conncheck?id="+e+"&db="+w).then((function(e){e.json().data&&(t.hideOverlay(),function(e){var t=parseInt(i.b.currentTab)+1,n=u.a.prefix;if(a=n.substring(n.lastIndexOf("_")+1,n.length),isNaN(a)||(0|(s=parseFloat(a)))!==s)u.a.prefix=u.a.prefix+"_"+t;else{var o=u.a.prefix,r=o.substring(0,o.lastIndexOf("_"));u.a.prefix=r+"_"+t}var a,s;i.b.viewScope.addTab({header:"Query "+t,id:u.a.prefix,close:!0,width:150,body:Object(c.QueryPage)(u.a.prefix,e)}),$$("tabs").getTabbar().setValue(u.a.prefix),i.b.currentTab++}(w))}))}}]};function y(e,t,n){var o=void 0;if(void 0===n){for(var r=t;e.getParentId(r);)r=e.getParentId(r);o=r}else o=b;var i=e,s=$$(h+"_server").getValue();e.parse(webix.ajax().get(a.a+"/schema?id="+s+"&root="+o+"&parent="+t+"&t=0").then((function(e){var n=i.getItem(t);return setTimeout((function(){n.$count<=0&&(n.open=!1,i.refresh(t))}),600),e.json()})))}function g(e,t){var n=t.split("_")[1];if("g"==n||"u"==n){var o=$$(h+"_server").getValue(),r=$$("database_sql_editor");webix.extend(r,webix.OverlayBox),r.showOverlay("Loading..."),webix.ajax().get(a.a+"/schema_content?id="+o+"&root="+e+"&oid="+t).then((function(e){r.hideOverlay(),r.setValue(e.json().data)})),$$(h+"_copy_content").show(),$$(h+"_send_backward").show()}else $$(h+"_send_backward").hide(),$$(h+"_copy_content").hide()}function v(){var e=$$(h+"_server"),t=e.getPopup().getList();t.clearAll(),e.setValue(""),e.getPopup().getList().unselect(),t.load(s.a+"/conn?type=1&ls=true")}var $=function(e){function t(){return d(this,t),p(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[_,{cols:[{view:"tree",width:250,id:h+"_db_tree",css:"z_db_tree",select:!0,type:{icon:function(e,t){return e.open&&e.$count<=0?'<div class=" webix_icon mdi mdi-sync spin_mdi"></div>':'<div class="webix_tree_'+(e.$count?e.open?"open":"close":"none")+'"></div>'},my_folder:function(e){var t=e.id.split("_")[1];return"d"==t?"<span class='webix_icon mdi mdi-database-outline "+(e.open?"z_tree_d_open":"")+"'></span>":"s"==t?"<span class='webix_icon mdi mdi-rhombus-split-outline "+(e.open?"z_tree_s_open":"")+"'></span>":"t"==t?"<span class='webix_icon mdi mdi-table-large "+(e.open?"z_tree_t_open":"")+"'></span>":"u"==t?"<span class='webix_icon mdi mdi-table z_tree_u_open z_tree_u_open'></span>":"f"==t?"<span class='webix_icon mdi mdi-script-text-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"g"==t?"<span class='webix_icon mdi mdi-script-outline z_tree_g_open'></span>":"<span class='webix_icon mdi mdi-radiobox-blank'></span>"}},template:"{common.icon()} {common.my_folder()} <span>#value#</span>",on:{onAfterSelect:function(e){this.getItem(e);for(b=e;this.getParentId(b);)b=this.getParentId(b);w=this.getItem(b).value,$$(h+"_database_search").show(),g(b,e)},onItemClick:function(e){var t=e,n=this.getItem(e);for(i.b.currentDBSelected=n.value;this.getParentId(t);)t=this.getParentId(t);w=this.getItem(t).value},onItemDblClick:function(e){this.isBranchOpen(e)?this.close(e):this.open(e)},onAfterContextMenu:function(e,t,n){for(this.select(e),b=e;this.getParentId(b);)b=this.getParentId(b);m=e},onDataRequest:function(e){return y(this,e),!1}}},{view:"resizer"},{view:"monaco-editor",id:"database_sql_editor",readOnly:!0}]}]}},t.prototype.init=function(){this.ui({view:"contextmenu",id:"tree_contextmenu",data:[{id:"refresh",value:"Refresh"},{$template:"Separator"},{id:"createconn",value:"Create Connection"}],on:{onItemClick:function(e){"refresh"==e?y($$(h+"_db_tree"),m,!0):"createconn"==e&&webix.message("Not implement yet")}}}).attachTo($$(h+"_db_tree"))},t.prototype.ready=function(){var e=webix.storage.local.get(f.g);e&&$$(h+"_server").setValue(e)},t}(o.c);t.default=$},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadTaskItem",(function(){return O}));var o,r,i=n(0),a=n(3),s=n(6),u=n(10),c=n(8),l=n(2),f=n(16);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=s.a.prefix,b=function(e){return webix.ajax().get(s.c+"?filter[task_id]="+e)};function m(e,t){var n,o=$$(h+"_panel_form_item");webix.extend(o,webix.ProgressBar),o.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),o.disable(),(n=e,webix.ajax().get(u.a+"/schema_list?id="+n,(function(e){return e}))).then((function(e){b(t).then((function(t){var n=e.json().data,r=t.json().data,i=n.filter((function(e){return!r.filter((function(t){return t.oid===e.id})).length})),a=$$(h+"_avalaible_table");a.clearAll(),a.parse(i);var s=$$(h+"_selected_table");s.clearAll(),s.parse(r),o.hideProgress(),o.enable()}))}))}var w={view:"toolbar",elements:[{view:"combo",label:"Source",id:h+"_source_db_id",name:"source_db_id",labelWidth:60,width:300,placeholder:"db name",options:l.a+"/content?type=2&ls=true",on:{onChange:function(e){m(e,s.a.dataSelected.id)}}},{view:"button",type:"icon",icon:"mdi mdi-sync",css:"zmdi_padding",tooltip:"Refresh source",autowidth:!0,click:function(){m($$(h+"_source_db_id").getValue(),s.a.dataSelected.id)}},{view:"button",type:"icon",icon:"mdi mdi-chevron-right",css:"zmdi_padding",tooltip:"Add selected item",disabled:!0,autowidth:!0}]},_={view:"toolbar",elements:[{view:"button",type:"icon",icon:"mdi mdi-plus",css:"zmdi_padding",autowidth:!0,click:function(){webix.mesage("Not implement yet")}},{view:"button",type:"icon",icon:"mdi mdi-minus",css:"zmdi_padding",id:h+"_delete_item_btn",autowidth:!0,hidden:!0,click:function(){x()}},{view:"button",type:"icon",icon:"mdi mdi-content-save-outline",css:"zmdi_padding",id:h+"_save_btn",autowidth:!0,click:function(){var e,t;e=$$(h+"_selected_table").serialize(),t={task_id:$$(h+"_task_id").getValue(),source_db_id:$$(h+"_source_db_id").getValue(),oid_arr:e.map((function(e){return e.id})).join(",")},console.log("data",t),webix.ajax().headers(Object(a.a)()).post(s.c+"/selected",t,(function(e){O($$(h+"_selected_table"),t.task_id)})).fail((function(e){showError(e)}))}},{view:"combo",label:"Target",labelWidth:60,name:"target_db_id",id:h+"_target_db_id",width:300,placeholder:"db name",options:l.a+"/content?type=2&ls=true"},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-refresh",autowidth:!0,click:function(){O($$(h+"_selected_table"),s.a.dataSelected.id)}},{view:"button",type:"icon",icon:"mdi mdi-database-sync-outline",css:"zmdi_padding",tooltip:"Sync from source DB",autowidth:!0,click:function(){var e=$$(h+"_panel_form_item"),t={id:s.a.dataSelected.id,source_db_id:$$(h+"_source_db_id").getValue()};webix.extend(e,webix.OverlayBox),e.showOverlay("\n            <div class='transfer-content'>\n            <div class=\"spinner\"></div>\n            </div>\n            "),webix.ajax().post(s.c+"/syncselected",t,(function(t){setTimeout((function(){return e.hideOverlay()}),1e3)})).finally((function(){}))}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-chevron-triple-right",id:h+"_run_btn",tooltip:"Run Target",autowidth:!0,click:function(){Object(f.runTarget)()}},(o={view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-dots-vertical-circle-outline",autowidth:!0,popup:"my_pop",id:h+"_more_btn"},o.popup={view:"contextmenu",data:[{id:1,value:"Check broken files"},{id:2,value:"Clear workspace"}],submenuConfig:{},on:{onMenuItemClick:function(e){1==e&&webix.ajax().post(s.b+"/checkbroken/"+s.a.dataSelected.id,null,(function(e){var t=JSON.parse(e).data;console.log("data",t);var n="",o="All Ok, no broken files";t.status||(n="alert-warning",o="Files not found on workspace",t.length>0&&(o=t.replace(/ *, */g,"<br>"))),webix.alert({title:"Checking workspace files",type:n,text:o})}))}}},o)]},y={rows:[{view:"form",id:h+"_form",height:50,elements:[{cols:[{view:"text",label:"Task Name",name:"task_name",width:300},{view:"text",name:"id",id:h+"_task_id",hidden:!0},{view:"icon",icon:"mdi mdi-dots-vertical",tooltip:"add description",click:function(){var e=$$(h+"_note");e.isVisible()?(e.hide(),$$(h+"_form_space").show()):(e.show(),$$(h+"_form_space").hide())}},{view:"text",id:h+"_note",placeholder:"Description",name:"note",hidden:!0},{view:"button",value:"Add",autowidth:!0,id:h+"_add_btn",click:function(){!function(){if($$(h+"_form").validate()){var e=$$(h+"_form").getValues(),t=""+e.task_name;e.user_id=c.c.userId,s.a.isEdit?webix.ajax().headers(Object(a.a)()).put(s.b+"/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."})})).fail((function(e){showError(e)})):webix.ajax().headers(Object(a.a)()).post(s.b,e,(function(e){var t=JSON.parse(e);console.log("dataRes",t),$$(h+"_task_id").setValue(t.data.last_id),t.data.last_id?($$(h+"_panel_form_item").show(),$$(h+"_panel_form_item_empty").hide()):($$(h+"_panel_form_item").hide(),$$(h+"_panel_form_item_empty").show())})).fail((function(e){showError(e)}))}}()}},{id:h+"_form_space"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close",click:function(){this.$scope.show("task.page",{target:"z_task_page"})}}]},{}],rules:{task_name:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"task_name"==o&&n.push("Task Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}}}]},g=((r={view:"datatable",id:h+"_avalaible_table",resizeColumn:!0,scrollX:!0,select:"multiselect",multiselect:"touch",drag:!0}).select="row",r.columns=[{id:"schema",header:["Schema",{content:"textFilter"}],sort:"string"},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0,sort:"string"},{id:"type",header:["Type",{content:"textFilter"}],adjust:!0}],r.on={onAfterDrop:function(e,t){$()},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}},r),v={view:"datatable",id:h+"_selected_table",resizeColumn:!0,scrollX:!0,select:"multiselect",multiselect:"touch",drag:!0,columns:[{id:"schema",header:["Schema",{content:"textFilter"}],sort:"string"},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0,sort:"string"},{id:"type",header:"Type",adjust:!0}],on:{onItemClick:function(){$$(h+"_delete_item_btn").show()},onAfterDrop:function(e,t){$()},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}}};function $(){var e=$$(h+"_form").getValues();e.source_db_id=$$(h+"_source_db_id").getValue(),e.target_db_id=$$(h+"_target_db_id").getValue(),console.log("data",e);var t=$$(h+"_task_id").getValue();webix.ajax().headers(Object(a.a)()).put(s.b+"/"+t,e,(function(e){})).fail((function(e){showError(e)}))}var x=function(){var e=$$(h+"_selected_table"),t=e.getSelectedId();t&&(t=Array.isArray(t)?e.getSelectedId().map((function(e){return e.id})).join(","):t.id,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>Selected item</strong> ?",callback:function(n){n&&webix.ajax().post(s.c+"/rmselected",{sid:t},(function(t){webix.message("<strong>Selected item </strong> deleted."),O(e,s.a.dataSelected.id)}))}}))};function O(e,t){webix.extend(e,webix.ProgressBar),e.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),e.disable(),b(t).then((function(t){e.clearAll(),e.parse(t.json()),e.enable(),e.hideProgress()}))}var j=function(e){function t(){return d(this,t),p(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[y,{id:h+"_panel_form_item",hidden:!0,cols:[{rows:[w,g]},{view:"resizer",css:"z_resizer_small"},{gravity:2,rows:[_,v]}]},{id:h+"_panel_form_item_empty",template:"&nbsp;"}]}},t.prototype.init=function(e,t){if(console.log("INIT-url[0].page",t[0].page),console.log("INIT-url[0].params",t[0].params),s.a.isEdit){this.$$(h+"_add_btn").hide();var n=s.a.dataSelected;this.$$(h+"_form").setValues(n),$$(h+"_panel_form_item").show(),$$(h+"_panel_form_item_empty").hide(),console.log("dataSel",n),this.$$(h+"_source_db_id").setValue(n.source_db_id),this.$$(h+"_target_db_id").setValue(n.target_db_id)}else this.$$(h+"_add_btn").show()},t.prototype.urlChange=function(e,t){console.log("CHANGE-url[0].page",t[0].page),console.log("CHANGE-url[0].params",t[0].params)},t}(i.c);t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewDataPage",(function(){return l}));var o=n(2),r=n(4),i=n(10),a=n(9),s=n(1),u=n(3);function c(){var e,t,n=parseInt(r.b.currentTabViewData)+1,o=a.a.prefix,i=o.substring(o.lastIndexOf("_")+1,o.length);if(e=i,isNaN(e)||(0|(t=parseFloat(e)))!==t)a.a.prefix=a.a.prefix+"_"+n;else{var s=a.a.prefix,u=s.substring(0,s.lastIndexOf("_"));a.a.prefix=u+"_"+n}r.b.viewScope.addTab({header:"View Data "+n,id:a.a.prefix,close:!0,width:150,body:l(a.a.prefix)}),$$("tabs").getTabbar().setValue(a.a.prefix),r.b.currentTabViewData++}function l(e,t){var n="",r={view:"toolbar",css:"z_viewdata_toolbar",elements:[{view:"button",type:"icon",autowidth:!0,css:"zmdi_padding",tooltip:"Open new View Data",icon:"mdi mdi-view-grid-plus",click:function(){c()}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_showhide_db",autowidth:!0,hidden:!0,tooltip:"Show database content",icon:"mdi mdi-forwardburger",click:function(){}},{view:"combo",id:e+"_source_combo",placeholder:"Source DB",width:200,options:{url:o.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(s.f,e)}}},{view:"combo",placeholder:"Schema",tooltip:"Schema",width:200,hidden:!0,options:["One","Two","Three"]},{view:"combo",placeholder:"Table",width:200,hidden:!0,tooltip:"Table",options:["One","Two","Three"]},{view:"text",css:"search_suggest",id:e+"_database_search",placeholder:"Search..",width:300,suggest:{keyPressTimeout:500,body:{dataFeed:function(t,n){var o=$$(e+"_source_combo").getValue();if(o){if(t.length<1){var r=$$(e+"_database_search");return webix.extend(r,webix.OverlayBox),r&&$$(r).hideOverlay(),void this.clearAll()}this.clearAll(),this.load(i.a+"/content_search?id="+o+"&root=0&filter[value]="+t+"&view=tbl")}else webix.message({text:"Ops, select source DB first",type:"error"})},on:{onBeforeLoad:function(){var t=$$(e+"_database_search");webix.extend(t,webix.OverlayBox),t&&t.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:1.0; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var t=$$(e+"_database_search");webix.delay((function(){webix.extend(t,webix.OverlayBox),t&&$$(t).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(t){var o,r,i,s;o=t.id,r=o.split("_")[0],i=$$(e+"_source_combo").getValue(),s=$$(e+"_table_panel"),webix.extend(s,webix.ProgressBar),s.showProgress({type:"top"}),n=a.b+"/data?id="+i+"&&oid="+r,webix.ajax().get(n).then((function(t){s.hideProgress();var o=t.json(),r=$$(e+"_table_panel").getChildViews();r[0]&&$$(e+"_table_panel").removeView(r[0]);var u={view:"datatable",datafetch:30,resizeColumn:!0,id:e+"_table",columns:o.config,data:o.data,select:"row",editable:!0,ztblOid:o.tbl_oid,save:{update:function(e,t,n){var r={data:n,oid:o.tbl_oid,source_id:i};return webix.ajax().post(a.b+"/update",r)}},editaction:"dblclick",pager:e+"_pagerA",url:n,on:{onBeforeLoad:function(){webix.extend(this,webix.ProgressBar),this.showProgress({type:"top"})},onAfterLoad:function(){this.hideProgress()},onItemClick:function(t){$$(e+"_remove_row").show()}}};$$(e+"_table_panel").addView(u),$$(e+"_refresh").show(),$$(e+"_add_row").show()})).fail((function(t){var n=JSON.parse(t.response);webix.message({text:n.message,type:"error"}),s.hideProgress(),$$(e+"_table").clearAll()}))}}},on:{onKeyPress:function(t,n){9==t&&$$(e+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_refresh",autowidth:!0,hidden:!0,tooltip:"Refresh",icon:"mdi mdi-sync",click:function(){var t=$$(e+"_table");t&&(t.clearAll(),t.load(n),$$(e+"_remove_row").show())}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_add_row",autowidth:!0,hidden:!0,tooltip:"Add new row",icon:"mdi mdi-table-row-plus-after",click:function(){$$(e+"_table").add({id:"0"},0)}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_remove_row",autowidth:!0,hidden:!0,tooltip:"Remove row",icon:"mdi mdi-table-row-remove",click:function(){var t;t=$$(e+"_table").getSelectedId(),webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(n){n&&webix.ajax().headers(Object(u.a)()).del(a.b+"/remove",null,(function(n){$$(e+"_table").remove(t),webix.message({text:"Row deleted"})}))}})}},{},{view:"pager",id:e+"_pagerA",css:"z-pager-aligned",size:30,template:function(e,t){var n=e.page*e.size,o=n+e.size;return o>e.count&&(o=e.count),"<span class='z-pager-no'>"+(n+1)+"-"+o+" of "+e.count+"</span> "+t.prev()+t.next()}},{view:"icon",icon:"mdi mdi-help-circle-outline",id:e+"_help_btn",tooltip:"Show help, shortcut",autowidth:!0,click:function(){this.$scope.ui(QueryHelp).show()}}]};return{id:e,type:"clean",borderless:!0,rows:[{type:"clean",borderless:!0,rows:[{id:e+"_page_panel",css:"z_viewdata_page_panel",rows:[{rows:[r,{id:e+"_table_panel",rows:[{id:e+"_empty_tmpl",template:"<div style='text-align:center;padding-top:200px'>Search or select table to show data..</div>"}]},{hidden:!0,cols:[{id:e+"_list_tbl",view:"list",width:250,template:"#title#",select:!0,data:[{id:1,title:"Item 1"},{id:2,title:"Item 2"},{id:3,title:"Item 3"}]}]}]}]}]}],on:{onViewShow:function(){$$(e+"_database_search").focus();var t=webix.storage.local.get(s.f);t&&$$(e+"_source_combo").setValue(t)}}}}},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(15),i=n(3),a=n(2),s=n(1),u=n(7),c=n(4);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=r.a.prefix+"_outprms";var p=function(e){function t(){return l(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_content",rows:[{view:"toolbar",elements:[{cols:[{view:"combo",id:d+"_source_combo",placeholder:"Source DB",width:200,options:{url:a.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(s.f,e)}}},{view:"icon",icon:"mdi mdi-play-box-outline",tooltip:"Generate",autowidth:!0,click:function(){var e,t;e=$$(d+"_outparams_ed"),t={id:$$(d+"_source_combo").getValue(),querysql:e.getValue()},webix.ajax().headers(Object(i.a)()).post(r.b+"/outparams",t,(function(e){var t=JSON.parse(e);void 0!==t.data&&$$(d+"_result").setHTML("<pre id='generator_result'>"+t.data+"</pre>")})).fail((function(e){Object(u.e)(e.response)}))}},{width:10},{view:"icon",icon:"mdi mdi-content-copy",tooltip:"Copy result content",css:"z_mdi_icon_smaller",autowidth:!0,click:function(){var e=document.getElementById("generator_result");e&&function(e,t){try{navigator.clipboard.writeText(t),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class=\"z_overlay\"><span class='z_copied_label animate__animated animate__flash'>Copied! <span class='mdi mdi-checkbox-marked-circle-outline' style='color:orange;'></span></span></div>"),setTimeout((function(){e.hideOverlay()}),1e3)}catch(e){console.error("Failed to copy: ",e)}}($$(d+"_result"),e.innerHTML)}},{view:"icon",icon:"mdi mdi-refresh",tooltip:"Reset",autowidth:!0,click:function(){!function(){var e=$$(d+"_outparams_ed");e.setValue(""),e.getEditor(!0).then((function(e){e.focus()}));var t=document.getElementById("generator_result");t&&(t.innerHTML="")}()}},{}]}]},{view:"monaco-editor",id:d+"_outparams_ed",language:"sql"},{view:"resizer"},{view:"template",scroll:"xy",css:"z_out_template",id:d+"_result"}]}},t.prototype.init=function(){var e=webix.storage.local.get(s.f);e&&$$(d+"_source_combo").setValue(e),$$(d+"_outparams_ed").getEditor(!0).then((function(e){e.focus();var t="12";c.b.appProfile&&Array.isArray(c.b.appProfile)&&(t=c.b.appProfile.find((function(e){return"editor_font_size"==e.m_key})).m_val),e.updateOptions({fontSize:t+"px"})}))},t}(o.c);t.default=p},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(17);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(43);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(5),i=n(14);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return Object(i.QueryPage)(r.a.prefix)},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(45);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(9),i=n(27);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return Object(i.ViewDataPage)(r.a.prefix)},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(0),r=(n(9),n(2));function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_copydata_page",rows:[{view:"toolbar",css:"z_query_toolbar",elements:[{view:"combo",id:"copysourcecombo",placeholder:"Source DB",width:200,options:{url:r.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){}}},{view:"combo",id:"copytargetcombo",width:200,placeholder:"Target DB",options:{url:r.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){}}},{view:"button",autowidth:!0,value:"Apply copy",click:function(){webix.message({text:"Not implemented yet",type:"error"})}}]},{template:"Source: Select data by query"},{template:"Target: Result datatable"}]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(15);n(28);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=r.a.prefix,u={view:"toolbar",elements:[{view:"icon",id:s+"_refresh_btn",tooltip:"Refresh",icon:"mdi mdi-sync",autowidth:!0,click:function(){}}]},c=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_page",rows:[{cols:[{rows:[u,{view:"list",width:250,template:"#title#",select:!0,css:"z_generator_list",data:[{id:"generator.outparams",title:"Out params"},{id:"generator.insertquery",title:"Insert Query"}],on:{onItemClick:function(e){this.$scope.show(e,{target:s+"_pageview"})}}}]},{$subview:!0,name:s+"_pageview"}]}]}},t.prototype.init=function(){this.show("generator.default",{target:s+"_pageview"})},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t),n.d(t,"UserForm",(function(){return b}));var o=n(0),r=n(3),i=n(13),a=n(7);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=i.b.prefix,l=void 0;function f(){i.b.isEdit;return{view:"window",modal:!0,id:c+"_win",position:"center",move:!0,width:600,head:{height:35,cols:[{view:"icon",icon:"mdi mdi-plus",click:function(){$$(c+"_form").show(),$$(c+"_cancel_btn").show(),$$(c+"_username").focus()}},{template:"User",css:"z-window-header webix_view webix_header webix_win_title",borderless:!0},{width:30}]},body:{rows:[{hidden:!0,padding:10,view:"form",id:c+"_form",width:600,type:"clean",elements:[{cols:[{view:"text",label:"Username",name:"username",labelWidth:70,id:c+"_username"},{view:"text",label:"Password",name:"password",type:"password",labelWidth:70,id:c+"_password",attributes:{autocomplete:"new-password"}}]},{cols:[{view:"text",label:"Fullname",name:"fullname",labelWidth:70,id:c+"_fullname"},{view:"text",label:"Email",name:"email",type:"email",labelWidth:70,id:c+"_email"}]},{cols:[{view:"combo",label:"Role",name:"user_level",labelWidth:70,id:c+"_role",options:[{id:1,value:"Elephant"},{id:2,value:"Spider"},{id:3,value:"Turtle"}],value:3},{}]},{cols:[{width:70},{view:"button",value:"Save",autowidth:!0,id:c+"_save_btn",click:function(){var e,t;$$(c+"_form").validate()&&(e=$$(c+"_form").getValues(),t=e.username+" - "+e.fullname,l?webix.ajax().headers(Object(r.a)()).put(i.c+"/users/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated.",type:"success"}),p()})).fail((function(e){showError(e)})):webix.ajax().headers(Object(r.a)()).post(i.c+"/register",e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved.",type:"success"}),p()})).fail((function(e){showError(e)})))}},{view:"button",value:"Delete",autowidth:!0,hidden:!0,id:c+"_delete_btn",click:function(){d()}},{view:"button",value:"Cancel",autowidth:!0,hidden:!0,id:c+"_cancel_btn",click:function(){h(),$$(c+"_username").setValue(),$$(c+"_username").focus(),$$(c+"_password").setValue(),$$(c+"_fullname").setValue(),$$(c+"_email").setValue(),$$(c+"_role").setValue(3)}}]}],rules:{username:webix.rules.isNotEmpty,fullname:webix.rules.isNotEmpty,user_level:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"username"==o&&n.push("Username can't be empty"),"fullname"==o&&n.push("Fullname can't be empty"),"user_level"==o&&n.push("Role can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:100,bottomPadding:1}},{view:"datatable",minHeight:300,id:c+"_table",select:"row",columns:[{id:"username",header:"Username",sort:"string",width:150},{id:"fullname",header:"Fullname",sort:"string",width:200},{id:"email",header:"Email",sort:"string",width:200},{id:"user_level",header:"Role",width:100}],url:i.c+"/users",pager:c+"_pagerA",on:{onItemClick:function(e){$$(c+"_form").show(),$$(c+"_cancel_btn").show(),$$(c+"_save_btn").show(),$$(c+"_delete_btn").show(),$$(c+"_password").setValue(),l=!0}}},{view:"toolbar",elements:[{view:"pager",id:c+"_pagerA",css:"z-pager-aligned-left",size:a.a,template:function(e,t){var n=e.page*e.size,o=n+e.size;return o>e.count&&(o=e.count),"<span class='z-pager-no'>"+(n+1)+"-"+o+" of "+e.count+"</span> "+t.prev()+t.next()+'<button type="button" class="webix_pager_item z_refresh_user_pager" aria-label="Refresh page"><span class="webix_icon mdi mdi-sync"></span></button>'},onClick:{z_refresh_user_pager:function(e,t){return p(),!1}}},{},{view:"button",value:"Close",autowidth:!0,click:function(){$$(c+"_form").clear(),$$(c+"_win").destructor()}}]}]},on:{onShow:function(){}}}}var d=function(){var e=$$(c+"_table"),t=e.getItem(e.getSelectedId()),n=t.username;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(i.c+"/users/"+t.id,null,(function(e){webix.message({text:"<strong>"+n+" </strong> deleted.",type:"success"}),p()}))}})};function p(){$$(c+"_table").clearAll(),$$(c+"_table").load(i.c+"/users"),h()}function h(){$$(c+"_form").hide(),$$(c+"_delete_btn").hide(),$$(c+"_cancel_btn").hide(),$$(c+"_table").clearSelection()}var b=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return f()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(c+"_form").bind($$(c+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"ChangePassword",(function(){return h}));var o=n(0),r=n(13),i=n(7),a=n(3),s=n(8);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=r.b.prefix,f=l+"_changepass_form";function d(){return{view:"window",modal:!0,id:l+"_win",position:"center",head:{height:38,template:"Change Password"},body:{rows:[{padding:10,view:"form",id:f,width:400,type:"clean",elements:[{view:"text",type:"password",name:"old_password",label:"Old Password",tooltip:"Old Password",id:l+"-old_pass",labelWidth:140},{view:"text",type:"password",name:"new_password",label:"New Password",tooltip:"New Password",id:l+"-new_pass",labelWidth:140},{view:"text",type:"password",name:"repeat_password",label:"Repeat New Password",tooltip:"Repeat New Password",id:l+"-repeat_pass",labelWidth:140}],rules:{old_password:webix.rules.isNotEmpty,new_password:webix.rules.isNotEmpty,repeat_password:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"old_password"==o&&n.push("Old Password can't be empty"),"new_password"==o&&n.push("New Password can't be empty"),"repeat_password"==o&&n.push("Repeat New Password can't be empty");webix.message({type:"error",text:n.join("<br>")})}}}},{view:"toolbar",elements:[{},{view:"button",label:"Change Password",autowidth:!0,id:l+"-save_btn",click:function(){var e;$$(f).validate()&&(e=$$(f).getValues(),webix.ajax().headers(Object(a.a)()).put(r.c+"/users/"+s.c.userId+"/changepass",e,(function(e){webix.message({type:"success",text:"Password changed"}),p()})).fail((function(e){webix.message({type:"error",text:JSON.parse(e.response).message}),Object(i.d)(e)})))}},{view:"button",value:"Cancel",autowidth:!0,click:function(){p()}}]}]},on:{onShow:function(){$$(l+"-old_pass").focus()}}}}function p(){$$(l+"_win").destructor()}var h=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return d()},t.prototype.show=function(e){this.getRoot().show(e)},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryDatabase",(function(){return y}));var o=n(0),r=n(5),i=n(8),a=n(2),s=n(7),u=n(18),c=n(3);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=r.a.prefix+"_server",p=!1,h=function(){return{view:"window",modal:!0,id:d+"_win",position:"center",move:!0,head:{height:38,template:"DB Connection"},body:{rows:[{padding:10,view:"form",id:d+"_form",width:500,type:"clean",hidden:!0,elements:[{cols:[{view:"text",label:"Name",name:"conn_name",id:d+"_conn_name"},{view:"text",label:"Database",name:"database",id:d+"_database"}]},{cols:[{view:"text",label:"Host",name:"host",id:d+"_host"},{view:"text",label:"Port",name:"port",id:d+"_port",value:"5432",type:"number",labelWidth:70}]},{cols:[{view:"text",label:"Username",name:"user",id:d+"_user"},{view:"text",label:"Password",name:"password",id:d+"_password",type:"password",labelWidth:70,attributes:{autocomplete:"off"},autocomplete:"new-password"}]}],rules:{lable_size_inc:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:70,bottomPadding:1}},{view:"toolbar",id:d+"_form_tb",css:"z-tb",width:500,elements:[{cols:[{view:"button",label:"Add",autowidth:!0,id:d+"_add_btn",click:function(){$$(d+"_form").show(),$$(d+"_form").clear(),$$(d+"_save_btn").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_test_btn").show(),$$(d+"_port").setValue("5432"),p=!1}},{view:"button",label:"Save",autowidth:!0,hidden:!0,id:d+"_save_btn",click:function(){var e,t;e=$$(d+"_form").getValues(),t=e.conn_name,e.type=2,e.user_id=i.c.userId,p?webix.ajax().headers(Object(c.a)()).put(a.a+"/conn/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."}),m()})).fail((function(e){Object(s.d)(e)})):webix.ajax().headers(Object(c.a)()).post(a.a+"/conn",e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved."}),m()})).fail((function(e){Object(s.d)(e)}))}},{view:"button",value:"Delete",id:d+"_delete_btn",autowidth:!0,hidden:!0,click:function(){b()}},{view:"button",value:"Cancel",id:d+"_form_cancel_btn",autowidth:!0,hidden:!0,click:function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_form_cancel_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_delete_btn").hide(),$$(d+"_table").clearSelection(),p=!1}},{},{view:"button",label:"Test",autowidth:!0,hidden:!0,id:d+"_test_btn",click:function(){var e=$$(d+"_form").getValues();e.type=2,Object(u.b)(!1,e)}}]}]},{view:"datatable",id:d+"_table",resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",height:300,pager:"pagerA",columns:[{id:"conn_name",header:"Name",width:150},{id:"database",header:"Database",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:100},{id:"user",header:"Username",width:150}],on:{onLoadError:function(e,t,n){Object(s.d)(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(d+"_form").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_save_btn").show(),$$(d+"_test_btn").show(),$$(d+"_delete_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_password").setValue(),p=!0},onItemDblClick:function(){}},url:a.a+"/conn?type=2"},{view:"toolbar",elements:[{view:"pager",id:"pagerA",css:"z-pager-aligned-left",size:100,template:function(e,t){return e.count>0?"<span class='z-pager-no'>"+e.count+"</span>":""}},{},{view:"button",value:"Close",autowidth:!0,click:function(){w()}}]}]},on:{onShow:function(){$$(d+"_conn_name").focus()}}}};var b=function(){var e=$$(d+"_table"),t=e.getItem(e.getSelectedId()),n=t.conn_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.a+"/conn/"+t.id,null,(function(e){webix.message("<strong>"+n+" </strong> deleted."),m()}))}})},m=function(){$$(d+"_table").clearAll(),$$(d+"_table").load(a.a+"/conn?type=2"),_()},w=function(){$$(d+"_form").clear(),$$(d+"_win").destructor()},_=function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_form_cancel_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_delete_btn").hide(),$$(d+"_test_btn").hide(),$$(d+"_table").clearSelection(),p=!1},y=function(e){function t(){return l(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return h()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(d+"_form").bind($$(d+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryHelp",(function(){return u}));var o=n(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(5).a.prefix+"_help",s=[{id:1,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>;&nbsp;</span>",shortcut:"Focus to quick search"},{id:2,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>F</span>",shortcut:"Find"},{id:3,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>H</span>",shortcut:"Find and Replace"},{id:4,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>E</span>",shortcut:"Delete line"}],u=function(e){function t(){return r(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",modal:!0,id:e=a+"_win",position:"center",move:!0,head:{height:38,cols:[{width:30},{view:"label",label:"Shortcut",align:"center"},{view:"icon",icon:"mdi mdi-window-close",css:"win_btn",click:function(){$$(e).destructor()}}]},body:{rows:[{view:"datatable",id:a+"_table",resizeColumn:!0,select:"row",height:400,width:300,columns:[{header:[],id:"key",adjust:!0},{header:[],id:"shortcut",width:500}],on:{onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}},data:s}]}};var e},t.prototype.show=function(e){this.getRoot().show(e)},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"DatabaseServer",(function(){return y}));var o=n(0),r=n(18),i=n(8),a=n(2),s=n(7),u=n(3),c=n(25);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=r.a.prefix+"_server",p=!1,h=function(){return{view:"window",modal:!0,id:d+"_win",position:"center",move:!0,head:{height:38,template:"Server"},body:{rows:[{padding:10,view:"form",id:d+"_form",width:500,type:"clean",hidden:!0,elements:[{view:"text",label:"Name",name:"conn_name",id:d+"_conn_name"},{cols:[{view:"text",label:"Host",name:"host",id:d+"_host"},{view:"text",label:"Port",name:"port",placeholder:"5432",id:d+"_port",labelWidth:70}]},{cols:[{view:"text",label:"Username",name:"user",id:d+"_user"},{view:"text",label:"Password",name:"password",id:d+"_password",type:"password",labelWidth:70,attributes:{autocomplete:"new-password"}}]}],rules:{lable_size_inc:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:70,bottomPadding:1}},{view:"toolbar",id:d+"_form_tb",css:"z-tb",width:500,elements:[{cols:[{view:"button",label:"Add",autowidth:!0,id:d+"_add_btn",click:function(){$$(d+"_form").show(),$$(d+"_form").clear(),$$(d+"_save_btn").show(),$$(d+"_test_btn").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_port").setValue("5432"),p=!1}},{view:"button",label:"Save",autowidth:!0,hidden:!0,id:d+"_save_btn",click:function(){var e,t;e=$$(d+"_form").getValues(),t=e.conn_name,e.type=1,e.user_id=i.c.userId,p?webix.ajax().headers(Object(u.a)()).put(a.a+"/conn"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."}),m()})).fail((function(e){Object(s.d)(e)})):webix.ajax().headers(Object(u.a)()).post(a.a+"/conn",e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved."}),m()})).fail((function(e){Object(s.d)(e)}))}},{view:"button",value:"Delete",id:d+"_delete_btn",autowidth:!0,hidden:!0,click:function(){b()}},{view:"button",value:"Cancel",id:d+"_form_cancel_btn",autowidth:!0,hidden:!0,click:function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_form_cancel_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_delete_btn").hide(),$$(d+"_table").clearSelection(),p=!1}},{},{view:"button",label:"Test",autowidth:!0,hidden:!0,id:d+"_test_btn",click:function(){var e=$$(d+"_form").getValues();e.type=1,Object(r.b)(!1,e)}}]}]},{view:"datatable",id:d+"_table",resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",height:300,pager:"pagerA",columns:[{id:"conn_name",header:"Name",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:100},{id:"user",header:"Username",width:150}],on:{onLoadError:function(e,t,n){Object(s.d)(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(d+"_form").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_save_btn").show(),$$(d+"_delete_btn").show(),$$(d+"_test_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_password").setValue(),p=!0},onItemDblClick:function(){}},url:a.a+"/conn?type=1"},{view:"toolbar",elements:[{view:"pager",id:"pagerA",css:"z-pager-aligned-left",size:100,template:function(e,t){return e.count>0?"<span class='z-pager-no'>"+e.count+"</span>":""}},{},{view:"button",value:"Close",autowidth:!0,click:function(){w()}}]}]},on:{onShow:function(){$$(d+"_conn_name").focus()}}}};var b=function(){var e=$$(d+"_table"),t=e.getItem(e.getSelectedId()),n=t.conn_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.a+"/conn/"+t.id,null,(function(e){webix.message("<strong>"+n+" </strong> deleted."),m()}))}})},m=function(){$$(d+"_table").clearAll(),$$(d+"_table").load(a.a+"/conn?type=1"),_()},w=function(){$$(d+"_form").clear(),$$(d+"_win").destructor(),setTimeout((function(){Object(c.reloadServerCombo)()}),1e3)},_=function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_form_cancel_btn").hide(),$$(d+"_test_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_delete_btn").hide(),$$(d+"_table").clearSelection(),p=!1},y=function(e){function t(){return l(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return h()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(d+"_form").bind($$(d+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"DbConfigForm",(function(){return d}));var o=n(0),r=n(3),i=n(12),a=n(17);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=i.a.prefix;function l(){var e=i.a.isEdit;return{view:"window",modal:!0,id:c+"_win",position:"center",move:!0,head:{height:38,template:e?"Edit DB Config":"Add DB Config"},body:{rows:[{padding:10,view:"form",id:c+"_form",width:400,type:"clean",elements:[{view:"text",label:"Name",name:"conn_name",id:c+"_conn_name"},{view:"text",label:"Host",name:"host",id:c+"_host"},{view:"text",label:"Port",name:"port",id:c+"_port",type:"number"},{view:"text",label:"Database",name:"database",id:c+"_database"},{view:"text",label:"User",name:"user",id:c+"_user"},{view:"text",label:"Password",name:"password",id:c+"_password",type:"password"}],rules:{conn_name:webix.rules.isNotEmpty,host:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty"),"host"==o&&n.push("Host can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:100,bottomPadding:1}},{view:"toolbar",elements:[{view:"button",value:"Test",autowidth:!0,click:function(){}},{},{view:"button",label:e?"Update":"Save",autowidth:!0,id:c+"_save_btn",click:function(){$$(c+"_form").validate()&&function(){var e=$$(c+"_form").getValues(),t=""+e.conn_name;i.a.isEdit?webix.ajax().headers(Object(r.a)()).put(i.b+"/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."}),Object(a.reloadDbConfig)()})).fail((function(e){showError(e)})):webix.ajax().headers(Object(r.a)()).post(i.b,e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved."}),Object(a.reloadDbConfig)()})).fail((function(e){showError(e)}));f()}()}},{view:"button",value:"Cancel",autowidth:!0,click:function(){f()}}]}]},on:{onShow:function(){}}}}function f(){$$(c+"_form").clear(),$$(c+"_win").destructor(),$$(c+"_edit_btn").hide(),$$(c+"_delete_btn").hide(),$$(c+"_table").clearSelection()}var d=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return l()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){this.$$(c+"_form").setValues(i.a.dataSelected),i.a.isEdit?1==i.a.dataSelected.id&&($$(c+"_form").disable(),$$(c+"_save_btn").disable()):$$(c+"_form").clear()},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(15),i=n(3),a=n(2),s=n(1);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=r.a.prefix+"_insertquery";var f=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_content",rows:[{view:"toolbar",elements:[{cols:[{view:"combo",id:l+"_source_combo",placeholder:"Source DB",width:200,options:{url:a.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(s.f,e)}}},{view:"icon",icon:"mdi mdi-play-box-outline",tooltip:"Generate",autowidth:!0,click:function(){var e;e={id:4,querysql:$$(l+"_insertquery_ed").getValue()},webix.ajax().headers(Object(i.a)()).post(r.b+"/outparams",e,(function(e){var t=JSON.parse(e);void 0!==t.data&&$$(l+"_result").setHTML("<pre id='insert_query_result'>"+t.data+"</pre>")})).fail((function(e){showError(e)}))}},{width:10},{view:"icon",icon:"mdi mdi-content-copy",tooltip:"Copy result content",css:"z_mdi_icon_smaller",autowidth:!0,click:function(){var e=document.getElementById("insert_query_result");e&&function(e,t){try{navigator.clipboard.writeText(t),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class=\"z_overlay\"><span class='z_copied_label animate__animated animate__flash'>Copied! <span class='mdi mdi-checkbox-marked-circle-outline' style='color:orange;'></span></span></div>"),setTimeout((function(){e.hideOverlay()}),1e3)}catch(e){console.error("Failed to copy: ",e)}}($$(l+"_result"),e.innerHTML)}},{view:"icon",icon:"mdi mdi-refresh",tooltip:"Reset",autowidth:!0,click:function(){!function(){var e=$$(l+"_insertquery_ed");e.setValue(""),e.getEditor(!0).then((function(e){e.focus()}));var t=document.getElementById("insert_query_result");t&&(t.innerHTML="")}()}},{}]}]},{view:"monaco-editor",id:l+"_insertquery_ed",language:"sql"},{view:"resizer"},{view:"template",scroll:"xy",css:"z_out_template",id:l+"_result"}]}},t.prototype.init=function(){var e=webix.storage.local.get(s.f);e&&$$(l+"_source_combo").setValue(e)},t}(o.c);t.default=f},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"Migration page"}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";var o;n.r(t),t.default=((o={css:"z_tabview_item",template:"\n\t\t<h3>About:</h3>\n\t\t<p><strong>ZPGTOOL</strong> an experimental side project written with <a href='https://nodejs.org' target='_blank'>NodeJS</a> and <a href='https://webix.com' target='_blank'>Webix</a> (<a href='https://www.npmjs.com/package/webix' target='_blank'>GPL license</a>), inspired by Jenkins and PgAdmin to improve unavailable features to make it simple and easy.<br>\n\t\tFor more other functionality of Postgres please use PgAdmin</p>\n\t\t<p>Features idea:\n\t\t\t<ul>\n\t\t\t\t<li>Easy to navigate</li>\n\t\t\t\t<li>Task SQL continues integration</li>\n\t\t\t\t<li>Comparing between SQL function direct correction</li>\n\t\t\t\t<li>Simple query editor</li>\n\t\t\t\t<li>Easy copy data between database</li>\n\t\t\t\t<li>and more..</li>\n\t\t\t</ul>\n\t\t</p>\n\n\t\t<h4>Requirement:</h4>\n\t\t<p>\n\t\t\t<ul>\n\t\t\t\t<li>Postgres version 9.6 or above</li>\n\t\t\t</ul>\n\t\t</p>\n\n\t\t<h4>Limitation:</h4>\n\t\t<p>\n\t\t\t<ul>\n\t\t\t\t<li>Query not have cancel/stop, alternatively set timeout on setting menu (to be improve should do)</li>\n\t\t\t\t<li>Tables and function scripts only</li>\n\t\t\t</ul>\n\t\t</p>\n\t\t<section>\n\t\t\t<h4>Todo:</h4>\n\t\t\t<ul>\n\t\t\t\t<li>meta app config</li>\n\t\t\t\t<li>set setting module by user</li>\n\t\t\t\t<li>dashboard: show process activity</li>\n\t\t\t</ul>\n\t\t</section>\n\t\t\n\t\t<section>\n\t\t\t<h4>Change log:</h4>\n\t\t\t<p>\n\t\t\t\t<h4>1.2-dev (21-10-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>fix: handle catch error table permission</li>\n\t\t\t\t\t<li>fix: handle table not using primary key</li>\n\t\t\t\t\t<li>fix: test db connection</li>\n\t\t\t\t\t<li>upd: user list refresh and pager</li>\n\t\t\t\t\t<li>upd: user list to standard icon</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>1.1-dev (12-10-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>db: load table content</li>\n\t\t\t\t\t<li>query: switch multi db conn</li>\n\t\t\t\t\t<li>query: direct inline update</li>\n\t\t\t\t\t<li>update db config module by server</li>\n\t\t\t\t\t<li>copy data module</li>\n\t\t\t\t\t<li>user module</li>\n\t\t\t\t\t<li>setting module</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>1.0-dev (05-05-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>add: db, query, conn config</li>\n\t\t\t\t\t<li>fix: query response</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t</section>\n\t"}).css="webix_shadow_medium app_start",o)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"User page"}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i={prefix:r.c+"compare"},a=r.a+"/compare",s=n(2);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=i.prefix,f=new webix.DataCollection,d={view:"toolbar",elements:[{view:"combo",id:"diffsourcecombo",placeholder:"Source DB",width:200,options:{url:s.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){var n=$$("diffsourcecombo").getValue(),o=$$("difftargetcombo").getValue();n&&o&&n!=o?($$("diff_swap_btn").enable(),$$("diff_compare_btn").enable()):($$("diff_swap_btn").disable(),$$("diff_compare_btn").disable())}}},{view:"button",id:"diff_swap_btn",type:"icon",icon:"mdi mdi-swap-horizontal",css:"win_btn",tooltip:"Swap database connection",autowidth:!0,disabled:!0,click:function(){var e=$$("diffsourcecombo").getValue(),t=$$("difftargetcombo").getValue();e&&t&&($$("difftargetcombo").setValue(e),$$("diffsourcecombo").setValue(t))}},{view:"combo",id:"difftargetcombo",width:200,placeholder:"Target DB",options:{url:s.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){!function(e){var t=$$("diffschemalist"),n=t.getPopup().getList();n.clearAll(),t.setValue(""),t.getPopup().getList().unselect(),n.load(a+"/schema?id="+e)}($$("diffsourcecombo").getValue());var n=$$("diffsourcecombo").getValue(),o=$$("difftargetcombo").getValue();n&&o&&n!=o?($$("diff_swap_btn").enable(),$$("diff_compare_btn").enable()):($$("diff_swap_btn").disable(),$$("diff_compare_btn").disable())}}},{view:"combo",placeholder:"Schema",width:200,id:"diffschemalist",options:{}},{view:"checkbox",id:"diffistable",labelRight:"Table",labelWidth:1,width:90,checkValue:!0,uncheckValue:!1},{view:"button",id:"diff_compare_btn",value:"Compare",autowidth:!0,disabled:!0,click:function(){!function(){var e=$$("diffsourcecombo").getValue(),t=$$("difftargetcombo").getValue(),n=$$("diffschemalist").getValue(),o=$$("diffistable").getValue(),r=$$("diffsourcecombo").getPopup().getList().getItem(e),i=$$("difftargetcombo").getPopup().getList().getItem(t);$$("diff_config_info_lbl").setValue("Source: "+r.host+"/"+r.database+" &nbsp;&nbsp;&nbsp; Target: "+i.host+"/"+i.database),$$("griddiff").clearAll();var s=a+"/diff?source_id="+e+"&target_id="+t+"&schema="+n+"&is_show_table="+o,u=$$("z_compare_page");webix.extend(u,webix.ProgressBar),u.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),u.disable(),webix.ajax(s).then((function(e){u.hideProgress(),u.enable(),$$("griddiff").parse(e.json());var t=$$("diff_detail_panel");webix.extend(t,webix.OverlayBox),t.showOverlay("<div style='background:white;padding-top:0;height:99%; display: flex;justify-content: center;align-items: center; flex-direction: column;margin-top:1px; margin-bottom:1px'>\n\t\t<div>Select left table to show the differences</div>\n\t\t<div style='font-size: 20px' class='mdi mdi-arrow-left'></div>\n\t  </div>"),$$("griddiff").serialize().length>0?($$("diff_detail_resizer").show(),$$("diff_detail_panel").show()):($$("diff_detail_resizer").hide(),$$("diff_detail_panel").hide())}))}()}},{view:"button",value:"Reset",id:"diff_reset",autowidth:!0,hidden:!0,click:function(){$$("difftargetcombo").setValue(),$$("diffsourcecombo").setValue(),$$("diffschemalist").setValue(),$$("diffistable").setValue(!1),$$("griddiff").clearAll(),$$("differrfilter").hide(),$$("diff_config_info_lbl").setValue(),$$("diff_detail_panel").hideOverlay(),$$("diff_detail_resizer").hide(),$$("diff_detail_panel").hide(),this.hide()}},{view:"combo",placeholder:"filter",id:"differrfilter",hidden:!0,width:100,options:["all","error","dif","trg","src"],on:{onChange:function(e,t){var n=this.getValue().toLowerCase();"error"==n?$$("griddiff").filter("#diff#",!0):"dif"==n||"trg"==n||"src"==n?$$("griddiff").filter("#err#",n):($$("griddiff").eachColumn((function(e,t){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")})),$$("griddiff").filterByAll())}}}]};var p=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_compare_page",rows:[d,{cols:[{view:"datatable",id:"griddiff",select:"row",pager:l+"_pagerA",on:{onBeforeLoad:function(){webix.extend(this,webix.ProgressBar),this.showProgress()},onAfterLoad:function(){this.hideProgress(),$$("diff_reset").show(),this.count()?($$("differrfilter").show(),$$("diff_err_filter_btn").show()):($$("differrfilter").hide(),$$("diff_err_filter_btn").hide())},onItemClick:function(e){!function(e,t){var n=e.getItem(t),o=$$("diffsourcecombo").getValue(),r=$$("difftargetcombo").getValue(),i=$$("diff_detail_panel");webix.extend(i,webix.ProgressBar),i.hideOverlay(),i.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),i.disable(),webix.html.addCss(i.getNode(),"z_progress_overlay");var s=a+"/detail?source_id="+o+"&oid="+n.id+"&target_id="+r+"&schema="+n.z_schema+"&name="+n.z_name+"&ret="+n.z_return+"&prm_in="+n.z_params_in;$$("diff_all_sql_detail").setDiffValue("",""),webix.ajax(s).then((function(e){var t=e.json().data,n=t.source,o=t.target;f.parse([{id:"source",value:n},{id:"target",value:o}]),$$("diff_all_sql_detail").setDiffValue(n,o),void 0!==n&&$$("diff_source_sql_detail").setValue(n),void 0!==o&&$$("diff_target_sql_detail").setValue(o),i.hideProgress(),i.enable()})).catch((function(e){setTimeout((function(){i.hideProgress(),i.enable(),webix.message({text:"Content not found",type:"error"})}),1e3)}))}(this,e)}},columns:[{id:"z_schema",header:["Schema",{content:"textFilter"}],adjust:!0},{id:"z_name",header:["Name",{content:"textFilter"}],adjust:!0},{id:"z_type",header:["Type",{content:"textFilter"}],adjust:!0},{id:"z_return",header:["Return",{content:"textFilter"}],adjust:!0},{id:"err",header:"",adjust:!0,cssFormat:function(e,t){return"trg"==e?"z-cell-trg":"src"==e?"z-cell-src":"dif"==e?"z-cell-diff":void 0}}]},{view:"resizer",id:"diff_detail_resizer",hidden:!0},{hidden:!0,gravity:2,id:"diff_detail_panel",css:"diff_detail_panel",rows:[{view:"toolbar",elements:[{view:"icon",icon:"mdi mdi-fullscreen",autowidth:!0,tooltip:"Fullscreen mode",click:function(){var e=f.getItem("source").value,t=f.getItem("target").value,n=$$("griddiff"),o=n.getItem(n.getSelectedId()),r=o.z_type+": "+o.z_schema+"."+o.z_name+" - "+o.z_return;!function(e,t,n,o){e.ui({view:"window",position:"center",fullscreen:!0,head:{cols:[{template:t,type:"header",borderless:!0},{width:76},{},{view:"icon",icon:"wxi-close",tooltip:"Close window",click:function(){this.getParentView().getParentView().destructor()}}]},body:{view:"monaco-editor",id:"diff_all_sql_detail_full",language:"sql",readOnly:!0,diffEditor:!0},on:{onShow:function(){var e=$$("diff_all_sql_detail_full");webix.extend(e,webix.ProgressBar),e.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),e.disable(),setTimeout((function(){e.hideProgress(),e.enable(),$$("diff_all_sql_detail_full").setDiffValue(n,o)}),800)}}}).show()}(this.$scope,r,e,t)}},{view:"icon",icon:"mdi mdi-transfer-left",tooltip:"Replace to Target",autowidth:!0},{view:"icon",icon:"mdi mdi-transfer-right",tooltip:"Replace to Target",autowidth:!0}]},{cells:[{view:"monaco-editor",id:"diff_all_sql_detail",language:"sql",readOnly:!0,diffEditor:!0},{view:"monaco-editor",id:"diff_source_sql_detail",language:"sql",readOnly:!0},{view:"monaco-editor",id:"diff_target_sql_detail",language:"sql",readOnly:!0}]},{view:"tabbar",type:"bottom",multiview:!0,options:[{value:"<span class='webix_icon fas fa-film'></span><span style='padding-left: 4px'>All</span>",id:"diff_all_sql_detail"},{value:"<span class='webix_icon fas fa-film'></span><span style='padding-left: 4px'>Source</span>",id:"diff_source_sql_detail"},{value:"<span class='webix_icon fas fa-info'></span><span style='padding-left: 1px'>Target</span>",id:"diff_target_sql_detail"}],height:30,on:{onAfterTabClick:function(e){}}}]}]},{view:"toolbar",elements:[{view:"label",id:"diff_config_info_lbl",css:"diff_config_info_lbl"},{view:"button",value:"Err",id:"diff_err_filter_btn",autowidth:!0,hidden:!0,tooltip:"Filter error differences",click:function(){$$("differrfilter").setValue("error")}},{view:"pager",width:100,id:l+"_pagerA",size:2e4,template:function(e,t){return"<span style=float:right;line-height:2;padding-right:8px>Rows: "+e.count+"</span>"}}]}]}},t.prototype.ready=function(){$$("diffsourcecombo").setValue(1),$$("difftargetcombo").setValue(3),$$("diffschemalist").setValue("master"),$$("diff_swap_btn").disable(),$$("diff_compare_btn").disable()},t}(o.c);t.default=p},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(36),i=n(8),a=n(1),s=(a.c,a.a+"/setting"),u=n(37);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t={view:"button",type:"icon",icon:"mdi mdi-power",css:"zmdi_padding",tooltip:"Logout",autowidth:!0,click:function(){e.app.getService("user").logout().then((function(t){t&&e.show("/logout")}))}};return{rows:[{view:"toolbar",css:"z_query_toolbar",elements:[{view:"button",type:"icon",autowidth:!0,css:"zmdi_padding",icon:"mdi mdi-check-circle-outline",tooltip:"Apply changes"},{view:"button",type:"icon",css:"zmdi_padding",autowidth:!0,icon:"mdi mdi-backup-restore",tooltip:"Reset default"},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-account",hidden:!0,autowidth:!0,id:"z_userlist_btn",tooltip:"Users",click:function(){console.log("test"),this.$scope.ui(r.UserForm).show()}},{},{view:"label",label:"("+i.c.fullname+")",css:{"text-align":"right"}},{view:"button",type:"icon",icon:"mdi mdi-lock-reset",css:"zmdi_padding",autowidth:!0,tooltip:"Change Password",click:function(){this.$scope.ui(u.ChangePassword).show()}},t]},{view:"datatable",select:"row",columns:[{id:"m_key",header:"Key",width:200},{id:"m_val",header:"Value",width:300},{id:"note",header:"Note",fillspace:!0}],url:""+s}]}},t.prototype.ready=function(e){i.c.userLevel<2&&$$("z_userlist_btn").show()},t}(o.c);t.default=f},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(8);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return this,{view:"template",id:"idx_landing",css:"ztemplate-main",template:'\n      <div class="intro">\n        <div class="page-inner">\n          <p class="sub-title">Simple and Easy PostgresSQL Migration Dev tool</p>\n          <h1 class="title text-gradient">ZPG</h1>\n          <div class=\'go-btn\' route="/'+(0!=r.c.userId?"v":"login")+"\">Go to console <span class='right-arrow-btn'>&#8594;</span></div>\n        </div>\n      </div>\n\t\t\t",on:{onEnter:function(){document.getElementsByClassName("go-btn")[0].click()}}}},t.prototype.ready=function(){document.querySelectorAll(".ztemplate-main")[0].click()},t}(o.c);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"<div style='background:white;padding-top:0;height:99%; display: flex;justify-content: center;align-items: center; flex-direction: column;margin-top:1px; margin-bottom:1px'>\n        <div>Select left list generator</div>\n        <div style='font-size: 20px' class='mdi mdi-arrow-left'></div>\n      </div>"}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(42);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var i=function(e){function t(){return o(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"GeneratorOthers"}},t}(n(0).c);t.default=i},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(28);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=n(4),a=n(13);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.config=function(){return{view:"template",css:"ztemplate-main",template:r.h?'\n      <div class="ocean">\n        <div class="wave"></div>\n        <div class="wave"></div>\n        <div class="wave"></div>\n      </div>\n      ':""}},t.prototype.init=function(){this.ui(f).showWindow()},t}(o.c);t.default=l;var f=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return c(t,e),t.prototype.config=function(){var e,t=this;return(e={view:"window",position:"center",move:!0,head:this.app.config.name}).position="center",e.css="zwin-transparent",e.body={view:"form",scroll:!1,id:"loginForm",width:300,elements:[{cells:[{id:"z_login_segment",rows:[{view:"text",label:"Username",name:"username",id:"loginform_username",on:{onEnter:function(e){""!=this.getValue()&&$$("loginform_password").focus()}}},{height:7},{view:"text",type:"password",id:"loginform_password",label:"Password",name:"password",attributes:{autocomplete:"new-password"},on:{onEnter:function(e){""!=this.getValue()&&$$("loginform_login").focus()}}},{height:10},{margin:5,cols:[{view:"button",id:"loginform_login",label:"Login",type:"form",click:function(){return t.doLogin()}}]},{height:10},{template:"<div class='z_register_link'>Register</div>",height:32,hidden:!0,id:"z_register_btnlink",onClick:{z_register_link:function(e,t){$$("z_register_segment").show(),setTimeout((function(){return $$("registerform_username").focus()}),1e3)}}}]},{id:"z_register_segment",rows:[{view:"text",label:"Username",name:"username_reg",id:"registerform_username",on:{onEnter:function(e){""!=this.getValue()&&$$("registerform_password").focus()}}},{height:7},{view:"text",type:"password",id:"registerform_password",label:"Password",name:"password_reg",attributes:{autocomplete:"new-password"},on:{onEnter:function(e){""!=this.getValue()&&$$("registerform_login").focus()}}},{height:7},{view:"text",label:"Fullname",name:"fullname",id:"registerform_fullname",on:{onEnter:function(e){this.getValue()}}},{height:7},{view:"text",label:"Email",name:"email",id:"registerform_email",on:{onEnter:function(e){this.getValue()}}},{height:10},{margin:5,cols:[{view:"button",id:"registerform_login",label:"Register",type:"form",click:function(){return t.doRegister()}}]},{height:10},{template:"<div class='z_login_link'>Login</div>",height:32,onClick:{z_login_link:function(e,t){$$("z_login_segment").show(),setTimeout((function(){return $$("loginform_username").focus()}),1e3)}}}]}]}]},e.on={onShow:function(){$$("loginform_username").focus();var e="true"===i.b.meta.find((function(e){return"allow_register"==e.m_key})).m_val;console.log("isRegister",e),e&&$$("z_register_btnlink").show()}},e},t.prototype.showWindow=function(){this.getRoot().show()},t.prototype.init=function(e){webix.extend($$("loginForm"),webix.ProgressBar)},t.prototype.ready=function(){console.log("state.meta",i.b.meta)},t.prototype.doLogin=function(){var e=this.app.getService("user"),t=this.$$("loginForm");if(t.validate()){t.disable(),t.showProgress();var n=t.getValues();e.login(n.username,n.password).catch((function(e){webix.message({type:"error",text:"Wrong User or password"}),webix.html.removeCss(t.$view,"invalid_login"),t.elements.password.focus(),webix.delay((function(){webix.html.addCss(t.$view,"invalid_login")})),t.hideProgress(),t.enable(),t.focus()}))}},t.prototype.doRegister=function(){var e=this.$$("loginForm");if(e.validate()){var t=e.getValues();t.username=t.username_reg,t.password=t.password_reg,delete t.username_reg,delete t.password_reg,""==t.username&&""==t.password&&""==t.fullname&&""==t.email?webix.message({type:"error",text:"All data required"}):(e.disable(),e.showProgress(),Object(a.a)(t).then((function(t){console.log("r",t),e.hideProgress(),e.enable(),webix.message({text:"Register success, please login",type:"success"}),e.clear(),$$("z_login_segment").show(),$$("loginform_username").focus()})).catch((function(t){var n=JSON.parse(t.response);webix.message({text:n.message,type:"error"}),e.hideProgress(),e.enable(),e.focus()})))}},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(4);n(11);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",css:"app_layout",cols:[{rows:[{view:"toolbar",css:"zheader",height:34,elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",css:"app_button",click:function(){$$("app:sidebar").toggle()}},{type:"header",borderless:!0,template:'<a route="/index">'+this.app.config.name+"</a>",css:"webix_header app_header"}]},{view:"sidebar",id:"app:sidebar",data:r.a,width:180,on:{onAfterSelect:function(e){}}}]},{css:"z_layout_p",padding:{left:4},rows:[{$subview:!0}]}]}},t.prototype.init=function(){this.use(o.d.Menu,"app:sidebar"),webix.UIManager.addHotKey("Ctrl+2",(function(){return console.log("Ctrl+Enter for details"),!1}),$$("p_base"))},t.prototype.urlChange=function(e,t){console.log("url",t),console.log("this.app",this.app),this.app.on("app:guard",(function(e,t,n){}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(26);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(16);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[r.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(1),i=(n(7),n(4)),a=n(11),s=n(44);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return u(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTab=function(e){$$("tabs").addView(e)},t.prototype.config=function(){var e={type:"header",borderless:!0,template:"<span route=\"/index\" class='z_link_btn'>"+this.app.config.name+"</span>",css:"webix_header app_header"},t=(i.a,{type:"clean",css:"app_layout",cols:[{rows:[{view:"toolbar",height:34,css:"zheader",elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",css:"app_button",click:function(){$$("app:sidebar").toggle()}},e]},{view:"sidebar",id:"app:sidebar",data:i.a,width:180,on:{onItemClick:function(e,t,n){var o=this.getItem(e);if(i.b.viewScope=this.$scope,$$(o.id))$$("tabs").getTabbar().setValue(o.id);else{var r=a.routes.find((function(e){return e.id===o.id}));this.$scope.addTab({header:o.value,css:"z_tabview_item",id:o.id,close:!0,width:150,body:r}),$$("tabs").getTabbar().setValue(o.id)}}}}]},{padding:{left:4},id:"tabs",view:"tabview",css:"z_app_tabview",tooltip:!0,animate:!1,cells:[{header:"Welcome",id:"query_welcome",css:"z_tabview_item",width:150,body:s.default}],tabbar:{tooltip:!0,on:{onBeforeTabClose:function(e,t){if(e.includes("query")){var n=this.getValue().split("_").pop(),o="";i=n,o=isNaN(i)||(0|(a=parseFloat(i)))!==a?"z_query_sql_editor":this.getValue()+"_sql_editor";var r=$$(o);void 0!==r&&r.getValue().length>0?webix.confirm("Are you sure?").then((function(t){t&&$$("tabs").removeView(e)})):$$("tabs").removeView(e)}else $$("tabs").removeView(e);var i,a;return!1}}}}]});return webix.ajax(r.a+"/app").then((function(e){var t=e.json();i.b.appProfile=JSON.parse(t.data.find((function(e){return 5==e.type})).content)})),t},t.prototype.ready=function(){},t}(o.c);t.default=l},function(e,t){},function(e,t,n){"use strict";n.r(t);var o=n(0),r=new webix.DataCollection({});function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return r.sort("proname","asc"),{view:"datatable",id:"griddata",columns:[{id:"specific_schema",header:"Schema",adjust:!0},{id:"proname",header:"Table Func",adjust:!0},{id:"type_udt_name",header:"Func Return",adjust:!0},{id:"params_in",header:"Params In",adjust:!0},{id:"params_out",header:"Params Out",adjust:!0},{id:"params_length",header:"Params InOut",adjust:!0},{id:"content_length",header:"Func Length",adjust:!0},{id:"cols_length",header:"Cols Length",adjust:!0},{id:"dtypes_length",header:"Cols Type Length",adjust:!0},{id:"cols_count",header:"Tbl Cols Count",adjust:!0},{id:"t_type",header:"Type",adjust:!0}],data:r}},t.prototype.init=function(e){this.$$("griddata").markSorting("proname","asc")},t}(o.c);t.default=s},function(e,t){e.exports.userId=1},function(e,t,n){e.exports=n(64)},function(e,t,n){},function(e,t,n){var o={"./":48,"./compare":19,"./compare/":19,"./compare/ComparePage":46,"./compare/ComparePage.js":46,"./compare/index":19,"./compare/index.js":19,"./copydata":20,"./copydata/":20,"./copydata/CopyDataPage":34,"./copydata/CopyDataPage.js":34,"./copydata/index":20,"./copydata/index.js":20,"./data":59,"./data.js":59,"./database":21,"./database/":21,"./database/DatabasePage":25,"./database/DatabasePage.js":25,"./database/DatabaseServer":40,"./database/DatabaseServer.js":40,"./database/index":21,"./database/index.js":21,"./dbconfig":29,"./dbconfig/":29,"./dbconfig/DbConfigForm":41,"./dbconfig/DbConfigForm.js":41,"./dbconfig/DbConfigPage":17,"./dbconfig/DbConfigPage.js":17,"./dbconfig/index":29,"./dbconfig/index.js":29,"./generator":23,"./generator/":23,"./generator/GeneratorInsertQuery":42,"./generator/GeneratorInsertQuery.js":42,"./generator/GeneratorOutParams":28,"./generator/GeneratorOutParams.js":28,"./generator/GeneratorPage":35,"./generator/GeneratorPage.js":35,"./generator/default":49,"./generator/default.js":49,"./generator/index":23,"./generator/index.js":23,"./generator/insertquery":50,"./generator/insertquery.js":50,"./generator/others":51,"./generator/others.js":51,"./generator/outparams":52,"./generator/outparams.js":52,"./index":48,"./index.js":48,"./login":53,"./login.js":53,"./migration":30,"./migration/":30,"./migration/MigrationPage":43,"./migration/MigrationPage.js":43,"./migration/index":30,"./migration/index.js":30,"./p":54,"./p.js":54,"./query":31,"./query/":31,"./query/QueryDatabase":38,"./query/QueryDatabase.js":38,"./query/QueryHelp":39,"./query/QueryHelp.js":39,"./query/QueryPage":14,"./query/QueryPage.js":14,"./query/index":31,"./query/index.js":31,"./routes":11,"./routes.js":11,"./setting":24,"./setting/":24,"./setting/ChangePassword":37,"./setting/ChangePassword.js":37,"./setting/SettingPage":47,"./setting/SettingPage.js":47,"./setting/UserForm":36,"./setting/UserForm.js":36,"./setting/index":24,"./setting/index.js":24,"./start":44,"./start.js":44,"./task":22,"./task/":22,"./task/TaskForm":26,"./task/TaskForm.js":26,"./task/TaskPage":16,"./task/TaskPage.js":16,"./task/form":55,"./task/form.js":55,"./task/index":22,"./task/index.js":22,"./task/page":56,"./task/page.js":56,"./user":32,"./user/":32,"./user/UserPage":45,"./user/UserPage.js":45,"./user/index":32,"./user/index.js":32,"./v":57,"./v.js":57,"./viewdata":33,"./viewdata/":33,"./viewdata/ViewDataPage":27,"./viewdata/ViewDataPage.js":27,"./viewdata/index":33,"./viewdata/index.js":33};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=63},function(e){e.exports=JSON.parse('{"locale":"en","long":{"year":{"previous":"last year","current":"this year","next":"next year","past":{"one":"{0} year ago","other":"{0} years ago"},"future":{"one":"in {0} year","other":"in {0} years"}},"quarter":{"previous":"last quarter","current":"this quarter","next":"next quarter","past":{"one":"{0} quarter ago","other":"{0} quarters ago"},"future":{"one":"in {0} quarter","other":"in {0} quarters"}},"month":{"previous":"last month","current":"this month","next":"next month","past":{"one":"{0} month ago","other":"{0} months ago"},"future":{"one":"in {0} month","other":"in {0} months"}},"week":{"previous":"last week","current":"this week","next":"next week","past":{"one":"{0} week ago","other":"{0} weeks ago"},"future":{"one":"in {0} week","other":"in {0} weeks"}},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":{"one":"{0} hour ago","other":"{0} hours ago"},"future":{"one":"in {0} hour","other":"in {0} hours"}},"minute":{"current":"this minute","past":{"one":"{0} minute ago","other":"{0} minutes ago"},"future":{"one":"in {0} minute","other":"in {0} minutes"}},"second":{"current":"now","past":{"one":"{0} second ago","other":"{0} seconds ago"},"future":{"one":"in {0} second","other":"in {0} seconds"}}},"short":{"year":{"previous":"last yr.","current":"this yr.","next":"next yr.","past":"{0} yr. ago","future":"in {0} yr."},"quarter":{"previous":"last qtr.","current":"this qtr.","next":"next qtr.","past":{"one":"{0} qtr. ago","other":"{0} qtrs. ago"},"future":{"one":"in {0} qtr.","other":"in {0} qtrs."}},"month":{"previous":"last mo.","current":"this mo.","next":"next mo.","past":"{0} mo. ago","future":"in {0} mo."},"week":{"previous":"last wk.","current":"this wk.","next":"next wk.","past":"{0} wk. ago","future":"in {0} wk."},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":"{0} hr. ago","future":"in {0} hr."},"minute":{"current":"this minute","past":"{0} min. ago","future":"in {0} min."},"second":{"current":"now","past":"{0} sec. ago","future":"in {0} sec."}},"narrow":{"year":{"previous":"last yr.","current":"this yr.","next":"next yr.","past":"{0} yr. ago","future":"in {0} yr."},"quarter":{"previous":"last qtr.","current":"this qtr.","next":"next qtr.","past":{"one":"{0} qtr. ago","other":"{0} qtrs. ago"},"future":{"one":"in {0} qtr.","other":"in {0} qtrs."}},"month":{"previous":"last mo.","current":"this mo.","next":"next mo.","past":"{0} mo. ago","future":"in {0} mo."},"week":{"previous":"last wk.","current":"this wk.","next":"next wk.","past":"{0} wk. ago","future":"in {0} wk."},"day":{"previous":"yesterday","current":"today","next":"tomorrow","past":{"one":"{0} day ago","other":"{0} days ago"},"future":{"one":"in {0} day","other":"in {0} days"}},"hour":{"current":"this hour","past":"{0} hr. ago","future":"in {0} hr."},"minute":{"current":"this minute","past":"{0} min. ago","future":"in {0} min."},"second":{"current":"now","past":"{0} sec. ago","future":"in {0} sec."}},"now":{"now":{"current":"now","future":"in a moment","past":"just now"}},"mini":{"year":"{0}yr","month":"{0}mo","week":"{0}wk","day":"{0}d","hour":"{0}h","minute":"{0}m","second":"{0}s","now":"now"},"short-time":{"year":"{0} yr.","month":"{0} mo.","week":"{0} wk.","day":{"one":"{0} day","other":"{0} days"},"hour":"{0} hr.","minute":"{0} min.","second":"{0} sec."},"long-time":{"year":{"one":"{0} year","other":"{0} years"},"month":{"one":"{0} month","other":"{0} months"},"week":{"one":"{0} week","other":"{0} weeks"},"day":{"one":"{0} day","other":"{0} days"},"hour":{"one":"{0} hour","other":"{0} hours"},"minute":{"one":"{0} minute","other":"{0} minutes"},"second":{"one":"{0} second","other":"{0} seconds"}}}')},function(e,t,n){var o={"./en":58,"./en.js":58};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=65},function(e,t,n){"use strict";n.r(t);n(62);var o=n(0),r=n(1),i=n(3),a=n(8);var s={status:function(){return webix.ajax().headers(Object(i.a)()).post(r.a+"/ping",{t:Date.now()}).then((function(e){return e.json().status}))},login:function(e,t){return webix.ajax().headers(Object(i.a)()).post(r.a+"/auth/login",{username:e,password:t}).then((function(e){var t=e.json();if(t){var n=t.token;Object(a.b)(n),webix.storage.cookie.put(r.d,n)}return t}))},logout:function(){return new Promise((function(e,t){webix.storage.cookie.remove(r.d),e(!0)}))}},u=n(4),c=n(5),l=n(7),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var d=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i={id:"webix-jet-app",version:"1.1.0",router:o.a,debug:!1,start:"/index",name:r.b},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,f({},i,n)));return a.use(o.d.User,{model:s,afterLogin:"/v",ping:r.i,public:function(e){return e.indexOf("/index")>-1}}),webix.ajax(r.a+"/meta").then((function(e){console.log("ra",e.json()),u.b.meta=e.json()})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.b);t.default=d;webix.ready((function(){var e=new d,t=void 0;e.on("app:guard",(function(e,n,o){u.b.navUrl=o,t=o,"/p"==e&&(o.redirect="/p/start")}));var n=!1;window.onbeforeunload=function(e){e=e||window.event;for(var t=0,n=0;n<c.a.countPage+1;n++){if(n>0){if($$("z_query_"+n+"_sql_editor"))t+=$$("z_query_"+n+"_sql_editor").getValue().length}else if($$("z_query_sql_editor"))t+=$$("z_query_sql_editor").getValue().length}if(t>0)return e&&(e.returnValue="Sure?"),"Sure?"},window.history&&window.history.pushState&&(console.log("asdfasdf"),window.addEventListener("popstate",(function(e){console.log("location: "+document.location+", state: "+JSON.stringify(e.state)),history.pushState(null,null,window.location.href)}))),window.history&&history.pushState&&addEventListener("load",(function(){history.pushState(null,null,null),addEventListener("popstate",(function(){confirm("Would you like to save this draft?")?history.pushState(null,null,null):history.back()}))})),webix.attachEvent("onBeforeAjax",(function(o,s,u,c,f,d,p){p.then((function(o){var i=o.json().status,s=t.url[0].page;null===i&&"login"!==s&&(webix.storage.cookie.remove(r.d),a.c.token="",n||(Object(l.f)(e,!0),n=!0))})),p.catch((function(t){401!=t.status||/\/auth\/login.*|\/v1$/.test(c.responseURL)||n||(Object(l.f)(e,!0),n=!0)})),/\/auth\/login.*|\/v1$/.test(c.responseURL)&&(webix.storage.cookie.remove(r.d),a.c.token=""),webix.storage.cookie.get(r.d)&&Object(i.b)(f)})),e.render()}))}]);