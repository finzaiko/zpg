!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/codebase/",n(n.s=79)}([function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"v",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"r",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"l",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"i",(function(){return p})),n.d(t,"p",(function(){return h})),n.d(t,"n",(function(){return b})),n.d(t,"q",(function(){return _})),n.d(t,"o",(function(){return m})),n.d(t,"m",(function(){return w})),n.d(t,"h",(function(){return y})),n.d(t,"u",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return $})),n.d(t,"t",(function(){return x})),n.d(t,"s",(function(){return O}));var o="ZPG",i="1.0.13-dev",r="z_",a=(location.port,"desktop"),s=(location.port,"http://localhost:9000/api/v1"),c="http://localhost:9000",l="zpgtool",u="ldbserver",d="ldbconn",f="lvdbconn",p="ldtype",h="lstype",b="lsmnmap",_="lssdbar",m="lsmconn",w="lshistory",y="ldjustcols",g="sthistory",v="dropreplace",$="confirmexec",x=9e5,O=!0},function(e,t,n){"use strict";n.d(t,"d",(function(){return M})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return w}));var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function e(){a(this,e)},c=function(){function e(t){a(this,e),this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},e.prototype.setParam=function(e,t,n){if(this._data[e]!==t&&(this._data[e]=t,this._segment.update(e,t,0),n))return this.show(null)},e.prototype.getParam=function(e,t){var n=this._data[e];if(void 0!==n||!t)return n;var o=this.getParentView();return o?o.getParam(e,t):void 0},e.prototype.getUrl=function(){return this._segment.suburl()},e.prototype.getUrlString=function(){return this._segment.toString()},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(n){return(n.config.id===e||n.config.localId===e)&&n.$scope===t.$scope}),"self")}return e},e.prototype.on=function(e,t,n){var o=e.attachEvent(t,n);return this._events.push({obj:e,id:o}),o},e.prototype.contains=function(e){for(var t in this._subs){var n=this._subs[t].view;if(n===e||n.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},e.prototype.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:"_top"===e?(this._subs[e]={url:"",id:null,popup:!0},this.getSubViewInfo(e)):this._parent?this._parent.getSubViewInfo(e):null},e.prototype._detachEvents=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id)},e.prototype._destroySubs=function(){for(var e in this._subs){var t=this._subs[e].view;t&&t.destructor()}this._subs={}},e.prototype._init_url_data=function(){var e=this._segment.current();this._data={},this.webix.extend(this._data,e.params,!0)},e.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var e in this._subs){var t=this._subs[e];if(!t.branch&&t.view&&"_top"!==e){var n=t.view._getDefaultSub();if(n)return n}}},e.prototype._routed_view=function(){var e=this.getParentView();if(!e)return!0;var t=e._getDefaultSub();return!(!t&&t!==this)&&e._routed_view()},e}();function l(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),n=[],o=0;o<t.length;o++){var i=t[o],r={},a=i.indexOf(":");if(-1===a&&(a=i.indexOf("?")),-1!==a){var s=i.substr(a+1).split(/[\:\?\&]/g),c=Array.isArray(s),l=0;for(s=c?s:s[Symbol.iterator]();;){var u;if(c){if(l>=s.length)break;u=s[l++]}else{if((l=s.next()).done)break;u=l.value}var d=u.split("=");r[d[0]]=decodeURIComponent(d[1])}}n[o]={page:a>-1?i.substr(0,a):i,params:r,isNew:!0}}return n}function u(e){var t=[],n=e,o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var a=r;t.push("/"+a.page);var s=d(a.params);s&&t.push("?"+s)}return t.join("")}function d(e){var t=[];for(var n in e)t.length&&t.push("&"),t.push(n+"="+encodeURIComponent(e[n]));return t.join("")}var f=function(){function e(t,n){a(this,e),this._next=1,this.route="string"==typeof t?{url:l(t),path:t}:t,this.index=n}return e.prototype.current=function(){return this.route.url[this.index]},e.prototype.next=function(){return this.route.url[this.index+this._next]},e.prototype.suburl=function(){return this.route.url.slice(this.index)},e.prototype.shift=function(){return new e(this.route,this.index+this._next)},e.prototype.refresh=function(){for(var e=this.route.url,t=this.index+1;t<e.length;t++)e[t].isNew=!0},e.prototype.toString=function(){var e=u(this.suburl());return e?e.substr(1):""},e.prototype._join=function(e,t){var n=this.route.url;if(null===e)return n;var o=this.route.url;if(n=o.slice(0,this.index+(t?this._next:0)),e){n=n.concat(l(e));for(var i=0;i<n.length;i++)o[i]&&(n[i].view=o[i].view),o[i]&&n[i].page===o[i].page&&(n[i].isNew=!1)}return n},e.prototype.append=function(e){var t=this._join(e,!0);return this.route.path=u(t),this.route.url=t,this.route.path},e.prototype.show=function(e,t,n){var o=this,i=this._join(e,n);return new Promise((function(e,n){var r=u(i),a={url:i,redirect:r,confirm:Promise.resolve()},c=t?t.app:null;if(c&&!c.callEvent("app:guard",[a.redirect,t,a]))return void n(new s);a.confirm.catch((function(e){return n(e)})).then((function(){if(null!==a.redirect){if(a.redirect!==r)return c.show(a.redirect),void n(new s);o.route.path=r,o.route.url=i,e()}else n(new s)}))}))},e.prototype.size=function(e){this._next=e},e.prototype.split=function(){var t={url:this.route.url.slice(this.index+1),path:""};return t.url.length&&(t.path=u(t.url)),new e(t,0)},e.prototype.update=function(e,t,n){var o=this.route.url[this.index+(n||0)];if(!o)return this.route.url.push({page:"",params:{}}),this.update(e,t,n);""===e?o.page=t:o.params[e]=t,this.route.path=u(this.route.url)},e}(),p=function(e){function t(n,o){a(this,t);var r=i(this,e.call(this,n.webix));return r.app=n,r._children=[],r}return r(t,e),t.prototype.ui=function(e,t){var n=(t=t||{}).container||e.container,i=this.app.createView(e);return this._children.push(i),i.render(n,this._segment,this),"object"!==(void 0===e?"undefined":o(e))||e instanceof c?i:i.getRoot()},t.prototype.show=function(e,t){if(t=t||{},"object"===(void 0===e?"undefined":o(e))){for(var n in e)this.setParam(n,e[n]);e=null}else{if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("./")&&(e=e.substr(2)),0===e.indexOf("../")){var i=this.getParentView();return i?i.show(e.substr(3),t):this.app.show("/"+e.substr(3))}var r=this.getSubViewInfo(t.target);if(r){if(r.parent!==this)return r.parent.show(e,t);if(t.target&&"default"!==t.target)return this._renderFrameLock(t.target,r.subview,e)}else if(e)return this.app.show("/"+e)}return this._show(this._segment,e,this)},t.prototype._show=function(e,t,n){var o=this;return e.show(t,n,!0).then((function(){return o._init_url_data(),o._urlChange()})).then((function(){e.route.linkRouter&&(o.app.getRouter().set(e.route.path,{silent:!0}),o.app.callEvent("app:route",[e.route.path]))}))},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype.refresh=function(){this.getUrl();return this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},t.prototype.render=function(e,t,n){var o=this;"string"==typeof t&&(t=new f(t,0)),this._segment=t,this._parent=n,this._init_url_data();var i="string"==typeof(e=e||document.body)?this.webix.toNode(e):e;return this._container!==i?(this._container=i,this._render(t)):this._urlChange().then((function(){return o.getRoot()}))},t.prototype._render=function(e){var t=this,n=this.config();return n.then?n.then((function(n){return t._render_final(n,e)})):this._render_final(n,e)},t.prototype._render_final=function(e,t){var n=this,o=null,i=null,r=!1;if(this._container.tagName?i=this._container:(o=this._container).popup?(i=document.body,r=!0):i=this.webix.$$(o.id),!this.app||!i)return Promise.reject(null);var a=void 0,s=this._segment.current(),c={ui:{}};this.app.copyConfig(e,c.ui,this._subs),this.app.callEvent("app:render",[this,t,c]),c.ui.$scope=this,!o&&s.isNew&&s.view&&s.view.destructor();try{if(o&&!r){var l=i,u=l.getParentView();u&&"multiview"===u.name&&!c.ui.id&&(c.ui.id=l.config.id)}this._root=this.app.webix.ui(c.ui,i);var d=this._root;r&&d.setPosition&&!d.isVisible()&&d.show(),o&&(o.view&&o.view!==this&&o.view!==this.app&&o.view.destructor(),o.id=this._root.config.id,this.getParentView()||!this.app.app?o.view=this:o.view=this.app),s.isNew&&(s.view=this,s.isNew=!1),a=Promise.resolve(this._init(this._root,t)).then((function(){return n._urlChange().then((function(){return n._initUrl=null,n.ready(n._root,t.suburl())}))}))}catch(e){a=Promise.reject(e)}return a.catch((function(e){return n._initError(n,e)}))},t.prototype._init=function(e,t){return this.init(e,t.suburl())},t.prototype._urlChange=function(){var e=this;this.app.callEvent("app:urlchange",[this,this._segment]);var t=[];for(var n in this._subs){var o=this._subs[n],i=this._renderFrameLock(n,o,null);i&&t.push(i)}return Promise.all(t).then((function(){return e.urlChange(e._root,e._segment.suburl())}))},t.prototype._renderFrameLock=function(e,t,n){if(!t.lock){var o=this._renderFrame(e,t,n);o&&(t.lock=o.then((function(){return t.lock=null}),(function(){return t.lock=null})))}return t.lock},t.prototype._renderFrame=function(e,t,n){var o=this;if("default"===e){if(this._segment.next())return this._createSubView(t,this._segment.shift());t.view&&t.popup&&(t.view.destructor(),t.view=null)}if(null!==n&&(t.url=n),t.route){if(null!==n)return t.route.show(n,t.view).then((function(){return o._createSubView(t,t.route)}));if(t.branch)return}var i=t.view;if(!i&&t.url){if("string"==typeof t.url)return t.route=new f(t.url,0),this._createSubView(t,t.route);"function"!=typeof t.url||i instanceof t.url||(i=new t.url(this.app,"")),i||(i=t.url)}if(i)return i.render(t,t.route||this._segment,this)},t.prototype._initError=function(e,t){return this.app&&this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var n=this;return this.app.createFromURL(t.current()).then((function(o){return o.render(e,t,n)}))},t.prototype._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(c),h=function(e){function t(n,o){a(this,t);var r=i(this,e.call(this,n,o));return r._ui=o.ui,r}return r(t,e),t.prototype.config=function(){return this._ui},t}(p),b=function(){function e(t,n,o){a(this,e),this.path="",this.app=o}return e.prototype.set=function(e,t){this.path=e;var n=this.app;n.app.getRouter().set(n._segment.append(this.path),{silent:!0})},e.prototype.get=function(){return this.path},e}(),_=!0,m=function(e){function t(n){a(this,t);var o=(n||{}).webix||window.webix,r=i(this,e.call(this,o));return r.config=r.webix.extend({name:"App",version:"1.0",start:"/home"},n,!0),r.app=r.config.app,r.ready=Promise.resolve(),r._services={},r.webix.extend(r,r.webix.EventSystem),r}return r(t,e),t.prototype.getUrl=function(){return this._subSegment.suburl()},t.prototype.getUrlString=function(){return this._subSegment.toString()},t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.destructor=function(){this.getSubView().destructor(),e.prototype.destructor.call(this)},t.prototype.copyConfig=function(e,t,n){if((e instanceof c||"function"==typeof e&&e.prototype instanceof c)&&(e={$subview:e}),void 0!==e.$subview)return this.addSubView(e,t,n);for(var i in t=t||(e instanceof Array?[]:{}),e){var r=e[i];if("function"==typeof r&&r.prototype instanceof c&&(r={$subview:r}),!r||"object"!==(void 0===r?"undefined":o(r))||r instanceof this.webix.DataCollection||r instanceof RegExp||r instanceof Map)t[i]=r;else if(r instanceof Date)t[i]=new Date(r);else{var a=this.copyConfig(r,r instanceof Array?[]:{},n);null!==a&&(t[i]=a)}}return t},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e,t){if(e&&(t=t||e.target||e.srcElement)&&t.getAttribute){var n=t.getAttribute("trigger");if(n)return this._forView(t,(function(e){return e.app.trigger(n)})),e.cancelBubble=!0,e.preventDefault();var o=t.getAttribute("route");if(o)return this._forView(t,(function(e){return e.show(o)})),e.cancelBubble=!0,e.preventDefault()}var i=t.parentNode;i&&this.clickHandler(e,i)},t.prototype.getRoot=function(){return this.getSubView().getRoot()},t.prototype.refresh=function(){var e=this;return this._subSegment?this.getSubView().refresh().then((function(t){return e.callEvent("app:route",[e.getUrl()]),t})):Promise.resolve(null)},t.prototype.loadView=function(e){var t=this,n=this.config.views,o=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{n&&"string"==typeof(o="function"==typeof n?n(e):n[e])&&(e=o,o=null),o||(o="_blank"===e?{}:this._loadViewDynamic(e))}catch(t){o=this._loadError(e,t)}return o.then||(o=Promise.resolve(o)),o=o.then((function(e){return e.__esModule?e.default:e})).catch((function(n){return t._loadError(e,n)}))},t.prototype._forView=function(e,t){var n=this.webix.$$(e);n&&t(n.$scope)},t.prototype._loadViewDynamic=function(e){return null},t.prototype.createFromURL=function(e){var t=this;return e.isNew||!e.view?this.loadView(e.page).then((function(e){return t.createView(e,name)})):Promise.resolve(e.view)},t.prototype.createView=function(e,n){if("function"==typeof e){if(e.prototype instanceof t)return new e({app:this,name:n,router:b});if(e.prototype instanceof c)return new e(this,{name:n});e=e(this)}return e instanceof c?e:new h(this,{name:n,ui:e})},t.prototype.show=function(e){return this.render(this._container,e||this.config.start)},t.prototype.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this.apply(e,n)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind((function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];this.apply(e,n)}),this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var n=0;n<t.length;n++)if(console.error(t[n]),t[n]instanceof Error){var o=t[n].message;0===o.indexOf("Module build failed")?(o=o.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+o+"</pre>"):(o+="<br><br>Check console for more details",this.webix.message({type:"error",text:o,expire:-1}))}},t.prototype.render=function(e,t,n){var o=this;this._container="string"==typeof e?this.webix.toNode(e):e||document.body;var i=null;!this.$router?(_&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(e){return o.clickHandler(e)})),_=!1),"string"==typeof t&&(t=new f(t,0)),this._subSegment=this._first_start(t),this._subSegment.route.linkRouter=!0):i="string"==typeof t?t:this.app?t.split().route.path||this.config.start:t.toString();var r=this.getSubView(),a=this._subSegment,s=a.show(i,r).then((function(){return o.createFromURL(a.current())})).then((function(t){return t.render(e,a)})).then((function(e){return o.$router.set(a.route.path,{silent:!0}),o.callEvent("app:route",[o.getUrl()]),e}));return this.ready=this.ready.then((function(){return s})),s},t.prototype.getSubView=function(){if(this._subSegment){var e=this._subSegment.current().view;if(e)return e}return new p(this,{})},t.prototype._first_start=function(e){var t=this;this._segment=e;if(this.$router=new this.config.router((function(e){return setTimeout((function(){t.show(e).catch((function(e){if(!(e instanceof s))throw e}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var n=this._container;this.webix.html.addCss(n,"webixappstart"),setTimeout((function(){t.webix.html.removeCss(n,"webixappstart"),t.webix.html.addCss(n,"webixapp")}),10)}if(e){if(this.app){var o=e,i=e.current().view;e.current().view=this,e.next()?(e.refresh(),e=e.split()):e=new f(this.config.start,0),o.current().view=i||this}}else{var r=this.$router.get();r||(r=this.config.start,this.$router.set(r,{silent:!0})),e=new f(r,0)}return e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,n){var o=!0!==e.$subview?e.$subview:null,i=e.name||(o?this.webix.uid():"default");return t.id=e.id||"s"+this.webix.uid(),(n[i]={id:t.id,url:o,branch:e.branch,popup:e.popup}).popup?null:t},t}(c),w=function(){function e(t,n){var o=this;a(this,e),this.config=n||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return o.cb(o.get())}}return e.prototype.set=function(e,t){var n=this;if(this.config.routes){var o=e.split("?",2);for(var i in this.config.routes)if(this.config.routes[i]===o[0]){e=i+(o.length>1?"?"+o[1]:"");break}}this.get()!==e&&window.history.pushState(null,null,this.prefix+this.sufix+e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){var e=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(e="/"!==e&&"#"!==e?e:"",this.config.routes){var t=e.split("?",2),n=this.config.routes[t[0]];n&&(e=n+(t.length>1?"?"+t[1]:""))}return e},e.prototype._detectPrefix=function(){var e=this.config.routerPrefix;this.sufix="#"+(void 0===e?"!":e),this.prefix=document.location.href.split("#",2)[0]},e.prototype._getRaw=function(){return document.location.href},e}(),y=!1;function g(e){if(!y&&e){y=!0;var t=window;t.Promise||(t.Promise=e.promise);var n=e.version.split(".");10*n[0]+1*n[1]<53&&(e.ui.freeze=function(t){var n=t();return n&&n.then?n.then((function(t){return e.ui.$freeze=!1,e.ui.resize(),t})):(e.ui.$freeze=!1,e.ui.resize()),n});var i=e.ui.baselayout.prototype.addView,r=e.ui.baselayout.prototype.removeView,a={addView:function(e,t){var n=this;if(!this.$scope||!this.$scope.webixJet||e.queryView)return i.apply(this,arguments);var r=function(){var o=n.$scope,r={};e=o.app.copyConfig(e,{},r),i.apply(n,[e,t]);var a=function(e){o._renderFrame(e,r[e],null).then((function(){o._subs[e]=r[e]}))};for(var s in r)a(s);return{v:e.id}}();return"object"===(void 0===r?"undefined":o(r))?r.v:void 0},removeView:function(){if(r.apply(this,arguments),this.$scope&&this.$scope.webixJet){var t=this.$scope._subs;for(var n in t){var o=t[n];e.$$(o.id)||(o.view.destructor(),delete t[n])}}}};e.extend(e.ui.layout.prototype,a,!0),e.extend(e.ui.baselayout.prototype,a,!0),e.protoUI({name:"jetapp",$init:function(t){this.$app=new this.app(t);var n=e.uid().toString();for(var o in t.body={id:n},this.$ready.push((function(){this.$app.render({id:n})})),this.$app){var i=this.$app[o];"function"!=typeof i||this[o]||(this[o]=i.bind(this.$app))}}},e.ui.proxy)}}var v=function(e){function t(n){a(this,t),n.router=n.router||w;var o=i(this,e.call(this,n));return g(o.webix),o}return r(t,e),t.prototype._loadViewDynamic=function(e){return e=e.replace(/\./g,"/"),n(75)("./"+e)},t}(m);(function(){function e(t,n,o){a(this,e),this.storage=n.storage||o.webix.storage.session,this.name=n.storeName||n.id+":route",this.cb=t}e.prototype.set=function(e,t){var n=this;this.storage.put(this.name,e),t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.storage.get(this.name)}})(),function(e){function t(){return a(this,t),i(this,e.apply(this,arguments))}r(t,e),t.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},t.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(w),function(){function e(t,n){a(this,e),this.path="",this.cb=t}e.prototype.set=function(e,t){var n=this;this.path=e,t&&t.silent||setTimeout((function(){return n.cb(e)}),1)},e.prototype.get=function(){return this.path}}();function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function x(e,t,n){for(var o in e)$(e,o)&&t.call(n||e,e[o],o,e)}function O(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var j=String.prototype.replace,k=String.prototype.split,S=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},P={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:S,chinese:function(){return 0},croatian:S,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:S,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},z={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function C(e){var t,n=(t={},x(z,(function(e,n){x(e,(function(e){t[e]=n}))})),t);return n[e]||n[k.call(e,/-/,1)[0]]||n.en}function E(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var T=/\$/g,V=/%\{(.*?)\}/g;function A(e,t,n,o){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var i=e,r=o||V,a="number"==typeof t?{smart_count:t}:t;if(null!=a.smart_count&&i){var s=k.call(i,"||||");i=(s[function(e,t){return P[C(e)](t)}(n||"en",a.smart_count)]||s[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return i=j.call(i,r,(function(e,t){return $(a,t)&&null!=a[t]?j.call(a[t],T,"$$"):e}))}function I(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var n=t.allowMissing?A:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:n,this.warn=t.warn||O,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",n=e&&e.suffix||"}";if("||||"===t||"||||"===n)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(E(t)+"(.*?)"+E(n),"g")}(t.interpolation)}I.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},I.prototype.extend=function(e,t){x(e,(function(e,n){var i=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.extend(e,i):this.phrases[i]=e}),this)},I.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:x(e,(function(e,n){var i=t?t+"."+n:n;"object"===(void 0===e?"undefined":o(e))?this.unset(e,i):delete this.phrases[i]}),this)},I.prototype.clear=function(){this.phrases={}},I.prototype.replace=function(e){this.clear(),this.extend(e)},I.prototype.t=function(e,t){var n,o,i=null==t?{}:t;if("string"==typeof this.phrases[e])n=this.phrases[e];else if("string"==typeof i._)n=i._;else if(this.onMissingKey){o=(0,this.onMissingKey)(e,i,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),o=e;return"string"==typeof n&&(o=A(n,i,this.currentLocale,this.tokenRegex)),o},I.prototype.has=function(e){return $(this.phrases,e)},I.transformPhrase=function(e,t,n){return A(e,t,n)};var D=I;function N(e,t,n){if(t.urls)n=t.urls[n]||n;else if(t.param){var o;(o={})[t.param]=n,n=o}e.show(n)}var q={good:"check",error:"warning",saving:"refresh fa-spin"},R={good:"Ok",error:"Error",saving:"Connecting..."};function L(e,t,n){for(var o=0;o<n.length;o++)e[n[o]]=t[o+1]?t[o+1].page:""}var F=window.webix;F&&g(F);var M={UnloadGuard:function(e,t,n){t.on(e,"app:guard",(function(e,o,i){if(o===t||o.contains(t)){var r=n();i.confirm=!1===r?Promise.reject(new s):i.confirm.then((function(){return r}))}}))},Locale:function(e,t,o){var i=(o=o||{}).storage,r=i?i.get("lang")||"en":o.lang||"en";function a(t,n,a){n.__esModule&&(n=n.default);var s={phrases:n};o.polyglot&&e.webix.extend(s,o.polyglot);var l=c.polyglot=new D(s);if(l.locale(t),c._=e.webix.bind(l.t,l),r=t,i&&i.put("lang",r),o.webix){var u=o.webix[t];u&&e.webix.i18n.setLocale(u)}return a?Promise.resolve():e.refresh()}function s(e,t){if(!1!==o.path){var i=(o.path?o.path+"/":"")+e;a(e,n(78)("./"+i),t)}}var c={getLang:function(){return r},setLang:s,setLangData:a,_:null,polyglot:null};e.setService("locale",c),s(r,!0)},Menu:function(e,t,n){var o=t.getSubViewInfo().parent,i=t.$$(n.id||n),r=!1;i.attachEvent("onchange",(function(){r||N(o,n,this.getValue())})),i.attachEvent("onafterselect",(function(){if(!r){var e=null;i.setValue?e=this.getValue():i.getSelectedId&&(e=i.getSelectedId()),N(o,n,e)}})),t.on(e,"app:route",(function(){var e="";if(n.param)e=t.getParam(n.param,!0);else{var a=o.getUrl()[1];a&&(e=a.page)}e&&(r=!0,i.setValue&&i.getValue()!==e?i.setValue(e):i.select&&i.exists(e)&&i.getSelectedId()!==e&&i.select(e),r=!1)}))},Theme:function(e,t,n){var o=(n=n||{}).storage,i=o?o.get("theme")||"flat-default":n.theme||"flat-default",r={getTheme:function(){return i},setTheme:function(t,n){for(var r=t.split("-"),a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s].getAttribute("title");c&&(c===t||c===r[0]?a[s].disabled=!1:a[s].disabled=!0)}e.webix.skin.set(r[0]),e.webix.html.removeCss(document.body,"theme-"+i),e.webix.html.addCss(document.body,"theme-"+t),i=t,o&&o.put("theme",t),n||e.refresh()}};e.setService("theme",r),r.setTheme(i,!0)},User:function(e,t,n){var o=(n=n||{}).login||"/login",i=n.logout||"/logout",r=n.afterLogin||e.config.start,a=n.afterLogout||"/login",s=n.ping||3e5,c=n.model,l=n.user,u={getUser:function(){return l},getStatus:function(e){return e?c.status().catch((function(){return null})).then((function(e){l=e})):null!==l},login:function(t,n){return c.login(t,n).then((function(t){if(l=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[l]),e.show(r)}))},logout:function(){return l=null,c.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function d(e,t){e===i?(u.logout(),t.redirect=a):e===o||u.getStatus()||(t.redirect=o)}e.setService("user",u),e.attachEvent("app:guard",(function(e,t,o){return!(!n.public||!n.public(e))||(void 0===l&&(o.confirm=u.getStatus(!0).then((function(){return d(e,o)}))),d(e,o))})),s&&setInterval((function(){return u.getStatus(!0)}),s)},Status:function(e,t,n){var o="good",i=0,r=!1,a=n.expire;a||!1===a||(a=2e3);var s=n.texts||R,c=n.icons||q;function l(e){var i=t.$$(n.target);i&&(e||(e="<div class='status_"+o+"'><span class='webix_icon fa-"+c[o]+"'></span> "+s[o]+"</div>"),i.setHTML(e))}function u(){i--,h("good")}function d(e){i--,h("error",e)}function f(e){i++,h("saving"),e&&e.then&&e.then(u,d)}function p(){0===i&&l(" ")}function h(t,n){i<0&&(i=0),"saving"===t?(o="saving",l()):(r="error"===t,0===i&&(o=r?"error":"good",r?e.error("app:error:server",[n.responseText||n]):a&&setTimeout(p,a),l()))}function b(n){var o=e.webix.dp(n);o&&(t.on(o,"onAfterDataSend",f),t.on(o,"onAfterSaveError",(function(e,t,n){return d(n)})),t.on(o,"onAfterSave",u))}"string"==typeof n&&(n={target:n}),e.setService("status",{getStatus:function(){return o},setStatus:h,track:b}),n.remote&&t.on(e.webix,"onRemoteCall",f),n.ajax&&t.on(e.webix,"onBeforeAjax",(function(e,t,n,o,i,r,a){f(a)})),n.data&&b(n.data)},UrlParam:function(e,t,n){var o=n.route||n,i={};t.on(e,"app:urlchange",(function(e,n){t===e&&(L(i,n.suburl(),o),n.size(o.length+1))}));var r=t.setParam,a=t.getParam;t.setParam=function(e,n,a){var s=o.indexOf(e);return s>=0?(i[e]=n,this._segment.update("",n,s+1),a?t.show(null):void 0):r.call(this,e,n,a)},t.getParam=function(e,t){var n=i[e];return void 0!==n?n:a.call(this,e,t)},L(i,t.getUrl(),o)}},B=window;B.Promise||(B.Promise=B.webix.promise)},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n(0),i={prefix:o.d+"query",countPage:0,isDataType:1,isSearchDetach:0,isMinimap:0,isDisableHistory:0,isAdjustCols:0},r=o.a+"/query";var a=new webix.DataCollection},function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"i",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"m",(function(){return b})),n.d(t,"c",(function(){return _})),n.d(t,"n",(function(){return m})),n.d(t,"l",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return g}));var o=n(5),i=n(73),r=n.n(i),a=(n(77),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),s=1e4,c=(webix.Date.dateToStr("%Y-%m-%d"),function(e){return{view:"pager",id:e,css:"z-pager-aligned",size:s,template:function(e,t){var n=e.page*e.size,o=n+e.size;return o>e.count&&(o=e.count),e.size>s&&webix.message("Data show only "+s+" records"),"<span class='z-pager-no'>"+(n+1)+"-"+o+" of "+e.count+"</span> "+t.prev()+t.next()}}}),l=function(e){return{view:"pager",css:{"line-height":"2.5","text-align":"right"},id:e,size:s,template:function(e,t){return e.size>s&&webix.message("Data show only "+s+" records"),e.count+" rows"}}};function u(e){if(SHOW_ERR_DEBUG){var t="UNKNOWN_ERR",n="Unknown error, check console for details";if(200!=e.status||201!=e.status||202!=e.status){var o={responseText:e.responseText,statusText:e.statusText},i=Object.keys(o).map((function(e){return e+": "+o[e]})).join("<br />");if(t="HTTP_ERR_"+e.status,n=i,500==e.status){var r=JSON.parse(e.response)||e.response;t="DB_ERR_"+r.r_code,n=r.err_msg}else if(""!==JSON.parse(e).r_code){var a=JSON.parse(e);t="DB_ERR_"+a.r_code,n=a.err_msg}}n=n.substring(0,65)+"...\n<span>"+n.substring(65,1e3)+"</span>",webix.alert({title:"Server Error",type:"alert-error",width:"500px",text:"<div style='padding:0 10px;'><span style='font-weight: bold;'>Code:</span> "+t+" <br><span style='font-weight: bold;'>Message:</span> "+n+"</div>"})}}function d(e){var t=JSON.parse(e),n="";Object.keys(t).forEach((function(e){n+="<b>"+e+":</b> "+t[e]+"<br>"})),webix.message({text:n,type:"error"})}function f(e,t){webix.alert({title:"Session expired",text:"Your session has expired, please login again"}).then((function(){t&&(e.show("/logout"),setTimeout((function(){return window.location.reload()}),600))}))}function p(e){e.getEditor(!0).then((function(e){var t="12";o.b.appProfile&&Array.isArray(o.b.appProfile)&&(t=o.b.appProfile.find((function(e){return"editor_font_size"==e.m_key})).m_val),e.updateOptions({fontSize:t+"px"})}))}function h(e){return!!/^(?=[a-zA-Z0-9._]{4,20}$)(?!.*[_.]{2})[^_.].*[^_.]$/.exec(e)}function b(e,t,n){n=n||"",t=t||20,webix.extend(e,webix.OverlayBox),e.showOverlay('<div class="z_overlay_progress" role="progressbar" aria-valuemin="0" aria-valuemax="100" tabindex="0">\n\t\t\t\t<div class="z_overlay_progress_state" style="top: '+t+'%;">\n\t\t\t\t\t<div class="z_loading_spinner"></div>\n\t\t\t\t\t'+n+"\n\t\t\t\t</div>\n\t\t\t</div>")}function _(e,t){var n=document.createElement("canvas").getContext("2d");n.font="14px Roboto,sans-serif";var o=n.measureText(e);return Math.ceil(o.width)+10}function m(e,t){var n="toasify_success";void 0!==t&&(n=t),r()({text:e,duration:3e3,newWindow:!0,close:!1,gravity:"bottom",position:"right",stopOnFocus:!0,className:n}).showToast()}function w(e,t){webix.html.addCss(e.$view,"padding_overlay_zero"),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class='z_loading_panel'>\n        <div class=\"laoder-spinner-container\">\n            <div class=\"loader-spinner\"></div>\n        </div>\n        <div class='z_loading_text'>"+t+"</div>\n    </div>\n")}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=e.slice(0,e.indexOf("\n")).split(t),o=e.slice(e.indexOf("\n")+1).split("\n"),i=o.map((function(e){var o=e.split(t);return n.reduce((function(e,t,n){return e[t]=o[n],e}),{})}));return{col_name:n,data:i}}function g(e){if("object"==(void 0===e?"undefined":a(e))){var t=[],n=Object.entries(e),o=Array.isArray(n),i=0;for(n=o?n:n[Symbol.iterator]();;){var r;if(o){if(i>=n.length)break;r=n[i++]}else{if((i=n.next()).done)break;r=i.value}var s=r,c=s[0],l=s[1];t.push(c.replace(/_/g," ").replace(/\b\S/g,(function(e){return e.toUpperCase()}))+": "+l+"<br>")}return t.join("")}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=n(0).a+"/profile"},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var o=n(11),i={viewScope:{},currentTabQuery:0,currentTabViewData:0,currentDBSelected:"",meta:{},appProfile:{}},r=[{value:"Database",id:o.routeName.database,icon:"mdi mdi-database"},{value:"Query",id:o.routeName.query,icon:"mdi mdi-play"},{value:"Task",id:o.routeName.task,icon:"mdi mdi-chart-gantt"},{value:"Compare",id:o.routeName.compare,icon:"mdi mdi-swap-horizontal-bold"},{value:"View Data",id:o.routeName.viewdata,icon:"mdi mdi-view-grid"},{value:"Copy Data",id:o.routeName.copydata,icon:"mdi mdi-layers"},{value:"Generator",id:o.routeName.generator,icon:"mdi mdi-atom-variant"},{value:"Query Share",id:o.routeName.shared,icon:"mdi mdi-vector-combine"},{value:"Setting",id:o.routeName.setting,icon:"mdi mdi-cog"}]},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var o=n(0),i={prefix:o.d+"task",isEdit:!1,dataSelected:{}},r=o.a+"/task",a=o.a+"/task_item"},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n(0),i={userId:0,token:"",username:"",userLevel:0,fullname:""},r=function(e){var t=function(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return null}}(e);null!=t&&(i.token=e,i.userId=t.uid,i.userLevel=t.ulv,i.username=t.username,i.fullname=t.fullname)};function a(){var e=webix.storage.cookie.get(o.g),t=i.token||e;return t&&r(t),t}function s(){a()}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n(7);function i(e){e["Content-type"]="application/json",e.Authorization="Bearer "+Object(o.a)()}function r(e){e["Content-type"]="application/json"}function a(e){return JSON.parse(e.response).message}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=n(0).a+"/db"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(0),i={prefix:o.d+"viewdata",countPage:0},r=o.a+"/viewdata"},function(e,t,n){"use strict";n.r(t),n.d(t,"routeName",(function(){return h})),n.d(t,"routes",(function(){return b}));var o=n(24),i=n(25),r=n(26),a=n(27),s=n(28),c=n(29),l=n(18),u=n(2),d=n(10),f=n(33),p=n(30),h={task:"task",database:"database",query:"query",migration:"migration",compare:"compare",viewdata:"viewdata",copydata:"copydata",generator:"generator",shared:"shared",setting:"setting"},b=[{id:h.task,type:"clean",borderless:!0,rows:[a.default]},{id:h.database,type:"clean",borderless:!0,rows:[i.default]},{id:h.query,type:"clean",borderless:!0,rows:[Object(l.QueryPage)(u.b.prefix)]},{id:h.compare,type:"clean",borderless:!0,rows:[o.default]},{id:h.copydata,type:"clean",borderless:!0,rows:[r.default]},{id:h.viewdata,type:"clean",borderless:!0,rows:[Object(f.ViewDataPage)(d.a.prefix)]},{id:h.setting,type:"clean",borderless:!0,rows:[c.default]},{id:h.generator,type:"clean",borderless:!0,rows:[s.default]},{id:h.shared,type:"clean",borderless:!0,rows:[p.default]}]},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var o=n(0),i=(n(8),{prefix:o.d+"user",isEdit:!1,dataSelected:{}}),r=o.a;function a(e){return webix.ajax().post(o.a+"/register",e).then((function(e){return e.json()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(0),i={prefix:o.d+"user_config",isEdit:!1,dataSelected:{}},r=o.a+"/user_config"},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var o=n(0),i={prefix:o.d+"copydata",countPage:0,tableName:"",tableFields:{}},r=o.a+"/copydata";function a(e){return webix.ajax().post(r+"/check_table",e).then((function(e){return e.json()}))}function s(e){return webix.ajax().post(r+"/runcopy",e).then((function(e){return e.json()}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function(e){window.isSecureContext&&navigator.clipboard?r(e):i(e),webix.message({text:"Copied",type:"success"})},i=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(e){console.error("Unable to copy to clipboard",e)}document.body.removeChild(t)},r=function(e){navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1}).then((function(e){"denied"==e.state&&navigator.clipboard.readText().then((function(e){})),e.onchange=function(){console.log("PermissionState:",e.state)}}));try{navigator.clipboard.writeText(e)}catch(e){console.error("Failed to copy: ",e),webix.message({text:"Failed copy: "+e,type:"error"})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(0),i={prefix:o.d+"share",isEdit:!1,dataSelected:{}},r=o.a+"/share"},function(e,t,n){"use strict";n.r(t),n.d(t,"confirmCreateTableAndCopyData",(function(){return c})),n.d(t,"getInputData",(function(){return u})),n.d(t,"applyCopyAction",(function(){return f})),n.d(t,"sourceTypeChanges",(function(){return h})),n.d(t,"generateEmptyRow",(function(){return b}));var o=n(3),i=n(14),r=n(34),a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],s=i.c+"_page";function c(e){webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to execute this action ?",callback:function(t){t&&($$(s+"confirm_table").close(),Object(o.l)($$("z_copydata_page"),"Copying data, please wait..."),e.create_table=!0,Object(i.b)(e).then((function(e){setTimeout((function(){l(Object(o.a)(e)),webix.message({text:e.message,type:e.error?"error":"success"}),$$("z_copydata_page").hideOverlay()}),1e3)})).fail((function(e){l(JSON.parse(e.response).message),$$("z_copydata_page").hideOverlay()})))}})}function l(e){e.length>0&&($$(s+"console_panel").show(),$$(s+"console_resizer").show(),$$(s+"console_panel").config.height=120,$$(s+"console_panel").resize(),$$(s+"console_result").setHTML("\n        <div style='font-family: monospace;padding-top:10px;'>"+e+"</div>"))}function u(){return{type_copy:$$(s+"_source_type").getValue(),source_id:$$(s+"_source_db").getValue(),target_id:$$(s+"_target_db").getValue(),source_query:$$(s+"_source_editor").getValue(),table_name:$$(s+"_schema_table").getValue(),first_row:$$(s+"_first_row_column").getValue(),source_data:[],table_field:{}}}function d(e){webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to execute this action ?",callback:function(t){t&&Object(i.b)(e).then((function(e){setTimeout((function(){l(Object(o.a)(e)),webix.message({text:e.message,type:e.error?"error":"success"}),$$("z_copydata_page").hideOverlay()}),1e3)})).fail((function(e){l(JSON.parse(e.response).message),$$("z_copydata_page").hideOverlay()}))}})}function f(){var e=u();(function(e){var t=$$(s+"_target_db"),n=$$(s+"_source_db"),o=$$(s+"_schema_table");if(0==e.target_id.length?(webix.html.addCss(t.getNode(),"webix_invalid"),webix.message({text:"Target DB required",type:"error"})):webix.html.removeCss(t.$view,"webix_invalid"),0==e.table_name.length?(webix.html.addCss(o.getNode(),"webix_invalid"),webix.message({text:"Table name required",type:"error"})):webix.html.removeCss(o.$view,"webix_invalid"),"query"==$$(s+"_source_type").getValue()){if(0==e.source_id.length?(webix.html.addCss(n.getNode(),"webix_invalid"),webix.message({text:"Source DB required",type:"error"})):webix.html.removeCss(n.$view,"webix_invalid"),0==e.source_query.length&&webix.message({text:"Query sql empty",type:"error"}),0==e.source_id.length||0==e.target_id.length||0==e.table_name.length||0==e.source_query.length)return!1}else if(0==e.target_id.length||0==e.table_name.length)return!1;return!0})(e)&&(Object(o.l)($$("z_copydata_page"),"Check existing table..."),Object(i.a)(e).then((function(t){setTimeout((function(){if($$("z_copydata_page").hideOverlay(),"query"==e.type_copy)t.exists?d(e):Object(r.confirmTableField)(e,t.source_fields);else if("spreadsheet"==e.type_copy){var n=p($$(s+"_source_spredsheet"));t.exists?(e.table_field=JSON.stringify(n.table_field),e.source_data=JSON.stringify(n.source_data),e.table_exist=!0,d(e)):Object(r.confirmTableField)(e,n.table_field,n.source_data)}else if("csv"==e.type_copy){var o=p($$(s+"_csv_data"),!0);t.exists?(e.table_field=JSON.stringify(o.table_field),e.source_data=JSON.stringify(o.source_data),e.table_exist=!0,d(e)):Object(r.confirmTableField)(e,o.table_field,o.source_data)}else webix.message({text:"No type selected",type:"error"})}),1e3)})).fail((function(e){l(JSON.parse(e.response).message),$$("z_copydata_page").hideOverlay()})))}function p(e,t){var n=e.serialize(),o=$$(s+"_first_row_column").getValue();t&&(o=0);var i=n[0],r=[];Object.keys(i).forEach((function(e){i[e].length>0&&r.push(e)}));var a=n.map((function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=e[0];e[1];return r.includes(t)})))})).filter((function(e){return Object.values(e).join("")}));if(a.length>0){var c=[];return Object.entries(a[0]).forEach((function(e){var t=e[0],n=e[1];o?c.push({label:n,type:"combo",id:n,value:"text"}):c.push({label:t,type:"combo",id:t,value:"text"})})),o&&a.shift(),{source_data:a,table_field:c}}webix.message({text:"Nothing to copy !",type:"error"})}function h(e){"query"==e?($$(s+"_source_db").show(),$$(s+"_type_source_query").show(),$$(s+"_type_source_sheet").hide(),$$(s+"_type_uploadcsv").hide(),$$(s+"_first_row_column").hide(),$$(s+"_row_count").hide(),$$(s+"_uploadcsv_btn").hide(),$$(s+"_uploadcsv_delimeter").hide(),$$(s+"_first_row_column").setValue(0)):"spreadsheet"==e?($$(s+"_source_db").hide(),$$(s+"_type_source_query").hide(),$$(s+"_type_uploadcsv").hide(),$$(s+"_type_source_sheet").show(),$$(s+"_first_row_column").show(),$$(s+"_row_count").show(),$$(s+"_uploadcsv_btn").hide(),$$(s+"_uploadcsv_delimeter").hide(),b()):($$(s+"_type_uploadcsv").show(),$$(s+"_uploadcsv_btn").show(),$$(s+"_uploadcsv_delimeter").show(),$$(s+"_source_db").hide(),$$(s+"_type_source_sheet").hide(),$$(s+"_type_source_query").hide(),$$(s+"_first_row_column").setValue(0),$$(s+"_first_row_column").hide(),$$(s+"_row_count").hide())}function b(){$$(s+"_cancel_action").show();var e=[],t=[],n=$$(s+"_type_source_sheet");webix.extend(n,webix.OverlayBox),n.showOverlay("<div class='z_center_middle' style='background:rgba(255,255,255, 0.5); font-size: 14px;'>\n        <div><span style='text-decoration: line-through;'>Copy</span> Paste from Spreadsheet here</div>\n      </div>");var o=parseInt($$(s+"_row_count").getValue())||100;a.forEach((function(t,n){e.push({id:"col_"+n,header:t})}));var i=[];e.forEach((function(e,t){i.push([e.id,""])}));for(var r=1;r<=o;r++)t.push(Object.assign({id:r},Object.fromEntries(i)));var c={view:"datatable",id:s+"_source_spredsheet",select:"cell",multiselect:!0,blockselect:!0,clipboard:"block",css:"webix_data_border webix_header_border copydata_spreadsheet",resizeColumn:!0,resizeRow:!0,columns:e,data:t,scheme:{$init:function(e){e.index=this.count()}}},l=$$(s+"_scrollview_body"),u=l.getChildViews();u[0]&&l.removeView(u[0]),l.addView(c),document.querySelector(".copydata_scrollview div.webix_overlay").addEventListener("click",(function(e){n.hideOverlay()}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryPage",(function(){return zt}));var o="en",i={},r={};function a(){return o}function s(e){return i[e]?e:r[e.toLowerCase()]?r[e.toLowerCase()]:void 0}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.localeMatcher||"lookup";switch(n){case"lookup":case"best fit":return l(e);default:throw new RangeError('Invalid "localeMatcher" option: '.concat(n))}}function l(e){var t=s(e);if(t)return t;for(var n=e.split("-");e.length>1;){n.pop();var o=s(e=n.join("-"));if(o)return o}}var u={af:function(e){return 1==e?"one":"other"},am:function(e){return e>=0&&e<=1?"one":"other"},ar:function(e){var t=String(e).split("."),n=Number(t[0])==e&&t[0].slice(-2);return 0==e?"zero":1==e?"one":2==e?"two":n>=3&&n<=10?"few":n>=11&&n<=99?"many":"other"},ast:function(e){var t=!String(e).split(".")[1];return 1==e&&t?"one":"other"},be:function(e){var t=String(e).split("."),n=Number(t[0])==e,o=n&&t[0].slice(-1),i=n&&t[0].slice(-2);return 1==o&&11!=i?"one":o>=2&&o<=4&&(i<12||i>14)?"few":n&&0==o||o>=5&&o<=9||i>=11&&i<=14?"many":"other"},br:function(e){var t=String(e).split("."),n=Number(t[0])==e,o=n&&t[0].slice(-1),i=n&&t[0].slice(-2),r=n&&t[0].slice(-6);return 1==o&&11!=i&&71!=i&&91!=i?"one":2==o&&12!=i&&72!=i&&92!=i?"two":(3==o||4==o||9==o)&&(i<10||i>19)&&(i<70||i>79)&&(i<90||i>99)?"few":0!=e&&n&&0==r?"many":"other"},bs:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",i=!t[1],r=n.slice(-1),a=n.slice(-2),s=o.slice(-1),c=o.slice(-2);return i&&1==r&&11!=a||1==s&&11!=c?"one":i&&r>=2&&r<=4&&(a<12||a>14)||s>=2&&s<=4&&(c<12||c>14)?"few":"other"},ca:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-6);return 1==e&&o?"one":0!=n&&0==i&&o?"many":"other"},ceb:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",i=!t[1],r=n.slice(-1),a=o.slice(-1);return i&&(1==n||2==n||3==n)||i&&4!=r&&6!=r&&9!=r||!i&&4!=a&&6!=a&&9!=a?"one":"other"},cs:function(e){var t=String(e).split("."),n=t[0],o=!t[1];return 1==e&&o?"one":n>=2&&n<=4&&o?"few":o?"other":"many"},cy:function(e){return 0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e){var t=String(e).split("."),n=t[0],o=Number(t[0])==e;return 1!=e&&(o||0!=n&&1!=n)?"other":"one"},dsb:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",i=!t[1],r=n.slice(-2),a=o.slice(-2);return i&&1==r||1==a?"one":i&&2==r||2==a?"two":i&&(3==r||4==r)||3==a||4==a?"few":"other"},dz:function(e){return"other"},es:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-6);return 1==e?"one":0!=n&&0==i&&o?"many":"other"},ff:function(e){return e>=0&&e<2?"one":"other"},fr:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-6);return e>=0&&e<2?"one":0!=n&&0==i&&o?"many":"other"},ga:function(e){var t=String(e).split("."),n=Number(t[0])==e;return 1==e?"one":2==e?"two":n&&e>=3&&e<=6?"few":n&&e>=7&&e<=10?"many":"other"},gd:function(e){var t=String(e).split("."),n=Number(t[0])==e;return 1==e||11==e?"one":2==e||12==e?"two":n&&e>=3&&e<=10||n&&e>=13&&e<=19?"few":"other"},he:function(e){var t=String(e).split("."),n=t[0],o=!t[1];return 1==n&&o||0==n&&!o?"one":2==n&&o?"two":"other"},is:function(e){var t=String(e).split("."),n=t[0],o=(t[1]||"").replace(/0+$/,""),i=Number(t[0])==e,r=n.slice(-1),a=n.slice(-2);return i&&1==r&&11!=a||o%10==1&&o%100!=11?"one":"other"},ksh:function(e){return 0==e?"zero":1==e?"one":"other"},lt:function(e){var t=String(e).split("."),n=t[1]||"",o=Number(t[0])==e,i=o&&t[0].slice(-1),r=o&&t[0].slice(-2);return 1==i&&(r<11||r>19)?"one":i>=2&&i<=9&&(r<11||r>19)?"few":0!=n?"many":"other"},lv:function(e){var t=String(e).split("."),n=t[1]||"",o=n.length,i=Number(t[0])==e,r=i&&t[0].slice(-1),a=i&&t[0].slice(-2),s=n.slice(-2),c=n.slice(-1);return i&&0==r||a>=11&&a<=19||2==o&&s>=11&&s<=19?"zero":1==r&&11!=a||2==o&&1==c&&11!=s||2!=o&&1==c?"one":"other"},mk:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"",i=!t[1],r=n.slice(-1),a=n.slice(-2),s=o.slice(-1),c=o.slice(-2);return i&&1==r&&11!=a||1==s&&11!=c?"one":"other"},mt:function(e){var t=String(e).split("."),n=Number(t[0])==e&&t[0].slice(-2);return 1==e?"one":2==e?"two":0==e||n>=3&&n<=10?"few":n>=11&&n<=19?"many":"other"},pa:function(e){return 0==e||1==e?"one":"other"},pl:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-1),r=n.slice(-2);return 1==e&&o?"one":o&&i>=2&&i<=4&&(r<12||r>14)?"few":o&&1!=n&&(0==i||1==i)||o&&i>=5&&i<=9||o&&r>=12&&r<=14?"many":"other"},pt:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-6);return 0==n||1==n?"one":0!=n&&0==i&&o?"many":"other"},ro:function(e){var t=String(e).split("."),n=!t[1],o=Number(t[0])==e&&t[0].slice(-2);return 1==e&&n?"one":!n||0==e||1!=e&&o>=1&&o<=19?"few":"other"},ru:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-1),r=n.slice(-2);return o&&1==i&&11!=r?"one":o&&i>=2&&i<=4&&(r<12||r>14)?"few":o&&0==i||o&&i>=5&&i<=9||o&&r>=11&&r<=14?"many":"other"},se:function(e){return 1==e?"one":2==e?"two":"other"},si:function(e){var t=String(e).split("."),n=t[0],o=t[1]||"";return 0==e||1==e||0==n&&1==o?"one":"other"},sl:function(e){var t=String(e).split("."),n=t[0],o=!t[1],i=n.slice(-2);return o&&1==i?"one":o&&2==i?"two":o&&(3==i||4==i)||!o?"few":"other"}};u.as=u.am,u.az=u.af,u.bg=u.af,u.bn=u.am,u.brx=u.af,u.ce=u.af,u.chr=u.af,u.de=u.ast,u.ee=u.af,u.el=u.af,u.en=u.ast,u.et=u.ast,u.eu=u.af,u.fa=u.am,u.fi=u.ast,u.fil=u.ceb,u.fo=u.af,u.fur=u.af,u.fy=u.ast,u.gl=u.ast,u.gu=u.am,u.ha=u.af,u.hi=u.am,u.hr=u.bs,u.hsb=u.dsb,u.hu=u.af,u.hy=u.ff,u.ia=u.ast,u.id=u.dz,u.ig=u.dz,u.it=u.ca,u.ja=u.dz,u.jgo=u.af,u.jv=u.dz,u.ka=u.af,u.kea=u.dz,u.kk=u.af,u.kl=u.af,u.km=u.dz,u.kn=u.am,u.ko=u.dz,u.ks=u.af,u.ku=u.af,u.ky=u.af,u.lb=u.af,u.lkt=u.dz,u.lo=u.dz,u.ml=u.af,u.mn=u.af,u.mr=u.af,u.ms=u.dz,u.my=u.dz,u.nb=u.af,u.ne=u.af,u.nl=u.ast,u.nn=u.af,u.no=u.af,u.or=u.af,u.pcm=u.am,u.ps=u.af,u.rm=u.af,u.sah=u.dz,u.sc=u.ast,u.sd=u.af,u.sk=u.cs,u.so=u.af,u.sq=u.af,u.sr=u.bs,u.su=u.dz,u.sv=u.ast,u.sw=u.ast,u.ta=u.af,u.te=u.af,u.th=u.dz,u.ti=u.pa,u.tk=u.af,u.to=u.dz,u.tr=u.af,u.ug=u.af,u.uk=u.ru,u.ur=u.ast,u.uz=u.af,u.vi=u.dz,u.wae=u.af,u.wo=u.dz,u.xh=u.af,u.yi=u.ast,u.yo=u.dz,u.yue=u.dz,u.zh=u.dz,u.zu=u.am;var d=u;function f(e){return"pt-PT"===e?e:function(e){var t=e.match(p);if(!t)throw new TypeError("Invalid locale: ".concat(e));return t[1]}(e)}var p=/^([a-z0-9]+)/i;function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=e.supportedLocalesOf(t);if(0===o.length)throw new RangeError("Unsupported locale: "+t);if(n&&"cardinal"!==n.type)throw new RangeError('Only "cardinal" "type" is supported');this.$=d[f(o[0])]}var t,n,o;return t=e,o=[{key:"supportedLocalesOf",value:function(e){return"string"==typeof e&&(e=[e]),e.filter((function(e){return d[f(e)]}))}}],(n=[{key:"select",value:function(e){return this.$(e)}}])&&h(t.prototype,n),o&&h(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function m(e){return(m="function"==typeof Symbol&&"symbol"==_(Symbol.iterator)?function(e){return void 0===e?"undefined":_(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":_(e)})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var j=["second","minute","hour","day","week","month","quarter","year"],k=["auto","always"],S=["long","short","narrow"],P=["lookup","best fit"],z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(this,e);var o=n.numeric,i=n.style,r=n.localeMatcher;if(this.numeric="always",this.style="long",this.localeMatcher="lookup",void 0!==o){if(k.indexOf(o)<0)throw new RangeError('Invalid "numeric" option: '.concat(o));this.numeric=o}if(void 0!==i){if(S.indexOf(i)<0)throw new RangeError('Invalid "style" option: '.concat(i));this.style=i}if(void 0!==r){if(P.indexOf(r)<0)throw new RangeError('Invalid "localeMatcher" option: '.concat(r));this.localeMatcher=r}if("string"==typeof t&&(t=[t]),t.push(a()),this.locale=e.supportedLocalesOf(t,{localeMatcher:this.localeMatcher})[0],!this.locale)throw new Error("No supported locale was found");b.supportedLocalesOf(this.locale).length>0?this.pluralRules=new b(this.locale):console.warn('"'.concat(this.locale,'" locale is not supported')),"undefined"!=typeof Intl&&Intl.NumberFormat?(this.numberFormat=new Intl.NumberFormat(this.locale),this.numberingSystem=this.numberFormat.resolvedOptions().numberingSystem):this.numberingSystem="latn",this.locale=c(this.locale,{localeMatcher:this.localeMatcher})}var t,n,o;return t=e,(n=[{key:"format",value:function(){var e=V(arguments),t=v(e,2),n=t[0],o=t[1];return this.getRule(n,o).replace("{0}",this.formatNumber(Math.abs(n)))}},{key:"formatToParts",value:function(){var e=V(arguments),t=v(e,2),n=t[0],o=t[1],i=this.getRule(n,o),r=i.indexOf("{0}");if(r<0)return[{type:"literal",value:i}];var a=[];return r>0&&a.push({type:"literal",value:i.slice(0,r)}),a=a.concat(this.formatNumberToParts(Math.abs(n)).map((function(e){return y(y({},e),{},{unit:o})}))),r+"{0}".length<i.length-1&&a.push({type:"literal",value:i.slice(r+"{0}".length)}),a}},{key:"getRule",value:function(e,t){var n,o=(n=this.locale,i[n])[this.style][t];if("string"==typeof o)return o;if("auto"===this.numeric)if(-2===e||-1===e){var r=o["previous".concat(-1===e?"":"-"+Math.abs(e))];if(r)return r}else if(1===e||2===e){var a=o["next".concat(1===e?"":"-"+Math.abs(e))];if(a)return a}else if(0===e&&o.current)return o.current;var s,c=o[(s=e,s<0||0===s&&function(e){return 1/e==-1/0}(s)?"past":"future")];return"string"==typeof c?c:c[this.pluralRules&&this.pluralRules.select(Math.abs(e))||"other"]||c.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"formatNumberToParts",value:function(e){return this.numberFormat&&this.numberFormat.formatToParts?this.numberFormat.formatToParts(e):[{type:"integer",value:this.formatNumber(e)}]}},{key:"resolvedOptions",value:function(){return{locale:this.locale,style:this.style,numeric:this.numeric,numberingSystem:this.numberingSystem}}}])&&O(t.prototype,n),o&&O(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();z.supportedLocalesOf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e)e=[e];else if(!Array.isArray(e))throw new TypeError('Invalid "locales" argument');return e.filter((function(e){return c(e,t)}))},z.addLocale=function(e){if(!e)throw new Error("No locale data passed");i[e.locale]=e,r[e.locale.toLowerCase()]=e.locale},z.setDefaultLocale=function(e){o=e},z.getDefaultLocale=a,z.PluralRules=b;var C='Invalid "unit" argument';function E(e){if("symbol"===m(e))throw new TypeError(C);if("string"!=typeof e)throw new RangeError("".concat(C,": ").concat(e));if("s"===e[e.length-1]&&(e=e.slice(0,e.length-1)),j.indexOf(e)<0)throw new RangeError("".concat(C,": ").concat(e));return e}function T(e){if(e=Number(e),Number.isFinite&&!Number.isFinite(e))throw new RangeError("".concat('Invalid "number" argument',": ").concat(e));return e}function V(e){if(e.length<2)throw new TypeError('"unit" argument is required');return[T(e[0]),E(e[1])]}var A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function I(e){return(I="function"==typeof Symbol&&"symbol"==A(Symbol.iterator)?function(e){return void 0===e?"undefined":A(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":A(e)})(e)}function D(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}var t,n,o;return t=e,(n=[{key:"get",value:function(){for(var e=this.cache,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var i=0,r=n;i<r.length;i++){var a=r[i];if("object"!==I(e))return;e=e[a]}return e}},{key:"put",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var o=t.pop(),i=t.pop(),r=this.cache,a=0,s=t;a<s.length;a++){var c=s[a];"object"!==I(r[c])&&(r[c]={}),r=r[c]}return r[i]=o}}])&&D(t.prototype,n),o&&D(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function R(e){return(R="function"==typeof Symbol&&"symbol"==q(Symbol.iterator)?function(e){return void 0===e?"undefined":q(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":q(e)})(e)}function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function M(e,t){for(var n,o=L(e);!(n=o()).done;){var i=n.value;if(t(i))return i;for(var r=i.split("-");r.length>1;)if(r.pop(),t(i=r.join("-")))return i}throw new Error("No locale data has been registered for any of the locales: ".concat(e.join(", ")))}function B(){return"object"===("undefined"==typeof Intl?"undefined":R(Intl))&&"function"==typeof Intl.DateTimeFormat}var U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function H(e){return(H="function"==typeof Symbol&&"symbol"==U(Symbol.iterator)?function(e){return void 0===e?"undefined":U(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":U(e)})(e)}function W(e){return function(e){return void 0!==H(e)&&null!==e&&e.constructor===Q}(e)&&(Array.isArray(e.steps)||Array.isArray(e.gradation)||Array.isArray(e.flavour)||"string"==typeof e.flavour||Array.isArray(e.labels)||"string"==typeof e.labels||Array.isArray(e.units)||"function"==typeof e.custom)}var Q={}.constructor;var K=86400;function J(e){switch(e){case"second":return 1;case"minute":return 60;case"hour":return 3600;case"day":return K;case"week":return 604800;case"month":return 2630016;case"year":return 31556952}}function G(e){return void 0!==e.factor?e.factor:J(e.unit||e.formatAs)||1}function Y(e){switch(e){case"floor":return Math.floor;default:return Math.round}}function Z(e){switch(e){case"floor":return 1;default:return.5}}var X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function ee(e){return(ee="function"==typeof Symbol&&"symbol"==X(Symbol.iterator)?function(e){return void 0===e?"undefined":X(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":X(e)})(e)}function te(e,t){var n,o=t.prevStep,i=t.timestamp,r=t.now,a=t.future,s=t.round;return o&&(o.id||o.unit)&&(n=e["threshold_for_".concat(o.id||o.unit)]),void 0===n&&void 0!==e.threshold&&"function"==typeof(n=e.threshold)&&(n=n(r,a)),void 0===n&&(n=e.minTime),"object"===ee(n)&&(n=o&&o.id&&void 0!==n[o.id]?n[o.id]:n.default),"function"==typeof n&&(n=n(i,{future:a,getMinTimeForUnit:function(e,t){return ne(e,t||o&&o.formatAs,{round:s})}})),void 0===n&&e.test&&(n=e.test(i,{now:r,future:a})?0:9007199254740991),void 0===n&&(o?e.formatAs&&o.formatAs&&(n=ne(e.formatAs,o.formatAs,{round:s})):n=0),void 0===n&&console.warn("[javascript-time-ago] A step should specify `minTime`:\n"+JSON.stringify(e,null,2)),n}function ne(e,t,n){var o,i=n.round,r=J(e);if(o=J("now"===t?e:t),void 0!==r&&void 0!==o)return r-o*(1-Z(i))}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t,n){var o=n.now,i=n.future,r=n.round,a=n.units,s=n.getNextStep,c=function(e,t,n){var o=n.now,i=n.future,r=n.round;if(0===e.length)return;var a=function e(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=te(t[i],ie({prevStep:t[i-1],timestamp:o.now-1e3*n},o));if(void 0===r)return i-1;if(Math.abs(n)<r)return i-1;if(i===t.length-1)return i;return e(t,n,o,i+1)}(e,t,{now:o,future:i||t<0,round:r});if(-1===a)return;var s=e[a];if(s.granularity){if(0===Y(r)(Math.abs(t)/G(s)/s.granularity)*s.granularity&&a>0)return e[a-1]}return s}(e=function(e,t){return e.filter((function(e){var n=e.unit,o=e.formatAs;return!(n=n||o)||t.indexOf(n)>=0}))}(e,a),t,{now:o,future:i,round:r});return s?c?[e[e.indexOf(c)-1],c,e[e.indexOf(c)+1]]:[void 0,void 0,e[0]]:c}function se(e,t,n){var o=n.now,i=n.round;if(J(e)){var r=1e3*J(e),a=t>o,s=Math.abs(t-o),c=Y(i)(s/r)*r;return a?c>0?s-c+function(e,t){return(1-Z(e))*t+1}(i,r):s-c+1:-(s-c)+function(e,t){return Z(e)*t}(i,r)}}function ce(e,t,n){var o=n.prevStep,i=n.nextStep,r=n.now,a=n.future,s=n.round,c=e.getTime?e.getTime():e,l=function(e){return se(e,c,{now:r,round:s})},u=function(e,t,n){var o=n.now,i=n.future,r=n.round,a=n.prevStep;if(e){var s=function(e,t,n){var o=n.now,i=n.future,r=n.round,a=n.prevStep,s=te(e,{timestamp:t,now:o,future:i,round:r,prevStep:a});if(void 0===s)return;return i?t-1e3*s+1:0===s&&t===o?31536e9:t+1e3*s}(e,t,{now:o,future:i,round:r,prevStep:a});if(void 0===s)return;return s-o}return i?t-o+1:31536e9}(a?t:i,c,{future:a,now:r,round:s,prevStep:a?o:t});if(void 0!==u){var d;if(t&&(t.getTimeToNextUpdate&&(d=t.getTimeToNextUpdate(c,{getTimeToNextUpdateForUnit:l,getRoundFunction:Y,now:r,future:a,round:s})),void 0===d)){var f=t.unit||t.formatAs;f&&(d=l(f))}return void 0===d?u:Math.min(d,u)}}var le={};function ue(e){return le[e]}function de(e){if(!e)throw new Error("[javascript-time-ago] No locale data passed.");le[e.locale]=e}var fe={steps:[{formatAs:"now"},{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"}],labels:"long"};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=he(he({},fe),{},{steps:fe.steps.filter((function(e){return"second"!==e.formatAs}))}),me=[{factor:1,unit:"now"},{threshold:1,threshold_for_now:45.5,factor:1,unit:"second"},{threshold:45.5,factor:60,unit:"minute"},{threshold:150,granularity:5,factor:60,unit:"minute"},{threshold:1350,factor:1800,unit:"half-hour"},{threshold:2550,threshold_for_minute:3150,factor:3600,unit:"hour"},{threshold:73800,factor:K,unit:"day"},{threshold:475200,factor:604800,unit:"week"},{threshold:2116800,factor:2630016,unit:"month"},{threshold:27615168,factor:31556952,unit:"year"}],we={gradation:me,flavour:"long",units:["now","minute","hour","day","week","month","year"]},ye={gradation:me,flavour:"long-time",units:["now","minute","hour","day","week","month","year"]};function ge(e){return e instanceof Date?e:new Date(e)}var ve=[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"}],$e={},xe={minTime:function(e,t){t.future;return(0,t.getMinTimeForUnit)("day")},format:function(e,t){return $e[t]||($e[t]={}),$e[t].dayMonth||($e[t].dayMonth=new Intl.DateTimeFormat(t,{month:"short",day:"numeric"})),$e[t].dayMonth.format(ge(e))}},Oe={minTime:function(e,t){return t.future?(e-(new Date(new Date(e).getFullYear(),0).getTime()-1))/1e3:(new Date(new Date(e).getFullYear()+1,0).getTime()-e)/1e3},format:function(e,t){return $e[t]||($e[t]={}),$e[t].dayMonthYear||($e[t].dayMonthYear=new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"})),$e[t].dayMonthYear.format(ge(e))}};B()?ve.push(xe,Oe):ve.push({formatAs:"day"},{formatAs:"week"},{formatAs:"month"},{formatAs:"year"});var je={steps:ve,labels:["mini","short-time","narrow","short"]};function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=Se(Se({},je),{},{steps:[{formatAs:"now"}].concat(je.steps)});function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=Ee(Ee({},je),{},{steps:je.steps.filter((function(e){return"second"!==e.formatAs}))});function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=Ie(Ie({},Ve),{},{steps:[{formatAs:"now"}].concat(Ve.steps)});function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=Re(Re({},je),{},{steps:je.steps.filter((function(e){return"second"!==e.formatAs})).map((function(e){return"minute"===e.formatAs?Re(Re({},e),{},{minTime:60}):e}))}),Me={steps:[{formatAs:"second"},{formatAs:"minute"},{formatAs:"hour"},{formatAs:"day"},{formatAs:"month"},{formatAs:"year"}],labels:["mini","short-time","narrow","short"]};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var We=Ue(Ue({},Me),{},{steps:[{formatAs:"now"}].concat(Me.steps)});function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge=Ke(Ke({},Me),{},{steps:Me.steps.filter((function(e){return"second"!==e.formatAs}))});function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var et=Ze(Ze({},Ge),{},{steps:[{formatAs:"now"}].concat(Ge.steps)});var tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function nt(e){return(nt="function"==typeof Symbol&&"symbol"==tt(Symbol.iterator)?function(e){return void 0===e?"undefined":tt(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":tt(e)})(e)}function ot(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=rt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var o,i,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return r}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function st(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var lt,ut=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.polyfill;st(this,e),"string"==typeof t&&(t=[t]),this.locale=M(t.concat(e.getDefaultLocale()),ue),"undefined"!=typeof Intl&&Intl.NumberFormat&&(this.numberFormat=new Intl.NumberFormat(this.locale)),!1===o?(this.IntlRelativeTimeFormat=Intl.RelativeTimeFormat,this.IntlPluralRules=Intl.PluralRules):(this.IntlRelativeTimeFormat=z,this.IntlPluralRules=z.PluralRules),this.relativeTimeFormatCache=new N,this.pluralRulesCache=new N}var t,n,o;return t=e,(n=[{key:"format",value:function(e,t,n){var o;n||(t&&"string"!=typeof(o=t)&&!W(o)?(n=t,t=void 0):n={}),t||(t=_e),"string"==typeof t&&(t=function(e){switch(e){case"default":case"round":return fe;case"round-minute":return _e;case"approximate":return we;case"time":case"approximate-time":return ye;case"mini":return Me;case"mini-now":return We;case"mini-minute":return Ge;case"mini-minute-now":return et;case"twitter":return je;case"twitter-now":return ze;case"twitter-minute":return Ve;case"twitter-minute-now":return Ne;case"twitter-first-minute":return Fe;default:return we}}(t));var i,r=function(e){if(e.constructor===Date||"object"===nt(t=e)&&"function"==typeof t.getTime)return e.getTime();var t;if("number"==typeof e)return e;throw new Error("Unsupported relative time formatter input: ".concat(nt(e),", ").concat(e))}(e),a=this.getLabels(t.flavour||t.labels),s=a.labels,c=a.labelsType;void 0!==t.now&&(i=t.now),void 0===i&&void 0!==n.now&&(i=n.now),void 0===i&&(i=Date.now());var l=(i-r)/1e3,u=n.future||l<0,d=function(e,t,n,o){var i=e.now||t&&t.now;return i?"string"==typeof i?i:o?i.future:i.past:n&&n.second&&n.second.current?n.second.current:void 0}(s,ue(this.locale).now,ue(this.locale).long,u);if(t.custom){var f=t.custom({now:i,date:new Date(r),time:r,elapsed:l,locale:this.locale});if(void 0!==f)return f}var p=function(e,t,n){var o=Object.keys(t);return n&&o.push("now"),e&&(o=e.filter((function(e){return"now"===e||o.indexOf(e)>=0}))),o}(t.units,s,d),h=n.round||t.round,b=it(ae(t.gradation||t.steps||_e.steps,l,{now:i,units:p,round:h,future:u,getNextStep:!0}),3),_=b[0],m=b[1],w=b[2],y=this.formatDateForStep(r,m,l,{labels:s,labelsType:c,nowLabel:d,now:i,future:u,round:h})||"";return n.getTimeToNextUpdate?[y,ce(r,m,{nextStep:w,prevStep:_,now:i,future:u,round:h})]:y}},{key:"formatDateForStep",value:function(e,t,n,o){var i=this,r=o.labels,a=o.labelsType,s=o.nowLabel,c=o.now,l=o.future,u=o.round;if(t){if(t.format)return t.format(e,this.locale,{formatAs:function(e,t){return i.formatValue(t,e,{labels:r,future:l})},now:c,future:l});var d=t.unit||t.formatAs;if(!d)throw new Error("[javascript-time-ago] Each step must define either `formatAs` or `format()`. Step: ".concat(JSON.stringify(t)));if("now"===d)return s;var f=Math.abs(n)/G(t);t.granularity&&(f=Y(u)(f/t.granularity)*t.granularity);var p=-1*Math.sign(n)*Y(u)(f);switch(0===p&&(p=l?0:-0),a){case"long":case"short":case"narrow":return this.getFormatter(a).format(p,d);default:return this.formatValue(p,d,{labels:r,future:l})}}}},{key:"formatValue",value:function(e,t,n){var o=n.labels,i=n.future;return this.getFormattingRule(o,t,e,{future:i}).replace("{0}",this.formatNumber(Math.abs(e)))}},{key:"getFormattingRule",value:function(e,t,n,o){var i=o.future;if(this.locale,"string"==typeof(e=e[t]))return e;var r=e[0===n?i?"future":"past":n<0?"past":"future"]||e;return"string"==typeof r?r:r[this.getPluralRules().select(Math.abs(n))]||r.other}},{key:"formatNumber",value:function(e){return this.numberFormat?this.numberFormat.format(e):String(e)}},{key:"getFormatter",value:function(e){return this.relativeTimeFormatCache.get(this.locale,e)||this.relativeTimeFormatCache.put(this.locale,e,new this.IntlRelativeTimeFormat(this.locale,{style:e}))}},{key:"getPluralRules",value:function(){return this.pluralRulesCache.get(this.locale)||this.pluralRulesCache.put(this.locale,new this.IntlPluralRules(this.locale))}},{key:"getLabels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"==typeof e&&(e=[e]),e=(e=e.map((function(e){switch(e){case"tiny":case"mini-time":return"mini";default:return e}}))).concat("long");for(var t,n=ue(this.locale),o=ot(e);!(t=o()).done;){var i=t.value;if(n[i])return{labelsType:i,labels:n[i]}}}}])&&ct(t.prototype,n),o&&ct(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}(),dt="en";ut.getDefaultLocale=function(){return dt},ut.setDefaultLocale=function(e){return dt=e},ut.addDefaultLocale=function(e){if(lt)return console.error("[javascript-time-ago] `TimeAgo.addDefaultLocale()` can only be called once. To add other locales, use `TimeAgo.addLocale()`.");lt=!0,ut.setDefaultLocale(e.locale),ut.addLocale(e)},ut.addLocale=function(e){de(e),z.addLocale(e)},ut.locale=ut.addLocale,ut.addLabels=function(e,t,n){var o=ue(e);o||(de({locale:e}),o=ue(e)),o[t]=n};var ft=n(3),pt=n(9),ht=n(10),bt=n(5),_t=n(4),mt=n(16),wt=n(2),yt=n(42),gt=n(43),vt=n(7),$t=n(0),xt=n(60),Ot=n(15),jt=n(12),kt=n(8);ut.addDefaultLocale({locale:"en",long:{year:{previous:"last year",current:"this year",next:"next year",past:{one:"{0} year ago",other:"{0} years ago"},future:{one:"in {0} year",other:"in {0} years"}},quarter:{previous:"last quarter",current:"this quarter",next:"next quarter",past:{one:"{0} quarter ago",other:"{0} quarters ago"},future:{one:"in {0} quarter",other:"in {0} quarters"}},month:{previous:"last month",current:"this month",next:"next month",past:{one:"{0} month ago",other:"{0} months ago"},future:{one:"in {0} month",other:"in {0} months"}},week:{previous:"last week",current:"this week",next:"next week",past:{one:"{0} week ago",other:"{0} weeks ago"},future:{one:"in {0} week",other:"in {0} weeks"}},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:{one:"{0} hour ago",other:"{0} hours ago"},future:{one:"in {0} hour",other:"in {0} hours"}},minute:{current:"this minute",past:{one:"{0} minute ago",other:"{0} minutes ago"},future:{one:"in {0} minute",other:"in {0} minutes"}},second:{current:"now",past:{one:"{0} second ago",other:"{0} seconds ago"},future:{one:"in {0} second",other:"in {0} seconds"}}},short:{year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0} yr. ago",future:"in {0} yr."},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:{one:"{0} qtr. ago",other:"{0} qtrs. ago"},future:{one:"in {0} qtr.",other:"in {0} qtrs."}},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0} mo. ago",future:"in {0} mo."},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0} wk. ago",future:"in {0} wk."},day:{previous:"yesterday",current:"today",next:"tomorrow",past:{one:"{0} day ago",other:"{0} days ago"},future:{one:"in {0} day",other:"in {0} days"}},hour:{current:"this hour",past:"{0} hr. ago",future:"in {0} hr."},minute:{current:"this minute",past:"{0} min. ago",future:"in {0} min."},second:{current:"now",past:"{0} sec. ago",future:"in {0} sec."}},narrow:{year:{previous:"last yr.",current:"this yr.",next:"next yr.",past:"{0}y ago",future:"in {0}y"},quarter:{previous:"last qtr.",current:"this qtr.",next:"next qtr.",past:"{0}q ago",future:"in {0}q"},month:{previous:"last mo.",current:"this mo.",next:"next mo.",past:"{0}mo ago",future:"in {0}mo"},week:{previous:"last wk.",current:"this wk.",next:"next wk.",past:"{0}w ago",future:"in {0}w"},day:{previous:"yesterday",current:"today",next:"tomorrow",past:"{0}d ago",future:"in {0}d"},hour:{current:"this hour",past:"{0}h ago",future:"in {0}h"},minute:{current:"this minute",past:"{0}m ago",future:"in {0}m"},second:{current:"now",past:"{0}s ago",future:"in {0}s"}},now:{now:{current:"now",future:"in a moment",past:"just now"}},mini:{year:"{0}yr",month:"{0}mo",week:"{0}wk",day:"{0}d",hour:"{0}h",minute:"{0}m",second:"{0}s",now:"now"},"short-time":{year:"{0} yr.",month:"{0} mo.",week:"{0} wk.",day:{one:"{0} day",other:"{0} days"},hour:"{0} hr.",minute:"{0} min.",second:"{0} sec."},"long-time":{year:{one:"{0} year",other:"{0} years"},month:{one:"{0} month",other:"{0} months"},week:{one:"{0} week",other:"{0} weeks"},day:{one:"{0} day",other:"{0} days"},hour:{one:"{0} hour",other:"{0} hours"},minute:{one:"{0} minute",other:"{0} minutes"},second:{one:"{0} second",other:"{0} seconds"}}});var St=new ut("en-US");function Pt(){bt.b.currentTabQuery=parseInt(bt.b.currentTabQuery)+1;var e,t,n=parseInt(bt.b.currentTabQuery),o=wt.b.prefix,i=o.substring(o.lastIndexOf("_")+1,o.length);if(e=i,isNaN(e)||(0|(t=parseFloat(e)))!==t)wt.b.prefix=wt.b.prefix+"_"+n;else{var r=wt.b.prefix,a=r.substring(0,r.lastIndexOf("_"));wt.b.prefix=a+"_"+n}bt.b.viewScope.addTab({header:"Query "+n,id:wt.b.prefix,close:!0,width:150,body:zt(wt.b.prefix)}),$$("tabs").getTabbar().setValue(wt.b.prefix)}function zt(e,t){wt.b.countPage=parseInt(e.split("_")[2])||0;var n=void 0,o=[],i={view:"toolbar",css:"z_query_toolbar",id:e+"_tb",elements:[{view:"button",type:"icon",css:"zmdi_padding",id:e+"_new_query_btn",autowidth:!0,tooltip:"Open new Query",icon:"mdi mdi-play-box-multiple-outline",click:function(){Pt()}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_showhide_db",autowidth:!0,tooltip:"Show database content",icon:"mdi mdi-forwardburger",click:function(){var t=$$(e+"_db_tree_panel");t.isVisible()?(t.hide(),this.config.icon="mdi mdi-forwardburger",this.config.tooltip={template:"Show database content"},this.refresh(),y(!1),$$(e+"_viewdata_btn").disable()):(t.show(),this.config.icon="mdi mdi-backburger",this.config.tooltip={template:"Hide database content"},this.refresh(),y(!0))}},{view:"combo",id:e+"_source_combo",placeholder:"Source DB",width:200,options:{url:_t.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){var t,n;t=$$(e+"_source_combo"),(n=t.getPopup().getList()).clearAll(),t.setValue(""),t.getPopup().getList().unselect(),n.load(_t.a+"/content?type=2&ls=true")}}},on:{onChange:function(t,n){webix.storage.local.put($t.j,t),t?$$(e+"_run_btn").enable():$$(e+"_run_btn").disable(),$$(e+"_db_tree_panel").isVisible()&&y(!0)}}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_dbconn_toggle",autowidth:!0,tooltip:"Manage DB Connection",icon:"mdi mdi-connection",click:function(){this.$scope.ui(yt.QueryDatabase).show()}},{view:"toggle",type:"icon",autowidth:!0,css:"zmdi_padding",tooltip:"Show multi Connection",id:e+"_multiconn_toggle",icon:"mdi mdi-playlist-play",on:{onChange:function(e){f(e),webix.storage.local.put($t.o,e)}}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-table",id:e+"_viewdata_btn",tooltip:"View data selected tree or search",disabled:!0,autowidth:!0,click:function(){var t=$$(e+"_source_combo").getValue(),o=$$(e+"_db_tree").getSelectedId().split("_")[0];if(o)return webix.message({text:"Selected table view not defined",type:"error"}),!1;o=n.split("_")[0],h(t,o)}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-play",id:e+"_run_btn",tooltip:"Execute (Ctrl+Enter or F5)",disabled:!0,autowidth:!0,click:function(){v($$(e+"_source_combo").getValue())}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-playlist-check",tooltip:"Auto Format",autowidth:!0,click:function(){O()}},{view:"button",tooltip:"Bookmark",id:e+"_bookmark_btn",type:"icon",css:"zmdi_padding",icon:"mdi mdi-bookmark-outline",autowidth:!0,popup:{view:"contextmenu",data:[],submenuConfig:{width:300},on:{onBeforeShow:function(){var t=this;this.clearAll(),webix.ajax().get(_t.a+"/content?type=4&limit=10").then((function(n){var o=[];o.push({id:e+"_add_bookmark",value:"<span class='mdi mdi-star-plus-outline webix_icon'></span>  Add Bookmark"}),o.push({id:e+"_manage_bookmark",value:"<span class='webix_icon'></span>  Manage Bookmark"});var i=n.json().data;i.length>0?(o.push({$template:"Separator"}),t.config.width=300):t.config.width=160,t.refresh(),i.forEach((function(e,t){var n=t+1;o.push({id:e.id,value:n+". "+e.title})})),t.parse(o)}))},onMenuItemClick:function(t){if(t==e+"_add_bookmark"){var n={title:"",content:$$(e+"_sql_editor").getValue(),user_id:xt.userId,type:4};webix.ajax().post(_t.a+"/content",n,(function(e){webix.message({text:"Bookmark added.",type:"success"})}))}else t==e+"_manage_bookmark"?_():webix.ajax().get(_t.a+"/content/"+t+"?type=4").then((function(t){$$(e+"_sql_editor").setValue(t.json().data.content)}))}}}},{view:"toggle",type:"icon",css:"zmdi_padding",icon:"mdi mdi-history",tooltip:"History",id:e+"_history_toggle",autowidth:!0,on:{onChange:function(e){d(e),webix.storage.local.put($t.m,e)}}},{view:"text",css:"search_suggest",id:e+"_database_search",placeholder:"Search name..",width:300,suggest:{keyPressTimeout:500,body:{dataFeed:function(t,n){var o=$$(e+"_source_combo").getValue();if(o){if(t.length<3){var i=$$(e+"_database_search");return webix.extend(i,webix.OverlayBox),i&&$$(i).hideOverlay(),void this.clearAll()}this.clearAll(),this.load(pt.a+"/content_search?id="+o+"&root=0&filter[value]="+t)}else webix.message({text:"Ops, select source DB first",type:"error"})},on:{onBeforeLoad:function(){var t=$$(e+"_database_search");webix.extend(t,webix.OverlayBox),t&&t.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:2.5; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var t=$$(e+"_database_search");webix.delay((function(){webix.extend(t,webix.OverlayBox),t&&$$(t).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(e){P(0,e.id)}}},on:{onKeyPress:function(t,n){9==t&&$$(e+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"text",css:"search_suggest",id:e+"_database_search_content",placeholder:"Search content and press enter..",tooltip:"Type and enter",width:300,hidden:!0,on:{onKeyPress:function(t,n){if(13==t){var o=$$(e+"_source_combo").getValue(),i=this.getValue(),r=$$(e+"_page_panel");webix.extend(r,webix.ProgressBar),r.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),r.disable(),webix.ajax().get(pt.a+"/content_search?id="+o+"&root=0&filter[value]="+i+"&type=content").then((function(t){var n=t.json().data;if(void 0!==n){$$(e+"_sidemenu_right").isVisible()&&$$(e+"_sidemenu_right").hide(),$$(e+"_history_preview").isVisible()&&($$(e+"_history_preview").hide(),$$(e+"_sql_editor").show()),$$(e+"_history_toggle").setValue(!1),$$(e+"_multiconn_toggle").setValue(!1),$$(e+"_search_content_right").show();var o=$$(e+"_result_content");o.clearAll(),o.parse(n),o.registerFilter($$(e+"_filter_content"),{columnId:"content_name"},{getValue:function(e){return e.getValue()},setValue:function(e,t){e.setValue(t)}})}else{var i=$$(e+"_result_content");i&&i.clearAll(),webix.message({text:"No record found",type:"error"})}r.hideProgress(),r.enable()})).fail((function(e){r.hideProgress(),r.enable(),webix.message({text:Object(kt.a)(e),type:"error"})}))}}}},{view:"icon",icon:"mdi mdi-magnify",id:e+"_search_more_btn",tooltip:"Search by name",popup:{view:"popup",width:120,body:{view:"list",data:[{id:e+"_sname",name:"name",icon:"mdi mdi-magnify",tooltip:"Search by name"},{id:e+"_scontent",name:"content",icon:"mdi mdi-text-search",tooltip:"Search by content"}],template:"<span class='#icon#'></span> #name#",autoheight:!0,select:!0,on:{onItemClick:function(t){this.getParentView().hide();var n=$$(e+"_search_more_btn"),o=this.getItem(t);n.config.icon=o.icon,n.config.tooltip=o.tooltip,n.refresh();var i=$$(e+"_database_search"),r=$$(e+"_database_search_content");t==e+"_sname"?(i.show(),i.focus(),r.hide()):t==e+"_scontent"&&(i.hide(),r.show(),r.focus())}}}}},{view:"button",type:"icon",icon:"mdi mdi-magnify",css:"zmdi_padding",id:e+"_search_detach_btn",tooltip:"Quick Search",autowidth:!0,hidden:!0,click:function(){m()}},{view:"icon",icon:"mdi mdi-share-variant-outline",css:"zmdi_padding",id:e+"_share_btn",tooltip:"Share to other users",autowidth:!0,click:function(){p()}},{},{view:"icon",icon:"mdi mdi-help-circle-outline",id:e+"_help_btn",tooltip:"Show help, shortcut",autowidth:!0,click:function(){this.$scope.ui(gt.QueryHelp).show()}},{view:"icon",icon:"mdi mdi-dots-vertical",id:e+"_setting_more",tooltip:"More setting..",autowidth:!0,click:function(){w()}}]},r=void 0,a={id:e+"_db_tree_panel",hidden:!0,rows:[{cols:[{view:"text",placeholder:"filter..",id:e+"_db_tree_filter",css:"z_db_tree_filter",on:{onTimedKeyPress:function(){$$(e+"_db_tree").filter("#value#",this.getValue())}}},{view:"icon",toolbar:"Refresh current selected DB",autowidth:!0,id:e+"_db_tree_filter_reload",icon:"mdi mdi-reload",click:function(){y(!0)}}]},{view:"tree",width:250,id:e+"_db_tree",css:"z_db_tree",select:!0,threeState:!0,type:{icon:function(e,t){return e.open&&e.$count<=0?'<div class=" webix_icon mdi mdi-sync spin_mdi"></div>':'<div class="webix_tree_'+(e.$count?e.open?"open":"close":"none")+'"></div>'},my_folder:function(e){var t=e.id.split("_")[1];return"d"==t?"<span class='webix_icon mdi mdi-database-outline "+(e.open?"z_tree_d_open":"")+"'></span>":"s"==t?"<span class='webix_icon mdi mdi-rhombus-split-outline "+(e.open?"z_tree_s_open":"")+"'></span>":"t"==t?"<span class='webix_icon mdi mdi-table-large "+(e.open?"z_tree_t_open":"")+"'></span>":"u"==t?"<span class='webix_icon mdi mdi-table z_tree_u_open z_tree_u_open'></span>":"f"==t?"<span class='webix_icon mdi mdi-script-text-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"r"==t?"<span class='webix_icon mdi mdi-script-text-play-outline "+(e.open?"z_tree_r_open":"")+"'></span>":"v"==t?"<span class='webix_icon mdi mdi-view-grid-outline "+(e.open?"z_tree_v_open":"")+"'></span>":"y"==t?"<span class='webix_icon mdi mdi-view-module-outline z_tree_y_open z_tree_y_open'></span>":"g"==t?"<span class='webix_icon mdi mdi-script-outline z_tree_g_open'></span>":"w"==t?"<span class='webix_icon mdi mdi-script-outline z_tree_w_open'></span>":"<span class='webix_icon mdi mdi-radiobox-blank'></span>"}},filterMode:{showSubItems:!1,level:1},template:"{common.icon()} {common.my_folder()} <span>#value#</span>",on:{onAfterSelect:function(e){for(r=e;this.getParentId(r);)r=this.getParentId(r);this.getItem(r).value,P(r,e)},onItemClick:function(t){var n=t,o=this.getItem(t);for(bt.b.currentDBSelected=o.value;this.getParentId(n);)n=this.getParentId(n);this.getItem(n).value,"u"==t.split("_")[1]?$$(e+"_viewdata_btn").enable():$$(e+"_viewdata_btn").disable()},onItemDblClick:function(e){this.isBranchOpen(e)?this.close(e):this.open(e)},onBeforeContextMenu:function(e,t,n){var o=e.split("_")[1];return"g"!=o&&"r"!=o&&"y"!=o||webix.html.preventEvent(t)},onAfterContextMenu:function(e,t,n){for(this.select(e),r=e;this.getParentId(r);)r=this.getParentId(r);e},onDataRequest:function(e){return g(this,e),!1},onBeforeLoad:function(){webix.extend(this,webix.OverlayBox),this.showOverlay("<div style='margin-top: 20px'>Loading...</div>")},onAfterLoad:function(){this.hideOverlay()},onAfterRender:webix.once((function(){var t=this;this.$scope.ui({view:"contextmenu",data:[],on:{onBeforeShow:function(){this.clearAll();var t=[],n=$$(e+"_db_tree"),o=n.getSelectedId().split("_")[1];"s"==o||"t"==o||"f"==o||"r"==o||"v"==o?t.push({id:"refresh",value:"Refresh"}):"u"==n.getSelectedId().split("_")[1]&&(t.push({id:"view_data_all",value:"View Data All Rows"}),t.push({id:"view_data_last100",value:"View Data Last 100"})),this.parse(t)},onItemClick:function(n){var o=$$(e+"_source_combo").getValue(),i=t.getSelectedId(),r=i.split("_")[0];"view_data_all"==n?h(o,r):"view_data_last100"==n?h(o,r,1):"refresh"==n&&g($$(e+"_db_tree"),i,!0)}}}).attachTo(this)}))}}]},s={type:"line",id:e+"_history_preview",hidden:!0,cols:[{width:100,css:{background:"#fff"},rows:[{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-close",autowidth:!0,tooltip:"Close",click:function(){$$(e+"_history_preview").hide(),$$(e+"_sql_editor").show()}}]},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-arrange-send-backward",autowidth:!0,tooltip:"Copy to query editor",click:function(){$($$(e+"_history_content").getValue()),$$(e+"_sql_editor").focus()}}]},{cols:[{},{view:"button",type:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:e+"_copy_clipboard",tooltip:"Copy to clipboard",click:function(){var t=this;this.hide();var n=$$(e+"_copy_clipboard_done");n.show(),setTimeout((function(){t.show(),n.hide()}),1500),Object(Ot.a)($$(e+"_history_content").getValue())}},{view:"button",width:55,hidden:!0,id:e+"_copy_clipboard_done",label:'<svg class="animated-check" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'}]},{}]},{css:"z_console_editor_panel",rows:[{view:"monaco-editor",css:"z_console_editor",id:e+"_history_content",language:"text",lineNumbers:"off",fontSize:"12px",borderless:!0,renderLineHighlight:"none"}]}]},c=!1;var l={id:e+"_sidemenu_right",css:"z_query_sidemenu_right",hidden:!0,width:300,rows:[{id:e+"_list_multi",hidden:!0,rows:[{view:"toolbar",cols:[{view:"label",label:"DB Connections"},{}]},{view:"list",select:!1,width:300,type:{height:"auto"},url:_t.a+"/content?type=2&ls=true",tooltip:webix.template("#conn_name#"),template:"#value# <span style='float:right;width:50px;line-height:1.3' class='run_button z_multi_conn_icon webix_button webix_icon mdi mdi-play hover_only'></span>",onClick:{run_button:function(e,t,n){v(t)}}}]},{view:"resizer",css:"z_resizer_hor_thin",id:e+"_right_resizer",hidden:!0},{id:e+"_history",hidden:!0,rows:[{view:"toolbar",cols:[{view:"label",label:"History",width:50},{view:"text",placeholder:"filter..",keyPressTimeout:800,on:{onTimedKeyPress:function(){x(c?1:0,this.getValue())}}},{view:"icon",icon:"mdi mdi-chevron-down",tooltip:"Other options",click:function(){$$(e+"_history_tb_more").isVisible()?($$(e+"_history_tb_more").hide(),this.config.icon="mdi mdi-chevron-down"):($$(e+"_history_tb_more").show(),this.config.icon="mdi mdi-chevron-up"),this.refresh()}}]},{view:"toolbar",id:e+"_history_tb_more",hidden:!0,height:32,cols:[{view:"icon",icon:"mdi mdi-refresh",css:"z_primary_color z_fontsize_18",tooltip:"Refresh",click:function(){x(c?1:0)}},{view:"icon",icon:"mdi mdi-chevron-left",css:"z_primary_color z_fontsize_18",tooltip:"Previous page",click:function(){$$(e+"_pager_history").select("prev")}},{view:"icon",icon:"mdi mdi-chevron-right",tooltip:"Next page",css:"z_primary_color z_fontsize_18",click:function(){$$(e+"_pager_history").select("next")}},{},{view:"icon",icon:"mdi mdi-text",tooltip:"Admin: Show all users history",css:"z_primary_color z_fontsize_18",id:e+"_all_history",hidden:!0,click:function(){this.config.icon=c?"mdi mdi-text":"mdi mdi-text-long",this.refresh(),c=!c;var t,n,o=$$(e+"_history_list");o.config.columns=(t=[{id:"title",header:"",fillspace:!0}],n=[{adjust:!0,template:function(e,t,n,o,i){if(e.content)return"<span style='color: grey;font-style:italic;font-size:13;float:right;'>\n          "+St.format(new Date(e.created_at),"mini")+"</span>"}}],c?[].concat(t,[{id:"fullname",header:"",width:100}],n):[].concat(t,n)),o.refreshColumns(),x(c?1:0)}},{view:"icon",icon:"mdi mdi-delete-sweep-outline",css:"z_primary_color z_fontsize_18",tooltip:"Clear all History<br>(history auto clear after 30 days)",click:function(){webix.message({text:"Not implement yet",type:"debug"})}}]},{view:"datatable",id:e+"_history_list",css:"z_fade_list z_list_cursor_pointer",columns:[{fillspace:!0,template:function(e){return e.title.match(/(.+)/)[0]}},{adjust:!0,template:function(e,t,n,o,i){if(e.content)return"<span style='color: grey;font-style:italic;font-size:13;float:right;'>\n                    "+St.format(new Date(e.created_at),"mini")+"</span>"}}],pager:{id:e+"_pager_history",apiOnly:!0,size:100},select:!0,headerRowHeight:-1,url:_t.a+"/content?type=3",on:{onBeforeLoad:function(){webix.extend(this,webix.OverlayBox),this.showOverlay("<div style='margin-top: 20px'>Loading...</div>")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(t){$$(e+"_history_preview").show(),$$(e+"_sql_editor").hide();var n=this.getItem(t);$$(e+"_history_content").setValue(n.content),$$(e+"_history_content").getEditor(!0).then((function(e){e.updateOptions({readOnly:!0})}))},onItemDblClick:function(t){$(this.getItem(t).content),$$(e+"_sql_editor").focus()}}}],gravity:2}]},u={id:e+"_search_content_right",hidden:!0,width:400,rows:[{view:"toolbar",cols:[{view:"label",label:"Result Content",width:100},{view:"text",id:e+"_filter_content",placeholder:"Filter..",on:{onTimedKeyPress:function(){$$(e+"_result_content").filterByAll()}}},{view:"icon",icon:"mdi mdi-close",tooltip:"Close",width:50,click:function(){$$(e+"_search_content_right").hide()}}]},{view:"datatable",select:!0,resizeColumn:!0,id:e+"_result_content",columns:[{id:"content_schema",header:"Schema"},{id:"content_name",header:"Name",fillspace:!0},{id:"ttype",header:"Type",width:50}],on:{onItemClick:function(e){P(0,e.row)}}}]};function d(t){$$(e+"_search_content_right").isVisible()&&$$(e+"_search_content_right").hide(),$$(e+"_sidemenu_right").isVisible()||$$(e+"_sidemenu_right").show(),t?($$(e+"_history").show(),x()):($$(e+"_history").hide(),$$(e+"_list_multi").isVisible()||$$(e+"_sidemenu_right").hide()),$$(e+"_list_multi").isVisible()&&$$(e+"_history").isVisible()?$$(e+"_right_resizer").show():$$(e+"_right_resizer").hide(),$$(e+"_history_toggle").setValue(t)}function f(t){$$(e+"_search_content_right").isVisible()&&$$(e+"_search_content_right").hide(),$$(e+"_sidemenu_right").isVisible()||$$(e+"_sidemenu_right").show(),t?$$(e+"_list_multi").show():($$(e+"_list_multi").hide(),$$(e+"_history").isVisible()||$$(e+"_sidemenu_right").hide()),$$(e+"_list_multi").isVisible()&&$$(e+"_history").isVisible()?$$(e+"_right_resizer").show():$$(e+"_right_resizer").hide(),$$(e+"_multiconn_toggle").setValue(t)}var p=function(){webix.ui({view:"window",modal:!0,id:e+"_win_share_user",width:300,height:350,position:"center",move:!0,head:{view:"toolbar",cols:[{view:"label",label:"Share to user"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close me",align:"right",click:function(){$$(e+"_win_share_user").destructor()}}]},body:{rows:[{id:e+"_usershare_table",view:"datatable",css:"z_usershare_table",columns:[{id:"fullname",header:"Name",fillspace:!0}],select:"row",multiselect:!0,url:jt.c+"/users?type=6"},{view:"toolbar",cols:[{},{view:"button",value:"Share",autowidth:!0,css:"webix_primary",click:function(){var t=$$(e+"_usershare_table").getSelectedId(!0).join(),n=$$(e+"_sql_editor").getValue();if(t.length>0&&""!=n)b(t,n);else{if(""==n.trim())return webix.message({text:"Opss, Nothing to share !",type:"error"});webix.message({text:"Please select user",type:"error"})}}}]}]}}).show()},h=function(t,n,o){webix.ajax().get(wt.c+"/table_name?id="+t+"&&oid="+n).then((function(t){var n=t.json(),i="LIMIT 1000";1==o&&(i="ORDER BY id DESC LIMIT 100");var r="SELECT * FROM "+n.tableschema+"."+n.tablename+" "+i;$$(e+"_sql_editor").setValue(r),v($$(e+"_source_combo").getValue())}))},b=function(t,n){if(t.split(",").length>1)webix.message({text:"Not support multiple user selection yet",type:"error"});else{var o={share_to:t,content:n};webix.ajax().post(""+mt.b,o,(function(t){webix.message({text:"Share success",type:"success"}),$$(e+"_win_share_user").close()}))}},_=function(){webix.ui({view:"window",modal:!0,resize:!0,id:e+"_win_bookmark_manage",width:900,height:700,position:"center",move:!0,head:{view:"toolbar",cols:[{view:"label",label:"Bookmark Manager"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close me",align:"right",click:function(){$$(e+"_win_bookmark_manage").destructor()}}]},body:{cols:[{rows:[{view:"text",placeholder:"filter..",id:e+"_bm_list_filter",css:"z_db_tree_filter",on:{onTimedKeyPress:function(){$$(e+"_bm_list").filter("#value#",this.getValue())}}},{view:"list",width:250,drag:"order",template:"<div style='cursor: pointer;'>#title#</div>",id:e+"_bm_list",select:!0,url:_t.a+"/content?type=4",on:{onItemClick:function(t){$$(e+"_bm_toolbar").show(),$$(e+"_bm_sql_editor").show(),$$(e+"_bm_editor_tmpl").hide();var n=this.getItem(t);$$(e+"_bm_sql_editor").setValue(n.content),$$(e+"_bm_title").setValue(n.title)},onItemDblClick:function(t){var n=this.getItem(t);$$(e+"_sql_editor").setValue(n.content),$$(e+"_win_bookmark_manage").destructor()}}}]},{view:"resizer",resizeColumn:{size:1},css:"z_resizer_small",id:"resizer"},{rows:[{view:"toolbar",id:e+"_bm_toolbar",hidden:!0,cols:[{view:"button",type:"icon",icon:"mdi mdi-content-save-outline",tooltip:"Save Changes",autowidth:!0,css:"zmdi_padding",click:function(){var t={title:$$(e+"_bm_title").getValue(),content:$$(e+"_bm_sql_editor").getValue(),user_id:xt.userId,type:4},n=$$(e+"_bm_list"),o=n.getSelectedId();webix.ajax().put(_t.a+"/content/"+o,t,(function(e){n.clearAll(),n.load(_t.a+"/content?type=4","json",(function(){n.select(o)}),!0),webix.message({text:"<strong>"+t.title+"</strong> saved.",type:"success"})}))}},{view:"button",type:"icon",icon:"mdi mdi-delete-outline",tooltip:"Delete",autowidth:!0,css:"zmdi_padding",click:function(){var t=$$(e+"_bm_list"),n=t.getSelectedId(),o=t.getItem(n);webix.ajax().del(_t.a+"/content/"+n,(function(n){t.clearAll(),t.load(_t.a+"/content?type=4","json",(function(){$$(e+"_bm_title").setValue(""),$$(e+"_bm_sql_editor").setValue(""),$$(e+"_bm_toolbar").hide(),$$(e+"_bm_sql_editor").hide(),$$(e+"_bm_editor_tmpl").show()}),!0),webix.message({text:"<strong>"+o.title+"</strong> deleted.",type:"error"})}))}},{view:"text",placeholder:"Title..",id:e+"_bm_title",name:"bm_title"}]},{view:"monaco-editor",id:e+"_bm_sql_editor",hidden:!0,language:"sql"},{id:e+"_bm_editor_tmpl",template:"<div style='color: grey;height:100%;text-align: center;padding-top: 30%;'>Select bookmark on the left</div>"}]}]}}).show()},m=function(){$$(e+"_search_detach_win")&&$$(e+"_search_detach_win").close();var t=$$(e+"_page_panel"),n={view:"text",css:"search_suggest_detach",id:e+"_database_search_detach",placeholder:"Search..",tooltip:"Escape to close",width:500,height:40,suggest:{keyPressTimeout:500,css:"search_suggest_detach_item",body:{template:"#value#",type:{height:38},dataFeed:function(t,n){var o=$$(e+"_source_combo").getValue();if(o){if(t.length<3){var i=$$(e+"_database_search_detach");return webix.extend(i,webix.OverlayBox),i&&$$(i).hideOverlay(),void this.clearAll()}this.clearAll(),this.load(pt.a+"/content_search?id="+o+"&root=0&filter[value]="+t).then((function(e){setTimeout((function(){wt.a.clearAll(),wt.a.parse(e.json().data)}),500)}))}else webix.message({text:"Ops, select source DB first",type:"error"})},on:{onBeforeLoad:function(){var t=$$(e+"_database_search_detach");webix.extend(t,webix.OverlayBox),t&&t.showOverlay("<span style='display:block;text-align:right;padding-right:15px;height:100%;line-height:1.8; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var t=$$(e+"_database_search_detach");webix.delay((function(){webix.extend(t,webix.OverlayBox),t&&$$(t).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(e){P(0,e.id,t)}}},on:{onKeyPress:function(t,n){if(9==t&&$$(e+"_sql_editor").getEditor(!0).then((function(e){return e.focus()})),13==t&&""==this.getValue()&&wt.a.count()){var o=$$(e+"_search_detach_history");o.show(),webix.UIManager.setFocus(o),o.select(o.getFirstId())}}}},o=0;$$("app:sidebar").config.collapsed&&(o=$$("app:sidebar").$width+100),webix.ui({view:"fadeInWindow",head:!1,modal:!0,body:{padding:2,rows:[n,{view:"list",height:300,id:e+"_search_detach_history",hidden:!0,template:"#value#",select:!0,data:wt.a,on:{onItemClick:function(e){P(0,e,t)},onKeyPress:function(e,n){13==e&&P(0,this.getSelectedId(),t)}}}]},id:e+"_search_detach_win",move:!0,padding:10,top:100,left:$$(e+"_page_panel").$width/2-90-o,on:{onShow:function(){$$(e+"_database_search_detach").focus()}}}).show()},w=function(){webix.ui({view:"sidemenu",width:200,position:"right",state:function(t){var n=$$(e+"_tb").$height;t.top=n,t.height-=n},body:{rows:[{view:"toolbar",cols:[{view:"label",tooltip:"Current setting store in browser local storage",label:"<span style='padding-left:4px;color:#1ca1c1'>Setting</span>"}]},{view:"checkbox",labelRight:"Show Data type",id:e+"_show_data_type",tooltip:"Show data type",name:"ck_show_dtype",labelWidth:8,value:0,on:{onChange:function(e,t){wt.b.isDataType=e,webix.storage.local.put($t.i,e)}}},{view:"checkbox",id:e+"_detach_quick_search",labelRight:"Detach Quick Search",tooltip:"Detach Quick Search",name:"ck_detach_search",labelWidth:8,value:0,on:{onChange:function(e,t){wt.b.isSearchDetach=e,j(),webix.storage.local.put($t.p,e)}}},{view:"checkbox",id:e+"_show_minimap",labelRight:"Show minimap",tooltip:"Show minimap scrollbar",name:"ck_show_minimap",labelWidth:8,value:0,on:{onChange:function(e,t){wt.b.isMinimap=e,k(),webix.storage.local.put($t.n,e)}}},{view:"checkbox",id:e+"_disable_history",labelRight:"Disable History",tooltip:"Disable capture log history",name:"ck_disable_history",labelWidth:8,value:0,on:{onChange:function(e,t){wt.b.isDisableHistory=e,webix.storage.local.put($t.u,e)}}},{view:"checkbox",id:e+"_adjust_cols",labelRight:"AutoFit Columns \n<span style='font-style:italic;'>(Query result a bit slower)</span>",tooltip:"Auto adjust column size",css:"multiline_label_checkbox",name:"ck_adjust_cols",labelWidth:8,value:wt.b.isAdjustCols,on:{onChange:function(e,t){wt.b.isAdjustCols=e,webix.storage.local.put($t.h,e)}}},{template:""}]},on:{onShow:function(){$$(e+"_show_data_type").blockEvent(),$$(e+"_detach_quick_search").blockEvent(),$$(e+"_show_minimap").blockEvent();var t=webix.storage.local.get($t.i);t&&$$(e+"_show_data_type").setValue(t);var n=webix.storage.local.get($t.p);n&&$$(e+"_detach_quick_search").setValue(n);var o=wt.b.isMinimap||webix.storage.local.get($t.n);o&&$$(e+"_show_minimap").setValue(o);var i=webix.storage.local.get($t.u);i&&$$(e+"_disable_history").setValue(i);var r=webix.storage.local.get($t.h);r&&$$(e+"_adjust_cols").setValue(r),$$(e+"_show_data_type").unblockEvent(),$$(e+"_detach_quick_search").unblockEvent(),$$(e+"_show_minimap").unblockEvent(),$$(e+"_disable_history").unblockEvent(),$$(e+"_adjust_cols").unblockEvent()},onHide:function(){this.close()}}}).show()},y=function(t){var n=$$(e+"_source_combo").getValue(),o=$$(e+"_db_tree");if(o.clearAll(),t){var i=$$(e+"_db_tree_filter_reload");i.config.icon="mdi mdi-refresh-circle spin_mdi_right z_mdi_splin_color",i.refresh(),o.load(pt.a+"?id="+n+"&t=1").then((function(e){setTimeout((function(){i.config.icon="mdi mdi-reload",i.refresh()}),600)}))}},g=function(t,n,o){var i=$$(e+"_db_tree_filter_reload");i.config.icon="mdi mdi-refresh-circle spin_mdi_right z_mdi_splin_color",i.refresh();var a=void 0;if(void 0===o){for(var s=n;t.getParentId(s);)s=t.getParentId(s);a=s}else a=r;var c=t,l=$$(e+"_source_combo").getValue();t.parse(webix.ajax().get(pt.a+"/schema?id="+l+"&root="+a+"&parent="+n).then((function(e){var t=c.getItem(n);return setTimeout((function(){t.$count<=0&&(t.open=!1,c.refresh(n)),i.config.icon="mdi mdi-reload",i.refresh()}),600),e.json()})))},v=function(t){var n=$$(e+"_sql_editor"),i=n.getEditor(),r=i.getSelection(),a=i.getModel().getValueInRange(r),s=0,c=!1,l="";a.length>0?(c=!0,l=a,s=r.positionLineNumber):l=n.getValue();var u={source_id:t,sql:l,dtype:wt.b.isDataType,history:wt.b.isDisableHistory,adjustcol:wt.b.isAdjustCols},d=$$(e+"_source_combo").getValue();if(""!=u.sql&&d){(new Date).getTime();webix.extend($$(e+"_page_panel"),webix.OverlayBox),$$(e+"_page_panel").showOverlay('<div class="loading-content"><div class="loading-ico no-border"></div>\n        <span id=\''+e+"_z_cancel_query' class='mdi mdi-close-circle-outline' style='\n        position: absolute;\n        bottom: 15px;\n        right: 15px;\n        z-index: 999;\n        font-size: 13px;\n        cursor:pointer;\n        color: #e15353;\n        '>&nbsp;Cancel</span>\n        <span>Running query...</span></div>"),document.getElementById(e+"_z_cancel_query").onclick=function(){alert("Not implemented yet"),$$(e+"_page_panel").hideOverlay()},webix.ajax().post(wt.c+"/run",u).then((function(t){var n=t.json(),i=!1;n.error||n.data.map((function(e){return e.hasOwnProperty("id")&&(e.id+="<i style='color:white;'>__"+webix.uid()+"</i>"),e}));var r={type:"clean",css:"z_tabbar_result",rows:[{cols:[{borderless:!0,view:"tabbar",width:310,height:30,id:e+"_tabbar",value:"listView",multiview:!0,options:[{value:"Result",id:e+"_result",width:150},{value:"Console",id:e+"_console",width:150}],on:{onChange:function(t){t==e+"_console"?($$(e+"_copy_result_clipboard").show(),$$(e+"_result_scrolldown").show(),$$(e+"_result_scrollup").show(),$$(e+"_save_result").hide(),$$(e+"_addrow_result").hide(),$$(e+"_addrow_result_spacer").hide(),$$(e+"_removerow_result").hide(),$$(e+"_removerow_result_spacer").hide(),$$(e+"_console").getEditor(!0).then((function(e){e.revealLineInCenter(e.getModel().getLineCount())}))):(i&&($$(e+"_save_result").show(),$$(e+"_addrow_result").show(),$$(e+"_addrow_result_spacer").show(),$$(e+"_removerow_result").show(),$$(e+"_removerow_result_spacer").show()),$$(e+"_copy_result_clipboard").hide(),$$(e+"_result_scrolldown").hide(),$$(e+"_result_scrollup").hide())}}},{width:10},{view:"icon",icon:"mdi mdi-content-save-outline",autowidth:!0,hidden:!0,id:e+"_save_result",tooltip:"Save changes",css:"z_icon_color_primary z_icon_size_17",click:function(){var t=$$(e+"_result");t.editStop();var n=t.$values_cache;if(void 0!==n){n.length>0&&n.forEach((function(t){$$(e+"_result").removeCellCss(t.id,t.column,"z_changes_cell_result",!1)}));var o=u.sql.toLowerCase().split("from").pop().trim().split(" "),i=Array.from(new Set(n.map((function(e){return e.id})))).map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e.id<1})),r=[];i.forEach((function(e){r.push(t.getItem(e.id))}));var a=n.filter((function(e){return e.id>0})),s=[].concat(r,a);if(n.length>0){var c={source_id:u.source_id,table_name:o[0],data:JSON.stringify(s)};webix.ajax().post(ht.b+"/save_result",c).then((function(e){webix.message({text:"Data saved",type:"success"})})),t.$values_cache=[]}else webix.message({text:"No data to save",type:"error"})}else webix.message({text:"Update first, no data to save",type:"error"})}},{width:10,id:e+"_addrow_result_spacer"},{view:"icon",icon:"mdi mdi-table-row-plus-after",autowidth:!0,hidden:!0,id:e+"_addrow_result",tooltip:"Add new row",css:"z_icon_color_primary z_icon_size_18",click:function(){$$(e+"_result").add({id:-webix.uid()},0)}},{width:10,id:e+"_removerow_result_spacer"},{view:"icon",icon:"mdi mdi-table-row-remove",autowidth:!0,hidden:!0,id:e+"_removerow_result",tooltip:"Remove selected row",css:"z_icon_color_primary z_icon_size_18",click:function(){webix.message({text:"Not implement yet",type:"debug"})}},{view:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:e+"_copy_result_clipboard",tooltip:"Copy result to clipboard",css:"z_icon_color_primary z_icon_size_17",click:function(){var t=this,n=$$(e+"_console").getValue().split("--end:notice:--")[0];if(void 0!==n){this.hide();var o=$$(e+"_copy_result_clipboard_done");o.show(),setTimeout((function(){t.show(),o.hide()}),1500),Object(Ot.a)(n)}else webix.message({text:"No content to copy",type:"debug"})}},{view:"template",autowidth:!0,hidden:!0,width:31,css:{"padding-top":"3px"},borderless:!0,id:e+"_copy_result_clipboard_done",template:'<svg class="animated-check" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'},{width:10},{view:"icon",icon:"mdi mdi-arrow-collapse-down",autowidth:!0,hidden:!0,id:e+"_result_scrolldown",tooltip:"Scroll to bottom",css:"z_icon_color_primary z_icon_size_16",click:function(){$$(e+"_console").getEditor(!0).then((function(e){e.revealLineInCenter(e.getModel().getLineCount())}))}},{width:10},{view:"icon",icon:"mdi mdi-arrow-collapse-up",autowidth:!0,hidden:!0,id:e+"_result_scrollup",tooltip:"Scroll to top",css:"z_icon_color_primary z_icon_size_16",click:function(){$$(e+"_console").getEditor(!0).then((function(e){e.revealLineInCenter(1)}))}},Object(ft.f)(e+"_result_row_pager"),{width:10},{view:"button",label:"X",autowidth:!0,click:function(){$$(e+"_resizer").hide(),$$(e+"_result_scrollview").hide()}}]},{animate:!1,cells:[{},{view:"datatable",datafetch:ft.e,select:"row",editable:!0,id:e+"_result",css:"z_query_result_grid",columns:n.config,resizeColumn:!0,data:n.data,maxColumnWidth:260,resizeRow:!0,pager:e+"_result_row_pager",on:{onAfterLoad:function(){},onItemClick:function(t,n,o){!function(t,n){if(-1!==["json","jsonb","text","varchar"].indexOf(t)){var o=function(t,n){webix.ui({view:"window",modal:!0,resize:!0,id:e+"_win_detail_cell",width:600,height:400,position:"center",move:!0,head:{view:"toolbar",cols:[{view:"label",label:"Detail Cell",width:70},{view:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:e+"_copy_detail_cell",tooltip:"Copy to clipboard",css:"z_icon_color_primary z_icon_size_17",click:function(){var t=this;this.hide();var o=$$(e+"_copy_detail_cell_done");o.show(),setTimeout((function(){t.show(),o.hide()}),1500),Object(Ot.a)(n)}},{view:"template",autowidth:!0,hidden:!0,css:{"padding-top":"3px"},borderless:!0,id:e+"_copy_detail_cell_done",template:'<svg class="animated-check" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'},{},{view:"icon",icon:"mdi mdi-close",tooltip:"Close me",align:"right",click:function(){$$(e+"_win_detail_cell").destructor()}}]},body:{view:"template",css:"z_query_detail_cell",template:"<pre id='"+e+"_detail_cell_content' style='height:100%;overflow: auto;'></pre>"},on:{onShow:function(){var o=document.querySelector("#"+e+"_detail_cell_content");"json"==t||"jsonb"==t?o.innerHTML=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})):o.innerText=n}}}).show()};if("json"!=t&&"jsonb"!=t||o(t,n=JSON.stringify(JSON.parse(n),null,4)),n){var i=n.match(/\n/gm);"text"!=t&&"varchar"!=t||!(i&&i.length>0||n.length>50)||o(t,n)}}}(this.config.columns.find((function(e){return e.id==t.column})).ztype,this.getItem(t)[t.column])},onAfterEditStop:function(e,t){if(e.old==e.value)return!0;this.$values_cache||(this.$values_cache=[]);var n=this.getItem(t.row),o=t.row,i=-1;void 0!==n.id_0&&(i=n.id_0),this.$values_cache.push({id:o,id_db:i,column:t.column,value:e.value}),$$(this).addCellCss(t.row,t.column,"z_changes_cell_result",!0)}},ready:function(){var e=this;wt.b.isAdjustCols&&this.config.columns.forEach((function(t){e.getColumnConfig(t.id).maxWidth=Number.MAX_SAFE_INTEGER}))}},{view:"monaco-editor",css:"z_console_editor",id:e+"_console",language:"text",lineNumbers:"off",fontSize:"12px",borderless:!0,renderLineHighlight:"none"}]}]},a=$$(e+"_scrollview_body").getChildViews();a[0]&&$$(e+"_scrollview_body").removeView(a[0]),$$(e+"_resizer").show(),$$(e+"_result_scrollview").show();var l,d=void 0;if(n.error){Object(ft.n)(n.message_toas,"toasify_"+n.type_toas),$$(e+"_scrollview_body").addView(r);var f=n.error,p=f.match(/errline:(.*)/);if(null!=p&&(d=Number(p[1]))>0){var h=$$(e+"_sql_editor").getEditor();h.revealLineInCenter(d),d=c?d+s-1:d,h.setPosition({lineNumber:d,column:1}),o.forEach((function(e,t){var n=o[t];h.deltaDecorations([n],[])}));var b=h.deltaDecorations([],[{range:new monaco.Range(d,0,d,0),options:{isWholeLine:!0,glyphMarginClassName:"myGlyphMarginClass",linesDecorationsClassName:"breakpointStyle",marginClassName:"rightLineDecoration",inlineClassName:"problematicCodeLine"}}]);o.push(b)}$$(e+"_console").setValue(f.charAt(0).toUpperCase()+f.slice(1)),$$(e+"_tabbar").setValue(e+"_console")}else $$(e+"_scrollview_body").addView(r),void 0!==n.message&&$$(e+"_console").setValue(n.message),$$(e+"_tabbar").setValue(e+"_result"),d=0,S($$(e+"_source_combo").getValue(),u.sql).then((function(t){t.json().data?(i=!0,$$(e+"_save_result").show(),$$(e+"_addrow_result").show(),$$(e+"_addrow_result_spacer").show(),$$(e+"_removerow_result").show(),$$(e+"_removerow_result_spacer").show()):(i=!1,$$(e+"_save_result").hide(),$$(e+"_addrow_result").hide(),$$(e+"_removerow_result").hide(),$$(e+"_addrow_result_spacer").hide(),$$(e+"_removerow_result_spacer").hide())})),Object(ft.n)(n.message_toas,"toasify_"+n.type_toas);0==d&&$$(e+"_sql_editor").getEditor(!0).then((function(e){o.forEach((function(t,n){var i=o[n];e.deltaDecorations([i],[])})),o=[]})),$$(e+"_console").getEditor(!0).then((function(e){e.updateOptions({readOnly:!0})})),$$(e+"_page_panel").hideOverlay(),x(),l=$$(e+"_result"),webix.event(l.$view,"contextmenu",(function(e,t){if(e.srcElement.classList.contains("webix_hcell")){webix.html.preventEvent(e);var n=l.locate(e);n&&!n.row&&webix.ui({view:"contextmenu",data:["Copy Field Name"],click:function(e,t){var o=n.column.split("_");o.pop(),Object(Ot.a)(o.join("_"))}}).show(e)}}))})).fail((function(t){setTimeout((function(){webix.message({text:t.responseText,type:"error"}),$$(e+"_page_panel").hideOverlay()}),1e3)}))}else webix.message({text:"Select DB Connection and type SQL your command",type:"error"})},$=function(t){$$(e+"_sql_editor").setValue(t),$$(e+"_history_preview").hide(),$$(e+"_sql_editor").show()};function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=$$(e+"_history_list");o.clearAll();var i="";n&&(i="&search="+n),o.load(_t.a+"/content?type=3&sa="+t+i)}var O=function(){$$(e+"_sql_editor").setValue(sqlFormatter.format($$(e+"_sql_editor").getValue(),{uppercase:!0}))},j=function(){wt.b.isSearchDetach?($$(e+"_database_search").hide(),$$(e+"_database_search_content").hide(),$$(e+"_search_more_btn").hide(),$$(e+"_search_detach_btn").show(),webix.UIManager.addHotKey("Esc",(function(){$$(e+"_search_detach_win")&&(document.querySelectorAll("body > div.webix_modal").forEach((function(e){e.style.backgroundColor="#000"})),$$(e+"_search_detach_win").hide())}))):($$(e+"_database_search_content").hide(),$$(e+"_database_search").show(),$$(e+"_search_more_btn").show(),$$(e+"_search_detach_btn").hide())},k=function(){$$(e+"_sql_editor").getEditor(!0).then((function(e){e.updateOptions({minimap:{enabled:wt.b.isMinimap}})}))},S=function(e,t){var n=t.toLowerCase().split("from").pop().trim().split(" ");return webix.ajax().get(wt.c+"/is_table?id="+e+"&table="+n)},P=function(t,o,i){n=o;var r=o.split("_")[1];if("g"==r||"u"==r||"y"==r||"w"==r){var a=$$(e+"_source_combo").getValue(),s=$$(e+"_sql_editor");webix.extend(s,webix.ProgressBar),s.showProgress({type:"top"}),webix.ajax().get(pt.a+"/schema_content?id="+a+"&root="+t+"&oid="+o).then((function(t){s.hideProgress(),s.setValue(t.json().data),document.querySelectorAll("body > div.webix_modal").forEach((function(e){e.style.backgroundColor="#000"})),$$(e+"_search_detach_win").close()}))}"u"==r?$$(e+"_viewdata_btn").enable():$$(e+"_viewdata_btn").disable()};return{id:e,type:"clean",borderless:!0,rows:[{type:"clean",borderless:!0,rows:[{id:e+"_page_panel",css:"z_query_page_panel",rows:[{rows:[i,{cols:[a,{view:"monaco-editor",id:e+"_sql_editor",language:"sql",minimap:{enabled:!1}},s,l,u]}],gravity:2},{view:"resizer",id:e+"_resizer",css:"z_resizer",hidden:!0},{view:"scrollview",id:e+"_result_scrollview",hidden:!0,scroll:!1,body:{id:e+"_scrollview_body",rows:[]}}]}]}],on:{onViewShow:webix.once((function(n){wt.b.isDataType=webix.storage.local.get($t.i),wt.b.isSearchDetach=webix.storage.local.get($t.p),wt.b.isMinimap=webix.storage.local.get($t.n);var o=$$(e+"_source_combo");if(void 0!==t)setTimeout((function(){var n=o.getPopup().getList().serialize().filter((function(e){return e.value==t}));$$(e+"_source_combo").setValue(n[0].id)}),500);else{var i=webix.storage.local.get($t.j);i&&$$(e+"_source_combo").setValue(i)}1==vt.d.userLevel&&$$(e+"_all_history").show();var r=webix.storage.local.get($t.m);r&&d(r);var a,s=webix.storage.local.get($t.o);s&&f(s),j(),a=$$(e+"_sql_editor"),webix.extend(a,webix.ProgressBar),a.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),a.disable(),a.getEditor(!0).then((function(t){a.hideProgress(),a.enable(),t.focus();var n=14;bt.b.appProfile&&Array.isArray(bt.b.appProfile)&&(n=bt.b.appProfile.find((function(e){return"editor_font_size"==e.m_key})).m_val),t.updateOptions({fontSize:n+"px"}),t.addAction({id:"run-query",label:"Run Query",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Enter,monaco.KeyCode.F5],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(t){return v($$(e+"_source_combo").getValue()),null}}),t.addAction({id:"auto-format-sql",label:"Auto format sql",keybindings:[monaco.KeyMod.Shift|monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_F],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return O(),null}}),t.addAction({id:"search-focus",label:"Focus Quick Search",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.Semicolon],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(t){return wt.b.isSearchDetach?m():($$(e+"_database_search").focus(),$$(e+"_database_search").getInputNode().select()),null}}),t.addAction({id:"open-new-query-ed",label:"Open New Query",keybindings:[monaco.KeyMod.CtrlCmd|monaco.KeyCode.KeyM],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){return Pt(),null}})})),k()})),onDestruct:function(){({})}}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(0),i={prefix:o.d+"generator"},r=o.a+"/generator"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(0),i={prefix:o.d+"compare"},r=o.a+"/compare"},function(e,t,n){"use strict";n.r(t),n.d(t,"runTarget",(function(){return f}));var o=n(1),i=n(0),r=(n(8),n(6)),a=(n(7),n(32));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l={view:"toolbar",elements:[{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-plus",autowidth:!0,click:function(){p(this.$scope,!1)}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-pencil-outline",id:"task_edit_btn",autowidth:!0,hidden:!0,click:function(){p(this.$scope,!0)}},{view:"button",type:"icon",css:"zmdi_padding",id:"task_delete_btn",icon:"mdi mdi-minus",autowidth:!0,hidden:!0,click:function(){var e,t,n,o;e=$$("task_table"),t=e.getSelectedId(),n=e.getItem(t),o=""+n.task_name,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+o+"</strong> ?",callback:function(e){e&&webix.ajax().del(r.b+"/"+n.id,null,(function(e){webix.message("<strong>"+o+" </strong> deleted."),b(),h()}))}})}},{view:"text",placeholder:"search",width:200},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-refresh",id:"task_refresh_btn",autowidth:!0,click:function(){b()}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-chevron-triple-right",id:"task_run_btn",tooltip:"Run Target",autowidth:!0,hidden:!0,click:function(){f()}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-download-outline",id:"task_download_btn",autowidth:!0,tooltip:"Download SQL script",hidden:!0,click:function(){var e=r.a.dataSelected,t=i.a+"/task/download/"+e.id;webix.ajax().get(t,(function(e){var t,n,o,i=JSON.parse(e);t=i.name+".sql",n=i.bundle,(o=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(n)),o.setAttribute("download",t),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}))}}]};var u={width:400,view:"datatable",id:"task_table",select:"row",columns:[{id:"task_name",header:"Task",fillspace:!0,sort:"string"}],url:i.a+"/task",on:{onItemClick:function(e){var t=this.getItem(e);r.a.dataSelected=t,r.a.isEdit=!0,Object(a.reloadTaskItem)($$("task_item_table"),t.id),$$("task_delete_btn").show(),$$("task_edit_btn").show(),$$("task_download_btn").show(),$$("task_run_btn").show()},onItemDblClick:function(){p(this.$scope,!0)}}},d={view:"datatable",id:"task_item_table",select:"row",columns:[{id:"schema",header:["Schema",{content:"textFilter"}]},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0},{id:"type",header:"Type",adjust:!0}]};function f(){var e=r.a.dataSelected,t=e.task_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure run transfer to target server: <strong>"+t+"</strong> ?",callback:function(n){if(n){var o=$$("task_page_panel"),i=$$("task_run_btn");webix.extend(o,webix.ProgressBar),o.showProgress(),i.disable(),webix.ajax().post(r.b+"/transfer/"+e.id,null,(function(e){webix.message("<strong>"+t+" </strong> transfered."),setTimeout((function(){o.hideProgress(),i.enable()}),1e3)}))}}})}function p(e,t){r.a.isEdit=t,e.show("task.form?m=add",{target:"z_task_page"})}function h(){$$("task_delete_btn").hide(),$$("task_edit_btn").hide(),$$("task_download_btn").hide(),$$("task_run_btn").hide()}function b(){$$("task_table").clearAll(),$$("task_table").load(i.a+"/task"),h()}var _=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"task_page_panel",css:"z_overlay_loading",rows:[l,{cols:[u,{view:"resizer",css:"z_resizer_small"},d]}]}},t}(o.c);t.default=_},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadDbConfig",(function(){return p}));var o=n(1),i=n(3),r=n(53),a=n(13);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=a.a.prefix,u={view:"toolbar",css:"z-tb",elements:[{view:"button",id:l+"_add_btn",value:"Add",autowidth:!0,click:function(){f(this.$scope)}},{view:"button",id:l+"_edit_btn",value:"Edit",hidden:!0,autowidth:!0,click:function(){f(this.$scope,!0)}},{view:"button",id:l+"_delete_btn",value:"Delete",autowidth:!0,hidden:!0,click:function(){var e,t,n;e=$$(l+"_table"),t=e.getItem(e.getSelectedId()),n=""+t.conn_name,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.b+"/"+t.id,(function(e){webix.message({text:"<strong>"+n+"</strong> deleted."}),p()})).fail((function(e){showError(e)}))}})}},{view:"button",id:l+"_refresh_btn",value:"Refresh",autowidth:!0,click:function(){p()}},{},Object(i.g)(l+"_pager")]},d={view:"datatable",id:l+"_table",columns:[{id:"conn_name",header:"Name",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:150},{id:"database",header:"Database",width:150},{id:"user",header:"User",width:150}],resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",pager:l+"_pager",on:{onLoadError:function(e,t,n){showError(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(l+"_edit_btn").show(),$$(l+"_delete_btn").show();var t=this.getItem(e);a.a.dataSelected=t,a.a.isEdit=!0},onItemDblClick:function(){f(this.$scope,!0)}},url:"http://localhost:5000/api/user_config"};function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.a.isEdit=t,e.ui(r.DbConfigForm).show()}function p(){$$(l+"_table").clearAll(),$$(l+"_table").load("http://localhost:5000/api/user_config"),$$(l+"_edit_btn").hide(),$$(l+"_delete_btn").hide()}var h=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",rows:[u,d]}},t.prototype.init=function(e){},t.prototype.destructor=function(){},t}(o.c);t.default=h},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var o=n(0),i=(n(8),n(4)),r={prefix:o.d+"database",isEdit:!1,dataSelected:{}},a=function(e,t){var n=webix.ajax().post(i.a+"/conn/test",t,(function(e){return webix.message({text:"Connection Ok",type:"success"}),e})).fail((function(e){var t=JSON.parse(e.response);return webix.alert({type:"alert-error",title:"Connection Failed",text:"Can't Connect to Database Server<br>"+t.message}),e}));if(e)return n}},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(41);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(31);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(45);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1);n(21);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[{$subview:!0,name:"z_task_page"}]}},t.prototype.init=function(){this.show("task.page",{target:"z_task_page"})},t}(o.c);t.default=a},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(48);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(58);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(51);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadServerCombo",(function(){return x}));var o=n(1),i=n(23),r=n(5),a=n(9),s=n(4),c=n(2),l=n(18),u=n(44),d=n(0),f=n(3),p=n(15);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=i.a.prefix,m=void 0,w=void 0,y=void 0,g={view:"toolbar",elements:[{view:"combo",id:_+"_server",placeholder:"Source server",width:150,options:{url:s.a+"/conn?type=1&ls=true",fitMaster:!1,width:200},on:{onChange:function(e,t){O(e)}}},{view:"button",type:"icon",css:"zmdi_padding",autowidth:!0,icon:"mdi mdi-connection",click:function(){this.$scope.ui(u.DatabaseServer).show()}},{view:"text",css:"search_suggest",id:_+"_database_search",placeholder:"Search..",width:300,hidden:!0,suggest:{keyPressTimeout:500,body:{dataFeed:function(e,t){if(e.length<3){var n=$$(_+"_database_search");return n&&$$(n).hideOverlay(),void this.clearAll()}this.clearAll();var o=$$(_+"_server").getValue();this.load(a.a+"/content_search?id="+o+"&root="+m+"&filter[value]="+e)},on:{onBeforeLoad:function(){var e=$$(_+"_database_search");webix.extend(e,webix.OverlayBox),e&&e.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:1; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var e=$$(_+"_database_search");webix.delay((function(){webix.extend(e,webix.OverlayBox),e&&$$(e).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(e){$(m,e.id)}}},on:{onKeyPress:function(e,t){9==e&&$$(_+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"button",type:"icon",css:"zmdi_padding",autowidth:!0,id:_+"_copy_content",hidden:!0,icon:"mdi mdi-content-copy",click:function(){var e=this;if(""!=$$("database_sql_editor").getValue()){this.hide();var t=$$(_+"_copy_content_done");t.show(),setTimeout((function(){e.show(),t.hide()}),1500),Object(p.a)($$("database_sql_editor").getValue())}}},{view:"button",autowidth:!0,hidden:!0,id:_+"_copy_content_done",label:'<svg class="animated-check" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'},{view:"button",type:"icon",css:"zmdi_padding",id:_+"_send_backward",icon:"mdi mdi-arrange-send-backward",autowidth:!0,hidden:!0,tooltip:"Copy to query editor",click:function(){var e=$$(_+"_server").getValue(),t=$$("database_sql_editor");webix.extend(t,webix.OverlayBox),t.showOverlay("Checking profile.."),webix.ajax().get(s.a+"/conncheck?id="+e+"&db="+y).then((function(e){e.json().data&&(t.hideOverlay(),function(e){r.b.currentTabQuery=parseInt(r.b.currentTabQuery)+1;var t=parseInt(r.b.currentTabQuery),n=c.b.prefix;if(a=n.substring(n.lastIndexOf("_")+1,n.length),isNaN(a)||(0|(s=parseFloat(a)))!==s)c.b.prefix=c.b.prefix+"_"+t;else{var o=c.b.prefix,i=o.substring(0,o.lastIndexOf("_"));c.b.prefix=i+"_"+t}var a,s;r.b.viewScope.addTab({header:"Query "+t,id:c.b.prefix,close:!0,width:150,body:Object(l.QueryPage)(c.b.prefix,e)}),$$("tabs").getTabbar().setValue(c.b.prefix),setTimeout((function(){return $$(c.b.prefix+"_sql_editor").setValue($$("database_sql_editor").getValue())}),600)}(y))}))}}]};function v(e,t,n){var o=void 0;if(void 0===n){for(var i=t;e.getParentId(i);)i=e.getParentId(i);o=i}else o=m;var r=e,s=$$(_+"_server").getValue(),c=r.getItem(t);document.body.style.cursor="progress",e.parse(webix.ajax().get(a.a+"/schema?id="+s+"&root="+o+"&parent="+t+"&t=0").then((function(e){return setTimeout((function(){c.$count<=0&&(c.open=!1,r.refresh(t),document.body.style.cursor="default")}),600),e.json()})))}function $(e,t){var n=t.split("_")[1];if("g"==n||"u"==n){var o=$$(_+"_server").getValue(),i=$$("database_sql_editor");webix.extend(i,webix.OverlayBox),i.showOverlay("Loading..."),webix.ajax().get(a.a+"/schema_content?id="+o+"&root="+e+"&oid="+t).then((function(e){i.hideOverlay(),i.setValue(e.json().data)})),$$(_+"_copy_content").show(),$$(_+"_send_backward").show()}else $$(_+"_send_backward").hide(),$$(_+"_copy_content").hide()}function x(){var e=$$(_+"_server"),t=e.getPopup().getList();t.clearAll(),e.setValue(""),e.getPopup().getList().unselect(),t.load(s.a+"/conn?type=1&ls=true")}function O(e){var t=$$(_+"_db_tree");t.clearAll();var n=$$(_+"_db_tree_filter_reload");n.config.icon="mdi mdi-refresh-circle spin_mdi_right z_mdi_splin_color",n.refresh(),t.load(a.a+"?id="+e).then((function(e){setTimeout((function(){n.config.icon="mdi mdi-reload",n.refresh()}),600)})),webix.storage.local.put(d.l,e)}var j=function(e){function t(){return h(this,t),b(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[g,{cols:[{rows:[{cols:[{view:"text",placeholder:"filter..",id:_+"_db_tree_filter",css:"z_db_tree_filter",on:{onTimedKeyPress:function(){$$(_+"_db_tree").filter("#value#",this.getValue())}}},{view:"icon",toolbar:"Refresh current selected DB",autowidth:!0,id:_+"_db_tree_filter_reload",icon:"mdi mdi-reload",click:function(){O($$(_+"_server").getValue())}}]},{view:"tree",width:250,id:_+"_db_tree",css:"z_db_tree",select:!0,type:{icon:function(e,t){return e.open&&e.$count<=0?'<div class=" webix_icon mdi mdi-sync spin_mdi"></div>':'<div class="webix_tree_'+(e.$count?e.open?"open":"close":"none")+'"></div>'},my_folder:function(e){var t=e.id.split("_")[1];return"d"==t?"<span class='webix_icon mdi mdi-database-outline "+(e.open?"z_tree_d_open":"")+"'></span>":"s"==t?"<span class='webix_icon mdi mdi-rhombus-split-outline "+(e.open?"z_tree_s_open":"")+"'></span>":"t"==t?"<span class='webix_icon mdi mdi-table-large "+(e.open?"z_tree_t_open":"")+"'></span>":"u"==t?"<span class='webix_icon mdi mdi-table z_tree_u_open z_tree_u_open'></span>":"f"==t?"<span class='webix_icon mdi mdi-script-text-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"r"==t?"<span class='webix_icon mdi mdi-script-text-play-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"v"==t?"<span class='webix_icon mdi mdi-file-table-box-multiple-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"y"==t?"<span class='webix_icon mdi mdi-file-table-box-outline "+(e.open?"z_tree_f_open":"")+"'></span>":"g"==t||"w"==t?"<span class='webix_icon mdi mdi-script-outline z_tree_g_open'></span>":"<span class='webix_icon mdi mdi-radiobox-blank'></span>"}},template:"{common.icon()} {common.my_folder()} <span>#value#</span>",on:{onAfterSelect:function(e){for(m=e;this.getParentId(m);)m=this.getParentId(m);y=this.getItem(m).value,$$(_+"_database_search").show(),$(m,e)},onItemClick:function(e){var t=e,n=this.getItem(e);for(r.b.currentDBSelected=n.value;this.getParentId(t);)t=this.getParentId(t);y=this.getItem(t).value},onItemDblClick:function(e){this.isBranchOpen(e)?this.close(e):this.open(e)},onAfterContextMenu:function(e,t,n){for(this.select(e),m=e;this.getParentId(m);)m=this.getParentId(m);w=e},onDataRequest:function(e){return v(this,e),!1},onBeforeLoad:function(){webix.extend(this,webix.OverlayBox),this.showOverlay("<div style='margin-top: 20px'>Loading...</div>")},onAfterLoad:function(){this.hideOverlay()}}}]},{view:"resizer"},{view:"monaco-editor",id:"database_sql_editor",readOnly:!0}]}]}},t.prototype.init=function(){this.ui({view:"contextmenu",id:"tree_contextmenu",data:[],on:{onBeforeShow:function(){this.clearAll();var e=[];e.push({id:"refresh",value:"Refresh"}),"d"==$$(_+"_db_tree").getSelectedId().split("_")[1]&&(e.push({$template:"Separator"}),e.push({id:"createconn",value:"Create Connection"})),this.parse(e)},onItemClick:function(e){"refresh"==e?v($$(_+"_db_tree"),w,!0):"createconn"==e&&webix.message("Not implement yet")}}}).attachTo($$(_+"_db_tree"));var e=$$("database_sql_editor");Object(f.h)(e)},t.prototype.ready=function(){var e=webix.storage.local.get(d.l);e&&$$(_+"_server").setValue(e)},t}(o.c);t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"reloadTaskItem",(function(){return O}));var o,i,r=n(1),a=(n(8),n(6)),s=n(9),c=n(7),l=n(4),u=n(21),d=n(3);function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=a.a.prefix,b=function(e){return webix.ajax().get(a.c+"?filter[task_id]="+e)};function _(e,t){var n,o=$$(h+"_panel_form_item");webix.extend(o,webix.ProgressBar),o.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),o.disable(),(n=e,webix.ajax().get(s.a+"/schema_list?id="+n,(function(e){return e}))).then((function(e){b(t).then((function(t){var n=e.json().data,i=t.json().data,r=n.filter((function(e){return!i.filter((function(t){return t.oid===e.id})).length})),a=$$(h+"_avalaible_table");a.clearAll(),a.parse(r);var s=$$(h+"_selected_table");s.clearAll(),s.parse(i),o.hideProgress(),o.enable()}))}))}var m={view:"toolbar",elements:[{view:"combo",label:"Source",id:h+"_source_db_id",name:"source_db_id",labelWidth:60,width:300,placeholder:"db name",options:l.a+"/content?type=2&ls=true",on:{onChange:function(e){_(e,a.a.dataSelected.id)}}},{view:"button",type:"icon",icon:"mdi mdi-sync",css:"zmdi_padding",tooltip:"Refresh source",autowidth:!0,click:function(){_($$(h+"_source_db_id").getValue(),a.a.dataSelected.id)}},{view:"button",type:"icon",icon:"mdi mdi-chevron-right",css:"zmdi_padding",tooltip:"Add selected item",disabled:!0,autowidth:!0}]},w={view:"toolbar",elements:[{view:"button",type:"icon",icon:"mdi mdi-plus",css:"zmdi_padding",autowidth:!0,click:function(){webix.mesage("Not implement yet")}},{view:"button",type:"icon",icon:"mdi mdi-minus",css:"zmdi_padding",id:h+"_delete_item_btn",autowidth:!0,hidden:!0,click:function(){x()}},{view:"button",type:"icon",icon:"mdi mdi-content-save-outline",css:"zmdi_padding",id:h+"_save_btn",tooltip:"Save Task",autowidth:!0,click:function(){var e,t;e=$$(h+"_selected_table").serialize(),t={task_id:$$(h+"_task_id").getValue(),source_db_id:$$(h+"_source_db_id").getValue(),oid_arr:e.map((function(e){return e.id})).join(",")},webix.ajax().post(a.c+"/selected",t,(function(e){O($$(h+"_selected_table"),t.task_id)})).fail((function(e){Object(d.i)(e)}))}},{view:"combo",label:"Target",labelWidth:60,name:"target_db_id",id:h+"_target_db_id",width:300,placeholder:"db name",options:l.a+"/content?type=2&ls=true"},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-refresh",autowidth:!0,click:function(){O($$(h+"_selected_table"),a.a.dataSelected.id)}},{view:"button",type:"icon",icon:"mdi mdi-database-sync-outline",css:"zmdi_padding",tooltip:"Sync from source DB",autowidth:!0,click:function(){var e=$$(h+"_panel_form_item"),t={id:a.a.dataSelected.id,source_db_id:$$(h+"_source_db_id").getValue()};webix.extend(e,webix.OverlayBox),e.showOverlay("\n            <div class='transfer-content'>\n            <div class=\"spinner\"></div>\n            </div>\n            "),webix.ajax().post(a.c+"/syncselected",t,(function(t){setTimeout((function(){return e.hideOverlay()}),1e3)})).finally((function(){}))}},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-chevron-triple-right",id:h+"_run_btn",tooltip:"Run Target",autowidth:!0,click:function(){Object(u.runTarget)()}},(o={view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-dots-vertical-circle-outline",autowidth:!0,popup:"my_pop",id:h+"_more_btn"},o.popup={view:"contextmenu",data:[{id:1,value:"Check broken files"},{id:2,value:"Clear workspace"}],submenuConfig:{},on:{onMenuItemClick:function(e){1==e&&webix.ajax().post(a.b+"/checkbroken/"+a.a.dataSelected.id,null,(function(e){var t=JSON.parse(e).data,n="",o="All Ok, no broken files";t.status||(n="alert-warning",o="Files not found on workspace",t.length>0&&(o=t.replace(/ *, */g,"<br>"))),webix.alert({title:"Checking workspace files",type:n,text:o})}))}}},o)]},y={rows:[{view:"form",id:h+"_form",height:50,elements:[{cols:[{view:"text",label:"Task Name",name:"task_name",width:300},{view:"text",name:"id",id:h+"_task_id",hidden:!0},{view:"icon",icon:"mdi mdi-dots-vertical",tooltip:"add description",click:function(){var e=$$(h+"_note");e.isVisible()?(e.hide(),$$(h+"_form_space").show()):(e.show(),$$(h+"_form_space").hide())}},{view:"text",id:h+"_note",placeholder:"Description",name:"note",hidden:!0},{view:"button",value:"Add",autowidth:!0,id:h+"_add_btn",click:function(){!function(){if($$(h+"_form").validate()){var e=$$(h+"_form").getValues(),t=""+e.task_name;e.user_id=c.d.userId,a.a.isEdit?webix.ajax().put(a.b+"/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."})})).fail((function(e){Object(d.i)(e)})):webix.ajax().post(a.b,e,(function(e){var t=JSON.parse(e);$$(h+"_task_id").setValue(t.data.last_id),t.data.last_id?($$(h+"_panel_form_item").show(),$$(h+"_panel_form_item_empty").hide()):($$(h+"_panel_form_item").hide(),$$(h+"_panel_form_item_empty").show())})).fail((function(e){Object(d.i)(e)}))}}()}},{id:h+"_form_space"},{view:"icon",icon:"mdi mdi-close",tooltip:"Close",click:function(){this.$scope.show("task.page",{target:"z_task_page"})}}]},{}],rules:{task_name:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"task_name"==o&&n.push("Task Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}}}]},g=((i={view:"datatable",id:h+"_avalaible_table",resizeColumn:!0,scrollX:!0,select:"multiselect",multiselect:"touch",drag:!0}).select="row",i.columns=[{id:"schema",header:["Schema",{content:"textFilter"}],sort:"string"},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0,sort:"string"},{id:"type",header:["Type",{content:"textFilter"}],adjust:!0}],i.on={onAfterDrop:function(e,t){$()},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}},i),v={view:"datatable",id:h+"_selected_table",resizeColumn:!0,scrollX:!0,select:"multiselect",multiselect:"touch",drag:!0,columns:[{id:"schema",header:["Schema",{content:"textFilter"}],sort:"string"},{id:"name",header:["Name",{content:"textFilter"}],fillspace:!0,sort:"string"},{id:"type",header:"Type",adjust:!0}],on:{onItemClick:function(){$$(h+"_delete_item_btn").show()},onAfterDrop:function(e,t){$()},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}}};function $(){var e=$$(h+"_form").getValues();e.source_db_id=$$(h+"_source_db_id").getValue(),e.target_db_id=$$(h+"_target_db_id").getValue();var t=$$(h+"_task_id").getValue();webix.ajax().put(a.b+"/"+t,e,(function(e){})).fail((function(e){Object(d.i)(e)}))}var x=function(){var e=$$(h+"_selected_table"),t=e.getSelectedId();t&&(t=Array.isArray(t)?e.getSelectedId().map((function(e){return e.id})).join(","):t.id,webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>Selected item</strong> ?",callback:function(n){n&&webix.ajax().post(a.c+"/rmselected",{sid:t},(function(t){webix.message("<strong>Selected item </strong> deleted."),O(e,a.a.dataSelected.id)}))}}))};function O(e,t){webix.extend(e,webix.ProgressBar),e.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),e.disable(),b(t).then((function(t){e.clearAll(),e.parse(t.json()),e.enable(),e.hideProgress()}))}var j=function(e){function t(){return f(this,t),p(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[y,{id:h+"_panel_form_item",hidden:!0,cols:[{rows:[m,g]},{view:"resizer",css:"z_resizer_small"},{gravity:2,rows:[w,v]}]},{id:h+"_panel_form_item_empty",template:"&nbsp;"}]}},t.prototype.init=function(e,t){if(a.a.isEdit){this.$$(h+"_add_btn").hide();var n=a.a.dataSelected;this.$$(h+"_form").setValues(n),$$(h+"_panel_form_item").show(),$$(h+"_panel_form_item_empty").hide(),this.$$(h+"_source_db_id").setValue(n.source_db_id),this.$$(h+"_target_db_id").setValue(n.target_db_id)}else this.$$(h+"_add_btn").show()},t}(r.c);t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewDataPage",(function(){return l}));var o=n(4),i=n(5),r=n(9),a=n(10),s=n(0);n(8);function c(){var e,t,n=parseInt(i.b.currentTabViewData)+1,o=a.a.prefix,r=o.substring(o.lastIndexOf("_")+1,o.length);if(e=r,isNaN(e)||(0|(t=parseFloat(e)))!==t)a.a.prefix=a.a.prefix+"_"+n;else{var s=a.a.prefix,c=s.substring(0,s.lastIndexOf("_"));a.a.prefix=c+"_"+n}i.b.viewScope.addTab({header:"View Data "+n,id:a.a.prefix,close:!0,width:150,body:l(a.a.prefix)}),$$("tabs").getTabbar().setValue(a.a.prefix),i.b.currentTabViewData++}function l(e,t){var n="",i={view:"toolbar",css:"z_viewdata_toolbar",elements:[{view:"button",type:"icon",autowidth:!0,css:"zmdi_padding",tooltip:"Open new View Data",icon:"mdi mdi-view-grid-plus",click:function(){c()}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_showhide_db",autowidth:!0,hidden:!0,tooltip:"Show database content",icon:"mdi mdi-forwardburger",click:function(){}},{view:"combo",id:e+"_source_combo",placeholder:"Source DB",width:200,options:{url:o.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(s.k,e)}}},{view:"combo",placeholder:"Schema",tooltip:"Schema",width:200,hidden:!0,options:["One","Two","Three"]},{view:"combo",placeholder:"Table",width:200,hidden:!0,tooltip:"Table",options:["One","Two","Three"]},{view:"text",css:"search_suggest",id:e+"_database_search",placeholder:"Search..",width:300,suggest:{keyPressTimeout:500,body:{dataFeed:function(t,n){var o=$$(e+"_source_combo").getValue();if(o){if(t.length<1){var i=$$(e+"_database_search");return webix.extend(i,webix.OverlayBox),i&&$$(i).hideOverlay(),void this.clearAll()}this.clearAll(),this.load(r.a+"/content_search?id="+o+"&root=0&filter[value]="+t+"&view=tbl")}else webix.message({text:"Ops, select source DB first",type:"error"})},on:{onBeforeLoad:function(){var t=$$(e+"_database_search");webix.extend(t,webix.OverlayBox),t&&t.showOverlay("<span style='display:block;text-align:right;padding-right:10px;height:100%;line-height:1.0; color:orange' class='mdi mdi-circle-slice-8 mdi_pulsate'></span>")},onAfterLoad:function(){var t=$$(e+"_database_search");webix.delay((function(){webix.extend(t,webix.OverlayBox),t&&$$(t).hideOverlay()}),this,null,2e3)}}},on:{onValueSuggest:function(t){var o,i,r,s;o=t.id,i=o.split("_")[0],r=$$(e+"_source_combo").getValue(),s=$$(e+"_table_panel"),webix.extend(s,webix.ProgressBar),s.showProgress({type:"top"}),n=a.b+"/data?id="+r+"&&oid="+i,webix.ajax().get(n).then((function(t){s.hideProgress();var o=t.json(),i=$$(e+"_table_panel").getChildViews();i[0]&&$$(e+"_table_panel").removeView(i[0]);var r={view:"datatable",datafetch:30,resizeColumn:!0,id:e+"_table",columns:o.config,data:o.data,select:"row",editable:!0,ztblOid:o.tbl_oid,save:{},editaction:"dblclick",pager:e+"_pagerA",url:n,on:{onBeforeLoad:function(){webix.extend(this,webix.ProgressBar),this.showProgress({type:"top"})},onAfterLoad:function(){this.hideProgress()},onItemClick:function(t){$$(e+"_remove_row").show()},onAfterEditStop:function(e,t){e.old!=e.value&&this.addRowCss(t.row,"z_orange_row")}}};$$(e+"_table_panel").addView(r),$$(e+"_refresh").show(),$$(e+"_add_row").show()})).fail((function(t){var n=JSON.parse(t.response);webix.message({text:n.message,type:"error"}),s.hideProgress(),$$(e+"_table").clearAll()}))}}},on:{onKeyPress:function(t,n){9==t&&$$(e+"_sql_editor").getEditor(!0).then((function(e){return e.focus()}))}}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_refresh",autowidth:!0,hidden:!0,tooltip:"Refresh",icon:"mdi mdi-sync",click:function(){var t=$$(e+"_table");t&&(t.clearAll(),t.load(n),$$(e+"_remove_row").show())}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_save_row",autowidth:!0,hidden:!0,tooltip:"Apply Save Changes",icon:"mdi mdi-table-check",click:function(){}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_add_row",autowidth:!0,hidden:!0,tooltip:"Add new row",icon:"mdi mdi-table-row-plus-after",click:function(){$$(e+"_table").add({id:"0"},0)}},{view:"button",type:"icon",css:"zmdi_padding",id:e+"_remove_row",autowidth:!0,hidden:!0,tooltip:"Remove row",icon:"mdi mdi-table-row-remove",click:function(){var t;t=$$(e+"_table").getSelectedId(),webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete ?",callback:function(n){n&&webix.ajax().del(a.b+"/remove",null,(function(n){$$(e+"_table").remove(t),webix.message({text:"Row deleted"})}))}})}},{},{view:"pager",id:e+"_pagerA",css:"z-pager-aligned",size:30,template:function(e,t){var n=e.page*e.size,o=n+e.size;return o>e.count&&(o=e.count),"<span class='z-pager-no'>"+(n+1)+"-"+o+" of "+e.count+"</span> "+t.prev()+t.next()}},{view:"icon",icon:"mdi mdi-help-circle-outline",id:e+"_help_btn",tooltip:"Show help, shortcut",autowidth:!0,click:function(){this.$scope.ui(QueryHelp).show()}}]};return{id:e,type:"clean",borderless:!0,rows:[{type:"clean",borderless:!0,rows:[{id:e+"_page_panel",css:"z_viewdata_page_panel",rows:[{rows:[i,{id:e+"_table_panel",rows:[{id:e+"_empty_tmpl",template:"<div style='text-align:center;padding-top:200px'>Search or select table to show data..</div>"}]},{hidden:!0,cols:[{id:e+"_list_tbl",view:"list",width:250,template:"#title#",select:!0,data:[{id:1,title:"Item 1"},{id:2,title:"Item 2"},{id:3,title:"Item 3"}]}]}]}]}]}],on:{onViewShow:function(){$$(e+"_database_search").focus();var t=webix.storage.local.get(s.k);t&&$$(e+"_source_combo").setValue(t)}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"confirmTableField",(function(){return s}));var o=n(14),i=n(17),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=o.c+"_page";function s(e,t,n){var o=["text","integer","numeric","boolean"],s=t.map((function(e){return r({},e,{type:"combo",options:o})}));webix.ui({view:"window",id:a+"confirm_table",width:300,modal:!0,move:!0,position:"center",head:"Table not found",css:"boxline_shadow",body:{rows:[{autoheight:!0,template:"<p style='text-align:center;'>Table <strong>"+e.table_name+"</strong> does not exist on target schema, do you want create new one ?</p>"},{view:"scrollview",scroll:!0,height:300,body:{rows:[{id:a+"field_props",view:"property",complexData:!0,elements:s,autoheight:!0}]}},{view:"toolbar",elements:[{},{view:"button",label:"Yes",css:"webix_primary",autowidth:!0,click:function(){var e=$$(a+"field_props").getValues(),t=Object(i.getInputData)();t.table_field=JSON.stringify(e),"query"==t.type_copy||(t.source_data=JSON.stringify(n)),Object(i.confirmCreateTableAndCopyData)(t)}},{view:"button",label:"No",autowidth:!0,click:function(){$$(a+"confirm_table").close()}}]}]}}).show()}},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(19),r=(n(8),n(4)),a=n(0),s=n(3),c=n(15);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=i.a.prefix+"_outprms";var f=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_content",rows:[{view:"toolbar",elements:[{cols:[{view:"combo",id:d+"_source_combo",placeholder:"Source DB",width:200,options:{url:r.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(a.k,e)}}},{view:"icon",icon:"mdi mdi-play-box-outline",tooltip:"Generate",autowidth:!0,click:function(){var e,t;e=$$(d+"_outparams_ed"),t={id:$$(d+"_source_combo").getValue(),querysql:e.getValue()},webix.ajax().post(i.b+"/outparams",t,(function(e){var t=JSON.parse(e);void 0!==t.data&&$$(d+"_result").setHTML("<pre id='generator_result'>"+t.data+"</pre>")})).fail((function(e){Object(s.j)(e.response)}))}},{width:10},{view:"icon",icon:"mdi mdi-content-copy",tooltip:"Copy result content",css:"z_mdi_icon_smaller",autowidth:!0,click:function(){var e=document.getElementById("generator_result");e&&Object(c.a)(e.innerHTML)}},{view:"icon",icon:"mdi mdi-close-box-outline",tooltip:"Reset",autowidth:!0,click:function(){!function(){var e=$$(d+"_outparams_ed");e.setValue(""),e.getEditor(!0).then((function(e){e.focus()}));var t=document.getElementById("generator_result");t&&(t.innerHTML="")}()}},{}]}]},{view:"monaco-editor",id:d+"_outparams_ed",language:"sql"},{view:"resizer"},{view:"template",scroll:"xy",css:"z_out_template",id:d+"_result"}]}},t.prototype.init=function(){var e=webix.storage.local.get(a.k);e&&$$(d+"_source_combo").setValue(e),Object(s.h)($$(d+"_outparams_ed"))},t}(o.c);t.default=f},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(22);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(55);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(2),r=n(18);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return Object(r.QueryPage)(i.b.prefix)},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(57);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(10),r=n(33);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return Object(r.ViewDataPage)(i.a.prefix)},t}(o.c);t.default=c},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(20),r=n(4),a=n(7),s=n(3),c=n(52),l=n(6),u=(n(2),n(8),n(0));function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=i.a.prefix,h=new webix.DataCollection,b=void 0,_=[{id:"err",header:["",{content:"textFilter"}],adjust:!0,cssFormat:function(e,t){return"trg"==e?"z-cell-trg":"src"==e?"z-cell-src":"dif"==e?"z-cell-diff":void 0}},{id:"z_schema",header:["Schema",{content:"textFilter"}],adjust:!0},{id:"z_name",header:["Name",{content:"textFilter"}],adjust:!0},{id:"z_type",header:["Type",{content:"textFilter"}],adjust:!0},{id:"z_return",header:["Return",{content:"textFilter"}],adjust:!0}],m=[{id:"err",header:["",{content:"textFilter"}],adjust:!0,cssFormat:function(e,t){return"trg"==e?"z-cell-trg":"src"==e?"z-cell-src":"dif"==e?"z-cell-diff":void 0}},{id:"z_schema",header:["Schema",{content:"textFilter"}],adjust:!0},{id:"z_name",header:["Name",{content:"textFilter"}],adjust:!0},{id:"val_a",header:["Source",{content:"textFilter"}],adjust:!0},{id:"val_b",header:["Target",{content:"textFilter"}],adjust:!0}],w={view:"toolbar",elements:[{view:"combo",id:"typecompare",placeholder:"Type",width:100,value:1,options:[{id:1,value:"defenition"},{id:2,value:"content"}],on:{onChange:function(e,t){1==e?($$("diff_filter").show(),$$("griddiff").config.columns=_):($$("diff_filter").hide(),$$("griddiff").config.columns=m),$$("griddiff").refreshColumns(),setTimeout((function(){return $()}),800)}}},{view:"combo",id:"diffsourcecombo",placeholder:"Source DB",width:200,options:{url:r.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){v($$("diffsourcecombo"),r.a+"/content?type=2&ls=true")}}},on:{onChange:function(e,t){var n=$$("diffsourcecombo").getValue(),o=$$("difftargetcombo").getValue();n&&o&&n!=o?($$("diff_swap_btn").enable(),$$("diff_compare_btn").enable()):($$("diff_swap_btn").disable(),$$("diff_compare_btn").disable())}}},{view:"button",id:"diff_swap_btn",type:"icon",icon:"mdi mdi-swap-horizontal",css:"win_btn",tooltip:"Swap database connection",autowidth:!0,disabled:!0,click:function(){var e=$$("diffsourcecombo").getValue(),t=$$("difftargetcombo").getValue();e&&t&&($$("difftargetcombo").setValue(e),$$("diffsourcecombo").setValue(t))}},{view:"combo",id:"difftargetcombo",width:200,placeholder:"Target DB",options:{url:r.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){v($$("difftargetcombo"),r.a+"/content?type=2&ls=true")}}},on:{onChange:function(e,t){!function(e){var t=$$("diffschemalist"),n=t.getPopup().getList();n.clearAll(),t.setValue(""),t.getPopup().getList().unselect(),n.load(i.b+"/schema?id="+e)}($$("diffsourcecombo").getValue());var n=$$("diffsourcecombo").getValue(),o=$$("difftargetcombo").getValue();n&&o&&n!=o?($$("diff_swap_btn").enable(),$$("diff_compare_btn").enable()):($$("diff_swap_btn").disable(),$$("diff_compare_btn").disable())}}},{view:"combo",placeholder:"Schema",width:200,id:"diffschemalist",options:{}},{view:"combo",placeholder:"Filter",width:150,id:"diff_filter",value:2,options:[{id:1,value:"Tables"},{id:2,value:"Functions"},{id:3,value:"Table, Functions"}]},{view:"button",type:"icon",icon:"mdi mdi-play",tooltip:"Compare",css:"zmdi_padding",id:"diff_compare_btn",autowidth:!0,disabled:!0,click:function(){!function(){$$("griddiff").define("multiselect",!1),b=$$("griddiff").attachEvent("onBeforeDrag",(function(){return!1}));var e=$$("diffsourcecombo").getValue(),t=$$("difftargetcombo").getValue(),n=$$("diffschemalist").getValue(),o=$$("diff_filter").getValue(),r=$$("diffsourcecombo").getPopup().getList().getItem(e),a=$$("difftargetcombo").getPopup().getList().getItem(t);$$("diff_config_info_lbl").setValue("Source: "+r.host+"/"+r.database+" &nbsp;&nbsp;&nbsp; Target: "+a.host+"/"+a.database),$$("griddiff").clearAll(),$$("differrfilter").setValue("all");var s="generate";2==$$("typecompare").getValue()&&(s="generate_rowcount");var c=i.b+"/"+s+"?source_id="+e+"&target_id="+t+"&schema="+n+"&filter="+o,l=$$("z_compare_page");webix.extend(l,webix.ProgressBar),l.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),l.disable();var u=$$("diff_detail_panel");webix.ajax(c).then((function(e){var t=i.b+"/result";webix.ajax(t).then((function(e){void 0===e.json().data?(webix.alert({type:"alert-error",title:"Comparing Failed",text:"Problem accured when not show comparing result, please try again."}),l.hideProgress(),l.enable()):(l.hideProgress(),l.enable(),$$("griddiff").parse(e.json()),webix.extend(u,webix.OverlayBox),u.showOverlay("<div style='background:white;padding-top:0;height:99%; display: flex;justify-content: center;align-items: center; flex-direction: column;margin-top:1px; margin-bottom:1px'>\n          <div>Select left table to show the differences</div>\n          <div style='font-size: 20px' class='mdi mdi-arrow-left'></div>\n          </div>"),$$("griddiff").serialize().length>0?($$("diff_detail_resizer").show(),$$("diff_detail_panel").show()):($$("diff_detail_resizer").hide(),$$("diff_detail_panel").hide()))}))})).fail((function(e){webix.message({text:e.responseText,type:"error"}),u.hideOverlay(),l.hideProgress(),l.enable()}))}()}},{view:"button",type:"icon",icon:"mdi mdi-close-box",tooltip:"Reset",css:"zmdi_padding",id:"diff_reset",autowidth:!0,hidden:!0,click:function(){$()}},{view:"button",type:"icon",icon:"mdi mdi-dots-vertical",tooltip:"More options",css:"zmdi_padding",id:"diff_moreoptions_btn",autowidth:!0,hidden:!0,popup:{view:"contextmenu",data:[{id:1,value:"Add to new Task"},{id:2,value:"Add to existing Task"}],submenuConfig:{width:150},on:{onMenuItemClick:function(e){$$("griddiff").define("multiselect","touch"),$$("griddiff").detachEvent(b),b=$$("griddiff").attachEvent("onBeforeDrag",(function(){return!0})),1==e&&($$("diff_detail_panel").hide(),$$("diff_detail_resizer").show(),$$("diff_newtask_panel").show())}}}},{view:"combo",placeholder:"filter",id:"differrfilter",hidden:!0,width:100,options:["all","error","dif","trg","src"],on:{onChange:function(e,t){var n=this.getValue().toLowerCase();"error"==n?$$("griddiff").filter("#diff#",1):"dif"==n||"trg"==n||"src"==n?$$("griddiff").filter("#err#",n):($$("griddiff").eachColumn((function(e,t){var n=this.getFilter(e);n&&(n.setValue?n.setValue(""):n.value="")})),$$("griddiff").filterByAll())}}},{},{view:"icon",icon:"mdi mdi-help-circle-outline",id:"diff_help_btn",tooltip:"Show help, legend, shortcut",autowidth:!0,click:function(){this.$scope.ui(c.CompareHelp).show()}}]},y={view:"toolbar",elements:[{view:"text",label:"Task Name",id:"diff_taskname_input"},{view:"button",type:"icon",id:"diff_savetask_btn",icon:"mdi mdi-content-save-outline",autowidth:!0,tooltip:"Save Task",hidden:!0,click:function(){!function(){var e=$$("diff_taskname_input"),t=e.getValue();if(""==t.trim())webix.html.addCss(e.getNode(),"webix_invalid"),webix.message({text:"Task name can not empty",type:"error"});else{webix.html.removeCss(e.$view,"webix_invalid");var n={task_name:t,user_id:a.d.userId};webix.ajax().post(l.b,n,(function(e){!function(e){var t=$$(p+"_selected_table").serialize(),n={task_id:e,source_db_id:$$("diffsourcecombo").getValue(),oid_arr:t.map((function(e){return e.id_a})).join(",")};webix.ajax().post(l.c+"/selected",n,(function(e){webix.message({text:"Task success saved, please to Task to see detail",type:"success"}),$$("diff_newtask_panel").hide(),$$("diff_detail_panel").show()})).fail((function(e){webix.message({text:e.responseText,type:"error"})}))}(JSON.parse(e).data.last_id)})).fail((function(e){webix.message({text:e.responseText,type:"error"})}))}}()}},{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("diff_newtask_panel").hide(),$$("diff_detail_panel").show()}}]},g={view:"datatable",id:p+"_selected_table",resizeColumn:!0,scrollX:!0,select:"multiselect",multiselect:"touch",drag:!0,columns:[{id:"z_schema",header:["Schema",{content:"textFilter"}],sort:"string"},{id:"z_name",header:["Name",{content:"textFilter"}],fillspace:!0,sort:"string"},{id:"z_type",header:"Type",adjust:!0}],on:{onItemClick:function(){},onAfterDrop:function(e,t){this.count()>0?$$("diff_savetask_btn").show():$$("diff_savetask_btn").hide()},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}}};function v(e,t){var n=e.getPopup().getList();n.clearAll(),e.setValue(""),e.getPopup().getList().unselect(),n.load(t)}function $(){$$("difftargetcombo").setValue(),$$("diffsourcecombo").setValue(),$$("diffschemalist").setValue(),$$("diff_filter").setValue(1),$$("differrfilter").setValue("all"),$$("griddiff").clearAll(),$$("differrfilter").hide(),$$("diff_moreoptions_btn").hide(),$$("diff_config_info_lbl").setValue(),$$("diff_detail_panel")&&(webix.extend($$("diff_detail_panel"),webix.OverlayBox),$$("diff_detail_panel").hideOverlay()),$$("diff_detail_resizer").hide(),$$("diff_detail_panel").hide(),$$("diff_reset").hide()}function x(e){1==$$("diff_is_confirm").getValue()?webix.confirm({title:"Execute to "+("trg"==e?"Target":"Source"),ok:"Yes",cancel:"No",text:"Are you sure execute query?"}).then((function(){O(e)})).fail((function(){})):O(e)}function O(e){var t=$$("diffsourcecombo").getValue(),n=$$("difftargetcombo").getValue(),o=$$("diff_source_sql_detail").getValue(),i=$$("diff_target_sql_detail").getValue();$$("diff_is_drop_replace").getValue();webix.message({text:"Not implement yet",type:"warning"})}var j=function(e){function t(){return d(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e,t={view:"toolbar",elements:[{view:"label",id:"diff_config_info_lbl",css:"diff_config_info_lbl"},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-download",id:"diff_download_btn",autowidth:!0,hidden:!0,tooltip:"Download differences result",click:function(){var e=$$("diffsourcecombo").getText(),t=$$("difftargetcombo").getText();webix.toExcel($$("griddiff"),{filename:e.toLowerCase()+"__"+t.toLowerCase()})}},{view:"button",value:"Err",id:"diff_err_filter_btn",autowidth:!0,hidden:!0,tooltip:"Filter error differences",click:function(){$$("differrfilter").setValue("error")}},{view:"pager",width:100,id:p+"_pagerA",size:2e4,template:function(e,t){return"<span style=float:right;line-height:2;padding-right:8px>Rows: "+e.count+"</span>"}}]},n={view:"toolbar",elements:[{view:"icon",icon:"mdi mdi-fullscreen",autowidth:!0,tooltip:"Fullscreen mode",click:function(){var e=h.getItem("source").value,t=h.getItem("target").value,n=$$("griddiff"),o=n.getItem(n.getSelectedId()),i=o.z_type+": "+o.z_schema+"."+o.z_name+" - "+o.z_return;!function(e,t,n,o){e.ui({view:"window",position:"center",fullscreen:!0,head:{cols:[{template:t,type:"header",borderless:!0},{width:76},{},{view:"icon",icon:"wxi-close",tooltip:"Close window",click:function(){this.getParentView().getParentView().destructor()}}]},body:{view:"monaco-editor",id:"diff_all_sql_detail_full",language:"sql",readOnly:!0,diffEditor:!0},on:{onShow:function(){var e=$$("diff_all_sql_detail_full");Object(s.h)(e),webix.extend(e,webix.ProgressBar),e.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),e.disable(),setTimeout((function(){e.hideProgress(),e.enable(),$$("diff_all_sql_detail_full").setDiffValue(n,o)}),800)}}}).show()}(this.$scope,i,e,t)}},{view:"icon",icon:"mdi mdi-transfer-right",tooltip:"Execute query to Target",autowidth:!0,click:function(){x("trg")}},{view:"icon",icon:"mdi mdi-transfer-left",tooltip:"Execute query to Source",autowidth:!0,click:function(){x("scr")}},{width:20},{view:"checkbox",name:"is_confirm",id:"diff_is_confirm",value:1,labelRight:"Confirm Replace",labelWidth:8,width:150,on:{onChange:function(e,t){webix.storage.local.put(u.f,e)}}},{view:"checkbox",name:"is_drop_replace",id:"diff_is_drop_replace",value:0,labelRight:"Drop and replace",labelWidth:8,width:150,on:{onChange:function(e,t){webix.storage.local.put(u.e,e)}}}]};return{id:"z_compare_page",rows:[w,{cols:[(e={view:"datatable",id:"griddiff",select:"row",leftSplit:1,pager:p+"_pagerA",resizeColumn:!0,scrollX:!0},e.select="multiselect",e.multiselect="touch",e.drag=!0,e.on={onBeforeLoad:function(){webix.extend(this,webix.ProgressBar),this.showProgress()},onAfterLoad:function(){this.hideProgress(),$$("diff_reset").show(),this.count()?($$("differrfilter").show(),$$("diff_err_filter_btn").show(),$$("diff_download_btn").show(),$$("diff_moreoptions_btn").show()):($$("differrfilter").hide(),$$("diff_err_filter_btn").hide(),$$("diff_download_btn").hide(),$$("diff_moreoptions_btn").hide())},onItemClick:function(e){!function(e,t){var n=e.getItem(t),o=$$("diffsourcecombo").getValue(),r=$$("difftargetcombo").getValue(),a=$$("diff_detail_panel");webix.extend(a,webix.ProgressBar),a.hideOverlay(),a.showProgress({type:"icon",icon:"mdi mdi-loading z_mdi_loader"}),a.disable(),webix.html.addCss(a.getNode(),"z_progress_overlay");var s=i.b+"/detail?source_id="+o+"&target_id="+r+"&source_oid="+n.id_a+"&target_oid="+n.id_b+"&z_type="+n.z_type+"&schema="+n.z_schema+"&name="+n.z_name+"&ret="+n.z_return+"&prm_in="+n.z_params_in+"&prm_out="+n.z_params_out;$$("diff_all_sql_detail").setDiffValue("",""),webix.ajax(s).then((function(e){var t=e.json().data,n=t.source,o=t.target;1==$$("diff_is_drop_replace").getValue()&&(n=t.source_dropdef+"\n"+n,o=t.target_dropdef+"\n"+o),h.parse([{id:"source",value:n},{id:"target",value:o}]),$$("diff_all_sql_detail").setDiffValue(n,o),void 0!==n&&$$("diff_source_sql_detail").setValue(n),void 0!==o&&$$("diff_target_sql_detail").setValue(o),a.hideProgress(),a.enable()})).catch((function(e){setTimeout((function(){a.hideProgress(),a.enable(),webix.message({text:"Content not found",type:"error"})}),1e3)}))}(this,e)},onBeforeDrag:function(){}},e.columns=_,e),{view:"resizer",id:"diff_detail_resizer",hidden:!0},{hidden:!0,gravity:2,id:"diff_detail_panel",css:"diff_detail_panel",rows:[n,{cells:[{view:"monaco-editor",id:"diff_all_sql_detail",language:"sql",readOnly:!0,diffEditor:!0},{view:"monaco-editor",id:"diff_source_sql_detail",language:"sql",readOnly:!0},{view:"monaco-editor",id:"diff_target_sql_detail",language:"sql",readOnly:!0}]},{view:"tabbar",type:"bottom",multiview:!0,options:[{value:"<span class='webix_icon fas fa-film'></span><span style='padding-left: 4px'>All</span>",id:"diff_all_sql_detail"},{value:"<span class='webix_icon fas fa-film'></span><span style='padding-left: 4px'>Source</span>",id:"diff_source_sql_detail"},{value:"<span class='webix_icon fas fa-info'></span><span style='padding-left: 1px'>Target</span>",id:"diff_target_sql_detail"}],height:30,on:{onAfterTabClick:function(e){}}}]},{hidden:!0,gravity:2,id:"diff_newtask_panel",css:"diff_newtask_panel",rows:[y,g]}]},t]}},t.prototype.ready=function(){$$("diff_swap_btn").disable(),$$("diff_compare_btn").disable(),Object(s.h)($$("diff_all_sql_detail")),Object(s.h)($$("diff_source_sql_detail")),Object(s.h)($$("diff_target_sql_detail"));var e=webix.storage.local.get(u.f);e&&$$("diff_is_confirm").setValue(e);var t=webix.storage.local.get(u.e);t&&$$("diff_is_drop_replace").setValue(t)},t}(o.c);t.default=j},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryDatabase",(function(){return v}));var o=n(1),i=n(2),r=n(7),a=n(4),s=n(9),c=n(3),l=n(23);n(8);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=i.b.prefix+"_server",p=!1,h="",b=function(){var e=f+"_win",t={padding:10,view:"form",id:f+"_form",width:500,type:"clean",hidden:!0,elements:[{cols:[{view:"text",label:"Name",name:"conn_name",id:f+"_conn_name"},{view:"text",label:"Database",name:"database",id:f+"_database"}]},{cols:[{view:"text",label:"Host",name:"host",id:f+"_host"},{cols:[{view:"text",label:"Port",name:"port",id:f+"_port",value:"5432",type:"number",labelWidth:70},{view:"switch",name:"ssl",value:0,label:"SSL",labelWidth:35,width:80}]}]},{cols:[{view:"text",label:"Username",name:"user",id:f+"_user"},{view:"text",label:"Password",name:"password",id:f+"_password",type:"password",labelWidth:70,attributes:{autocomplete:"off"},autocomplete:"new-password"}]}],rules:{conn_name:webix.rules.isNotEmpty,database:webix.rules.isNotEmpty,host:webix.rules.isNotEmpty,port:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty"),"database"==o&&n.push("Database can't be empty"),"host"==o&&n.push("Host can't be empty"),"port"==o&&n.push("Port can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:70,bottomPadding:1}},n={view:"toolbar",id:f+"_form_tb",css:"z-tb",width:500,elements:[{cols:[{view:"button",label:"Add",autowidth:!0,id:f+"_add_btn",click:function(){$$(f+"_form").show(),$$(f+"_form").clear(),$$(f+"_save_btn").show(),$$(f+"_form_cancel_btn").show(),$$(f+"_add_btn").hide(),$$(f+"_test_btn").show(),$$(f+"_port").setValue("5432"),p=!1,h=""}},{view:"button",value:"Save",autowidth:!0,hidden:!0,id:f+"_save_btn",click:function(){_()}},{view:"button",value:"Delete",id:f+"_delete_btn",autowidth:!0,hidden:!0,click:function(){m()}},{view:"button",value:"Duplicate",tooltip:"Duplicate selected",autowidth:!0,hidden:!0,id:f+"_duplicate_btn",click:function(){_(!0)}},{view:"button",value:"Cancel",id:f+"_form_cancel_btn",autowidth:!0,hidden:!0,click:function(){$$(f+"_form").hide(),$$(f+"_add_btn").show(),$$(f+"_form_cancel_btn").hide(),$$(f+"_save_btn").hide(),$$(f+"_save_btn").setValue("Save"),$$(f+"_delete_btn").hide(),$$(f+"_dupicate_btn").hide(),$$(f+"_table").clearSelection(),p=!1,h=""}},{},{view:"button",label:"Test",autowidth:!0,hidden:!0,id:f+"_test_btn",click:function(){var e=$$(f+"_form").getValues();e.type=2,Object(l.b)(!1,e)}}]}]};return{view:"window",modal:!0,id:e,position:"center",move:!0,head:{height:38,template:"DB Connection"},body:{rows:[{cols:[{width:220,rows:[{view:"toolbar",id:f+"_form_tb_dblist",css:"z-tb",elements:[{cols:[{view:"combo",id:f+"_source_combo",placeholder:"Source DB",options:{url:a.a+"/content?type=1&ls=true",on:{onBeforeShow:function(){var e,t;e=$$(f+"_source_combo"),(t=e.getPopup().getList()).clearAll(),e.setValue(""),e.getPopup().getList().unselect(),t.load(a.a+"/conn?type=1&ls=true")}}},on:{onChange:function(e,t){this.getPopup().getList();!function(e){var t=$$(f+"_db_list");t.clearAll(),t.load(s.a+"?id="+e)}(e)}}},{view:"button",type:"icon",icon:"mdi mdi-chevron-right",tooltip:"Add selected database",css:"zmdi_padding",autowidth:!0,click:function(){var e=$$(f+"_db_list"),t=e.getItem(e.getSelectedId()),n=$$(f+"_source_combo"),o={id:n.getValue(),server:n.getText(),copydb:t.value};webix.ajax().post(a.a+"/copyconn",o,(function(e){webix.message({text:"Connection <strong>"+t.value+" ("+n.getText()+")</strong> added.",type:"success"}),w()})).fail((function(e){Object(c.i)(e)}))}}]}]},{view:"list",template:"#value#",id:f+"_db_list",select:!0,data:[]}]},{rows:[t,n,{view:"datatable",id:f+"_table",resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",height:300,pager:"pagerA",columns:[{id:"conn_name",header:"Name",width:150},{id:"database",header:"Database",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:100},{id:"user",header:"Username",width:150},{id:"ssl",header:"SSL",width:50}],on:{onLoadError:function(e,t,n){Object(c.i)(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(f+"_form").show(),$$(f+"_form_cancel_btn").show(),$$(f+"_save_btn").show(),$$(f+"_save_btn").setValue("Update"),$$(f+"_test_btn").show(),$$(f+"_delete_btn").show(),$$(f+"_duplicate_btn").show(),$$(f+"_add_btn").hide(),$$(f+"_password").setValue(),p=!0;var t=this.getItem(e);h=t.conn_name},onItemDblClick:function(){}},url:a.a+"/conn?type=2"},{view:"toolbar",elements:[{view:"pager",id:"pagerA",css:"z-pager-aligned-left",size:100,template:function(e,t){return e.count>0?"<span class='z-pager-no'>"+e.count+"</span>":""}},{},{view:"button",value:"Close",autowidth:!0,click:function(){y()}}]}]}]}]},on:{onShow:function(){$$(f+"_conn_name").focus()}}}};function _(e){if($$(f+"_form").validate()){void 0===e&&(e=!1);var t=$$(f+"_form").getValues(),n=t.conn_name;if(t.type=2,t.user_id=r.d.userId,!p||e){if(e&&h==t.conn_name)return void webix.message({text:"Please Change to different Name",type:"error"});if(""==t.password)return webix.message({text:"Password can't be empty",type:"error"});webix.ajax().post(a.a+"/conn",t,(function(e){webix.message({text:"<strong>"+n+"</strong> saved.",type:"success"}),w()})).fail((function(e){Object(c.i)(e)}))}else webix.ajax().put(a.a+"/conn/"+t.id,t,(function(e){webix.message({text:"<strong>"+n+"</strong> updated.",type:"success"}),w()})).fail((function(e){Object(c.i)(e)}))}}var m=function(){var e=$$(f+"_table"),t=e.getItem(e.getSelectedId()),n=t.conn_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.a+"/conn/"+t.id,null,(function(e){webix.message("<strong>"+n+" </strong> deleted."),w()}))}})},w=function(){$$(f+"_table").clearAll(),$$(f+"_table").load(a.a+"/conn?type=2"),g()},y=function(){$$(f+"_form").clear(),$$(f+"_win").destructor()},g=function(){$$(f+"_form").hide(),$$(f+"_add_btn").show(),$$(f+"_form_cancel_btn").hide(),$$(f+"_save_btn").hide(),$$(f+"_save_btn").setValue("Save"),$$(f+"_delete_btn").hide(),$$(f+"_duplicate_btn").hide(),$$(f+"_test_btn").hide(),$$(f+"_table").clearSelection(),p=!1,h=""},v=function(e){function t(){return u(this,t),d(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return b()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(f+"_form").bind($$(f+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"QueryHelp",(function(){return c}));var o=n(1);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(2).b.prefix+"_help",s=[{id:1,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>;&nbsp;</span>",shortcut:"Focus to quick search"},{id:2,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>M</span>",shortcut:"Open new Query"},{id:3,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>F</span>",shortcut:"Find"},{id:4,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>H</span>",shortcut:"Find and Replace"},{id:5,key:"<span class='btn_template'>Ctrl</span> <span class='btn_template'>Shift</span>  <span class='btn_template'>K</span>",shortcut:"Delete line"},{id:6,key:"<span class='btn_template'>Alt</span> <span class='btn_template'> <i class='mdi mdi-arrow-up'></i> or <i class='mdi mdi-arrow-down'></i> </span>",shortcut:"Move line up or down"},{id:7,key:"<span class='btn_template'>Shift</span> <span class='btn_template'>Alt</span> <span class='btn_template'> <i class='mdi mdi-arrow-up'></i> or <i class='mdi mdi-arrow-down'></i> </span>",shortcut:"Edit multiline"}],c=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",modal:!0,id:e=a+"_win",position:"center",move:!0,head:{height:38,cols:[{width:30},{view:"label",label:"Shortcut",align:"center"},{view:"icon",icon:"mdi mdi-window-close",css:"win_btn",click:function(){$$(e).destructor()}}]},body:{rows:[{view:"datatable",id:a+"_table",resizeColumn:!0,select:"row",height:400,width:300,columns:[{header:[],id:"key",adjust:!0},{header:[],id:"shortcut",width:500}],on:{onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()}},data:s}]}};var e},t.prototype.show=function(e){this.getRoot().show(e)},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"DatabaseServer",(function(){return w}));var o=n(1),i=n(23),r=n(7),a=n(4),s=n(3),c=(n(8),n(31));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=i.a.prefix+"_server",f=!1,p=function(){return{view:"window",modal:!0,id:d+"_win",position:"center",move:!0,head:{height:38,template:"Server"},body:{rows:[{padding:10,view:"form",id:d+"_form",width:500,type:"clean",hidden:!0,elements:[{view:"text",label:"Name",name:"conn_name",id:d+"_conn_name"},{cols:[{view:"text",label:"Host",name:"host",id:d+"_host"},{cols:[{view:"text",label:"Port",name:"port",id:d+"_port",value:"5432",type:"number",labelWidth:70},{view:"switch",name:"ssl",value:0,label:"SSL",labelWidth:35,width:80}]}]},{cols:[{view:"text",label:"Username",name:"user",id:d+"_user"},{view:"text",label:"Password",name:"password",id:d+"_password",type:"password",labelWidth:70,attributes:{autocomplete:"new-password"}}]}],rules:{lable_size_inc:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:70,bottomPadding:1}},{view:"toolbar",id:d+"_form_tb",css:"z-tb",width:500,elements:[{cols:[{view:"button",label:"Add",autowidth:!0,id:d+"_add_btn",click:function(){$$(d+"_form").show(),$$(d+"_form").clear(),$$(d+"_save_btn").show(),$$(d+"_test_btn").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_port").setValue("5432"),f=!1}},{view:"button",value:"Save",autowidth:!0,hidden:!0,id:d+"_save_btn",click:function(){var e,t;e=$$(d+"_form").getValues(),t=e.conn_name,e.type=1,e.user_id=r.d.userId,f?webix.ajax().put(a.a+"/conn/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."}),b()})).fail((function(e){Object(s.i)(e)})):webix.ajax().post(a.a+"/conn",e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved."}),b()})).fail((function(e){Object(s.i)(e)}))}},{view:"button",value:"Delete",id:d+"_delete_btn",autowidth:!0,hidden:!0,click:function(){h()}},{view:"button",value:"Cancel",id:d+"_form_cancel_btn",autowidth:!0,hidden:!0,click:function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_form_cancel_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_save_btn").setValue("Save"),$$(d+"_delete_btn").hide(),$$(d+"_table").clearSelection(),f=!1}},{},{view:"button",label:"Test",autowidth:!0,hidden:!0,id:d+"_test_btn",click:function(){var e=$$(d+"_form").getValues();e.type=1,Object(i.b)(!1,e)}}]}]},{view:"datatable",id:d+"_table",resizeColumn:!0,scrollX:!0,datafetch:100,select:"row",height:300,pager:"pagerA",columns:[{id:"conn_name",header:"Name",width:150},{id:"host",header:"Host",width:150},{id:"port",header:"Port",width:100},{id:"user",header:"Username",width:150},{id:"ssl",header:"SSL",width:50}],on:{onLoadError:function(e,t,n){Object(s.i)(n)},onBeforeLoad:function(){this.showOverlay("Loading...")},onAfterLoad:function(){this.hideOverlay()},onItemClick:function(e){$$(d+"_form").show(),$$(d+"_form_cancel_btn").show(),$$(d+"_save_btn").show(),$$(d+"_save_btn").setValue("Update"),$$(d+"_delete_btn").show(),$$(d+"_test_btn").show(),$$(d+"_add_btn").hide(),$$(d+"_password").setValue(),f=!0},onItemDblClick:function(){}},url:a.a+"/conn?type=1"},{view:"toolbar",elements:[{view:"pager",id:"pagerA",css:"z-pager-aligned-left",size:100,template:function(e,t){return e.count>0?"<span class='z-pager-no'>"+e.count+"</span>":""}},{},{view:"button",value:"Close",autowidth:!0,click:function(){_()}}]}]},on:{onShow:function(){$$(d+"_conn_name").focus()}}}};var h=function(){var e=$$(d+"_table"),t=e.getItem(e.getSelectedId()),n=t.conn_name;webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(a.a+"/conn/"+t.id,null,(function(e){webix.message("<strong>"+n+" </strong> deleted."),b()}))}})},b=function(){$$(d+"_table").clearAll(),$$(d+"_table").load(a.a+"/conn?type=1"),m()},_=function(){$$(d+"_form").clear(),$$(d+"_win").destructor(),setTimeout((function(){Object(c.reloadServerCombo)()}),1e3)},m=function(){$$(d+"_form").hide(),$$(d+"_add_btn").show(),$$(d+"_save_btn").setValue("Update"),$$(d+"_form_cancel_btn").hide(),$$(d+"_test_btn").hide(),$$(d+"_save_btn").hide(),$$(d+"_delete_btn").hide(),$$(d+"_table").clearSelection(),f=!1},w=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return p()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(d+"_form").bind($$(d+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(14),r=n(46),a=n(47);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=i.c+"_page",u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_copydata_page",rows:[a.default,{rows:[{id:l+"_source_panel",cols:[{id:l+"_type_source_query",cols:[{view:"monaco-editor",id:l+"_source_editor",language:"sql",minimap:{enabled:!1}}]},{view:"scrollview",id:l+"_type_source_sheet",hidden:!0,css:"copydata_scrollview",body:{id:l+"_scrollview_body",rows:[]}},{hidden:!0,id:l+"_type_uploadcsv",rows:[{view:"scrollview",id:l+"_uploadcsv_viewer",hidden:!0,scroll:!1,body:{id:l+"_uploadcsv_scroll_body",rows:[]}},{id:l+"_uploadcsv_empty",template:"<div class='z_center_middle font_size14'><div>Please choose file, <span style='text-decoration:underline;'>first row as field name</span></div></div>"}]}]},{view:"resizer",css:"z_resizer",id:l+"console_resizer",hidden:!0},r.default]}]}},t.prototype.ready=function(){},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(14).c+"_page";t.default={id:o+"console_panel",hidden:!0,rows:[{cols:[{view:"tabbar",css:"copy_tabbar_bottom",id:o+"tabbar_bottom",options:[{value:"Console",id:o+"console_tab"}],height:26,tabOffset:0,optionWidth:100},{view:"icon",icon:"mdi mdi-close",tooltip:"Close",click:function(){$$(o+"console_panel").hide(),$$(o+"console_resizer").hide()}},{width:4}]},{cells:[{id:o+"console_tab",rows:[{view:"template",id:o+"console_result"}]}]}]}},function(e,t,n){"use strict";n.r(t);var o=n(14),i=n(4),r=n(17),a=n(3),s=o.c+"_page";function c(){var e=$$(s+"_target_db").getValue().trim().length>0,t=$$(s+"_source_db").getValue().trim().length>0,n=$$(s+"_schema_table").getValue().trim().length>0;"query"==$$(s+"_source_type").getValue()?e&&t&&n?$$(s+"apply_copy").enable():$$(s+"apply_copy").disable():e&&n?$$(s+"apply_copy").enable():$$(s+"apply_copy").disable()}t.default=toolbar={view:"toolbar",css:"z_query_toolbar",elements:[{view:"combo",label:"From",placeholder:"choose",id:s+"_source_type",width:160,labelWidth:40,value:"query",options:[{id:"query",value:"query"},{id:"spreadsheet",value:"spreadsheet"},{id:"csv",value:"csv"}],on:{onChange:function(e,t){Object(r.sourceTypeChanges)(e)}}},{view:"combo",id:s+"_source_db",placeholder:"Source DB",width:200,options:{url:i.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){c()}}},{view:"combo",label:"Delimeter",id:s+"_uploadcsv_delimeter",hidden:!0,width:130,labelWidth:70,options:[{id:1,value:","},{id:2,value:";"}],on:{onChange:function(e){e?$$(s+"_uploadcsv_btn").enable():$$(s+"_uploadcsv_btn").disable()}}},{view:"uploader",value:"Choose file",id:s+"_uploadcsv_btn",accept:".csv, text/csv",css:"webix_secondary",autosend:!1,hidden:!0,disabled:!0,autowidth:!0,multiple:!1,on:{onBeforeFileAdd:function(e){if(0==$$(s+"_uploadcsv_delimeter").getValue().length)return webix.message({text:"Please select delimeter",type:"error"});var t=e.file,n=new FileReader;return n.onload=function(e){var t=e.target.result,n=$$(s+"_uploadcsv_delimeter").getText(),o=Object(a.b)(t,n);!function(e,t){$$(s+"_uploadcsv_viewer").show(),$$(s+"_cancel_action").show();var n=[];e.forEach((function(e,t){n.push({id:e,header:e,editor:"text"})}));var o={view:"datatable",id:s+"_csv_data",select:"row",css:"webix_data_border webix_header_border copydata_spreadsheet",resizeColumn:!0,resizeRow:!0,editable:!0,columns:n,data:t,scheme:{$init:function(e){e.index=this.count()}}},i=$$(s+"_uploadcsv_scroll_body"),r=i.getChildViews();r[0]&&i.removeView(r[0]);i.addView(o),$$(s+"_uploadcsv_empty").hide()}(o.col_name,o.data)},n.readAsText(t),!1}}},{view:"combo",label:"Row count",id:s+"_row_count",hidden:!0,value:"100",width:150,labelWidth:70,options:["100","500","1000","3000","6000"],on:{onChange:function(e){Object(r.generateEmptyRow)()}}},{view:"checkbox",labelRight:"First row as Column",id:s+"_first_row_column",hidden:!0,tooltip:"First row as Header",labelWidth:8,width:150,value:0},{view:"label",label:"To",width:30,css:"z_label_size_9pt"},{view:"combo",id:s+"_target_db",width:200,placeholder:"Target DB",options:{url:i.a+"/content?type=2&ls=true",on:{onBeforeShow:function(){}}},on:{onChange:function(e,t){c()}}},{view:"text",width:150,placeholder:"schema.table",id:s+"_schema_table",on:{onTimedKeypress:function(){c()}}},{view:"button",value:"X",tooltip:"Cancel, clear source data",autowidth:!0,hidden:!0,css:"zmdi_padding",id:s+"_cancel_action",click:function(){var e=$$(s+"_source_type").getValue();if("query"==e);else if("spreadsheet"==e)Object(r.generateEmptyRow)();else{$$(s+"_uploadcsv_viewer").hide(),$$(s+"_uploadcsv_empty").show();var t=$$(s+"_uploadcsv_scroll_body"),n=t.getChildViews();n[0]&&t.removeView(n[0])}this.hide()}},{width:20},{view:"button",type:"icon",id:s+"apply_copy",icon:"mdi mdi-check-bold",autowidth:!0,disabled:!0,label:"Apply Copy",click:function(){Object(r.applyCopyAction)()}}]}},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(19);n(35);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=i.a.prefix,c={view:"toolbar",elements:[{view:"icon",id:s+"_refresh_btn",tooltip:"Refresh",icon:"mdi mdi-sync",autowidth:!0,click:function(){}}]},l=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_page",rows:[{cols:[{rows:[c,{view:"list",width:250,template:"#title#",select:!0,css:"z_generator_list",data:[{id:"generator.outparams",title:"Out params"},{id:"generator.insertquery",title:"Insert Query"}],on:{onItemClick:function(e){this.$scope.show(e,{target:s+"_pageview"})}}}]},{$subview:!0,name:s+"_pageview"}]}]}},t.prototype.init=function(){this.show("generator.default",{target:s+"_pageview"})},t}(o.c);t.default=l},function(e,t,n){"use strict";n.r(t),n.d(t,"UserForm",(function(){return h}));var o=n(1),i=(n(8),n(12)),r=n(3);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=i.b.prefix,l=void 0;function u(){i.b.isEdit;return{view:"window",modal:!0,id:c+"_win",position:"center",move:!0,width:600,head:{height:35,cols:[{view:"icon",icon:"mdi mdi-plus",click:function(){$$(c+"_form").show(),$$(c+"_cancel_btn").show(),$$(c+"_username").focus()}},{template:"User",css:"z-window-header webix_view webix_header webix_win_title",borderless:!0},{width:30}]},body:{rows:[{hidden:!0,padding:10,view:"form",id:c+"_form",width:600,type:"clean",elements:[{cols:[{view:"text",label:"Username",name:"username",labelWidth:70,id:c+"_username"},{view:"text",label:"Password",name:"password",type:"password",labelWidth:70,id:c+"_password",attributes:{autocomplete:"new-password"}}]},{cols:[{view:"text",label:"Fullname",name:"fullname",labelWidth:70,id:c+"_fullname"},{view:"text",label:"Email",name:"email",type:"email",labelWidth:70,id:c+"_email"}]},{cols:[{view:"combo",label:"Role",name:"user_level",labelWidth:70,id:c+"_role",options:[{id:1,value:"Elephant"},{id:2,value:"Spider"},{id:3,value:"Turtle"}],value:3},{}]},{cols:[{width:70},{view:"button",value:"Save",autowidth:!0,id:c+"_save_btn",click:function(){var e,t;$$(c+"_form").validate()&&(e=$$(c+"_form").getValues(),t=e.username+" - "+e.fullname,l?webix.ajax().put(i.c+"/users/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated.",type:"success"}),f()})).fail((function(e){showError(e)})):webix.ajax().post(i.c+"/register",e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved.",type:"success"}),f()})).fail((function(e){showError(e)})))}},{view:"button",value:"Delete",autowidth:!0,hidden:!0,id:c+"_delete_btn",click:function(){d()}},{view:"button",value:"Cancel",autowidth:!0,hidden:!0,id:c+"_cancel_btn",click:function(){p(),$$(c+"_username").setValue(),$$(c+"_username").focus(),$$(c+"_password").setValue(),$$(c+"_fullname").setValue(),$$(c+"_email").setValue(),$$(c+"_role").setValue(3)}}]}],rules:{username:webix.rules.isNotEmpty,fullname:webix.rules.isNotEmpty,user_level:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"username"==o&&n.push("Username can't be empty"),"fullname"==o&&n.push("Fullname can't be empty"),"user_level"==o&&n.push("Role can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:100,bottomPadding:1}},{view:"datatable",minHeight:300,id:c+"_table",select:"row",columns:[{id:"username",header:"Username",sort:"string",width:150},{id:"fullname",header:"Fullname",sort:"string",width:200},{id:"email",header:"Email",sort:"string",width:200},{id:"user_level",header:"Role",width:100},{id:"last_login",header:"Last login",width:150}],url:i.c+"/users",pager:c+"_pagerA",on:{onItemClick:function(e){$$(c+"_form").show(),$$(c+"_cancel_btn").show(),$$(c+"_save_btn").show(),$$(c+"_delete_btn").show(),$$(c+"_password").setValue(),l=!0}}},{view:"toolbar",elements:[{view:"pager",id:c+"_pagerA",css:"z-pager-aligned-left",size:r.e,template:function(e,t){var n=e.page*e.size,o=n+e.size;return o>e.count&&(o=e.count),"<span class='z-pager-no'>"+(n+1)+"-"+o+" of "+e.count+"</span> "+t.prev()+t.next()+'<button type="button" class="webix_pager_item z_refresh_user_pager" aria-label="Refresh page"><span class="webix_icon mdi mdi-sync"></span></button>'},onClick:{z_refresh_user_pager:function(e,t){return f(),!1}}},{},{view:"button",value:"Close",autowidth:!0,click:function(){$$(c+"_form").clear(),$$(c+"_win").destructor()}}]}]},on:{onShow:function(){}}}}var d=function(){var e=$$(c+"_table"),t=e.getItem(e.getSelectedId()),n=t.username;if("admin"==t.username)return webix.message({text:"Ops, <strong>admin</strong> user can not delete.",type:"error"});webix.confirm({ok:"Yes",cancel:"No",text:"Are you sure to delete: <strong>"+n+"</strong> ?",callback:function(e){e&&webix.ajax().del(i.c+"/users/"+t.id,null,(function(e){webix.message({text:"<strong>"+n+" </strong> deleted.",type:"success"}),f()}))}})};function f(){$$(c+"_table").clearAll(),$$(c+"_table").load(i.c+"/users"),p()}function p(){$$(c+"_form").hide(),$$(c+"_delete_btn").hide(),$$(c+"_cancel_btn").hide(),$$(c+"_table").clearSelection()}var h=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return u()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){$$(c+"_form").bind($$(c+"_table"))},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"ChangePassword",(function(){return p}));var o=n(1),i=n(12),r=n(3),a=(n(8),n(7));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=i.b.prefix,u=l+"_changepass_form";function d(){return{view:"window",modal:!0,id:l+"_win",position:"center",head:{height:38,template:"Change Password"},body:{rows:[{padding:10,view:"form",id:u,width:400,type:"clean",elements:[{view:"text",type:"password",name:"old_password",label:"Old Password",tooltip:"Old Password",id:l+"-old_pass",labelWidth:140},{view:"text",type:"password",name:"new_password",label:"New Password",tooltip:"New Password",id:l+"-new_pass",labelWidth:140},{view:"text",type:"password",name:"repeat_password",label:"Repeat New Password",tooltip:"Repeat New Password",id:l+"-repeat_pass",labelWidth:140}],rules:{old_password:webix.rules.isNotEmpty,new_password:webix.rules.isNotEmpty,repeat_password:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"old_password"==o&&n.push("Old Password can't be empty"),"new_password"==o&&n.push("New Password can't be empty"),"repeat_password"==o&&n.push("Repeat New Password can't be empty");webix.message({type:"error",text:n.join("<br>")})}}}},{view:"toolbar",elements:[{},{view:"button",label:"Change Password",autowidth:!0,id:l+"-save_btn",click:function(){var e;$$(u).validate()&&(e=$$(u).getValues(),webix.ajax().put(i.c+"/users/"+a.d.userId+"/changepass",e,(function(e){webix.message({type:"success",text:"Password changed"}),f()})).fail((function(e){webix.message({type:"error",text:JSON.parse(e.response).message}),Object(r.i)(e)})))}},{view:"button",value:"Cancel",autowidth:!0,click:function(){f()}}]}]},on:{onShow:function(){$$(l+"-old_pass").focus()}}}}function f(){$$(l+"_win").destructor()}var p=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return d()},t.prototype.show=function(e){this.getRoot().show(e)},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(1),i=(n(8),n(15)),r=n(16),a=n(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=r.a.prefix,u={view:"toolbar",elements:[{view:"button",type:"icon",id:l+"_refresh_btn",tooltip:"Refresh",css:"zmdi_padding",icon:"mdi mdi-sync z_primary_color",autowidth:!0,click:function(){f()}},{view:"text",id:l+"_edit_title",hidden:!0},{view:"button",type:"icon",css:"zmdi_padding",id:l+"_edit_btn",hidden:!0,tooltip:"Edit",icon:"mdi mdi-pencil-box-outline z_primary_color",autowidth:!0,click:function(){this.hide(),$$(l+"_save_btn").show(),$$(l+"_cancel_btn").show(),$$(l+"_edit_title").show(),setTimeout((function(){return $$(l+"_edit_title").focus()}),500)}},{view:"button",type:"icon",css:"zmdi_padding",id:l+"_save_btn",hidden:!0,tooltip:"Edit",icon:"mdi mdi-content-save-outline z_primary_color",autowidth:!0,click:function(){var e,t,n;e=$$(l+"_share_list"),t=e.getItem(e.getSelectedId()),n={title:$$(l+"_edit_title").getValue()},webix.ajax().put(r.b+"/"+t.id,n,(function(e){webix.message({text:"Title updated",type:"success"}),f()})).fail((function(e){showError(e)}))}},{view:"button",type:"icon",css:"zmdi_padding",id:l+"_cancel_btn",hidden:!0,tooltip:"Cancel Edit",icon:"mdi mdi-close z_primary_color",autowidth:!0,click:function(){p()}},{view:"button",type:"icon",css:"zmdi_padding",id:l+"_delete_btn",hidden:!0,tooltip:"Delete",icon:"mdi mdi-delete-outline z_primary_color",autowidth:!0,click:function(){var e;1==(e=$$(l+"_share_list")).getItem(e.getSelectedId()).is_me?webix.ui({view:"window",id:l+"_del_confirm",head:{height:4},css:"z_confirm_del_head",modal:!0,position:"center",body:{padding:10,rows:[{view:"label",label:"Are you sure to delete ?",align:"center"},{cols:[{},{view:"button",value:"Cancel",autowidth:!0,click:function(){$$(l+"_del_confirm").close()}},{view:"button",value:"Delete for everyone",autowidth:!0,click:function(){d(!0),$$(l+"_del_confirm").close()}},{view:"button",value:"Delete for me",css:"webix_primary",autowidth:!0,click:function(){d(),$$(l+"_del_confirm").close()}},{}]}]}}).show():webix.confirm({ok:"Yes",cancel:"No",type:"confirm-warning",text:"Are you sure to delete ?",callback:function(e){e&&d()}})}},{width:10},{view:"icon",icon:"mdi mdi-content-copy",autowidth:!0,id:l+"_copy_share_clipboard",hidden:!0,tooltip:"Copy result to clipboard",css:"z_icon_color_primary z_icon_size_17",click:function(){var e=this,t=$$(l+"_share_sql").getValue();if(t.length>0){this.hide();var n=$$(l+"_copy_share_clipboard_done");n.show(),setTimeout((function(){e.show(),n.hide()}),1500),Object(i.a)(t)}}},{view:"template",autowidth:!0,hidden:!0,width:31,css:{"padding-top":"3px"},borderless:!0,id:l+"_copy_share_clipboard_done",template:'<svg class="animated-check" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'},{},{view:"label",label:"",id:l+"_by_user",width:200,align:"right",css:"z_label_normal"},{view:"icon",icon:"mdi mdi-link-variant z_primary_color",tooltip:"Copy link",id:l+"_copy_link_btn",hidden:!0,click:function(){var e=$$(l+"_share_list"),t=e.getItem(e.getSelectedId());t&&(webix.html.addCss($$(l+"_copy_link_btn").getNode(),"blink_me"),Object(i.a)(a.r+"/#!/shareview?x="+t.ukey),setTimeout((function(){webix.html.removeCss($$(l+"_copy_link_btn").$view,"blink_me")}),2e3))}},{view:"icon",icon:"mdi mdi-open-in-new z_primary_color",tooltip:"Open in new window",id:l+"_open_newin_btn",css:"z_icon_size_17",hidden:!0,click:function(){var e=$$(l+"_share_list"),t=e.getItem(e.getSelectedId());t&&window.open(a.r+"/#!/shareview?x="+t.ukey,"_blank")}},{width:10}]};function d(e){var t=$$(l+"_share_list"),n=t.getItem(t.getSelectedId()),o=1==n.is_me?1:2;1==n.is_me&&2==n.share_status&&(o=3),(0==n.is_me&&1==n.share_status||e)&&(o=3),webix.ajax().del(r.b+"/"+o+"/"+n.id,(function(e){webix.message({text:"Share deleted",type:"success"}),f(!1,!0)}))}function f(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=$$(l+"_share_list"),o=n.getSelectedId(),i=n.getItem(o);n.clearAll(),n.load(r.b).then((function(e){console.log("selId",o),console.log("item",i),i&&!t&&n.select(o.id)})),e||($$(l+"_share_sql").setValue(),p())}function p(){$$(l+"_save_btn").hide(),$$(l+"_edit_btn").hide(),$$(l+"_delete_btn").hide(),$$(l+"_edit_title").hide(),$$(l+"_cancel_btn").hide(),$$(l+"_copy_link_btn").hide(),$$(l+"_open_newin_btn").hide(),$$(l+"_edit_title").setValue(),$$(l+"_copy_share_clipboard").hide(),$$(l+"_by_user").setValue("")}var h=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_share_page",rows:[u,{cols:[{view:"datatable",id:l+"_share_list",width:250,template:"<span class='mdi mdi-#icon#'></span> #title# <span class='webix_icon mdi mdi-close z_share_remove_icon' title='Remove'></span>",select:!0,tooltip:"#share_user_label#",css:"z_share_list",headerRowHeight:-1,scheme:{$change:function(e){0==e.is_read&&0==e.is_me&&(e.$css="z_read_bold")}},columns:[{fillspace:!0,template:function(e,t,n,o,i){return"<span class='mdi mdi-"+e.icon+"'></span> "+e.title}}],url:r.b,on:{onItemClick:function(e){var t=this.getItem(e);$$(l+"_share_sql").setValue(t.content),$$(l+"_copy_share_clipboard").show(),$$(l+"_save_btn").hide(),$$(l+"_edit_title").setValue(t.title),$$(l+"_copy_link_btn").show(),$$(l+"_open_newin_btn").show(),$$(l+"_by_user").setValue(t.share_user_label_flat),$$(l+"_delete_btn").show(),1==t.is_me?$$(l+"_edit_btn").show():$$(l+"_edit_btn").hide(),function(e){var t=$$(l+"_share_list"),n=t.getSelectedId(),o=t.getItem(n);if(o.is_read!=e){var i={is_read:e};webix.ajax().put(r.b+"/read/"+o.id,i,(function(e){$$(l+"_share_list").clearAll(),$$(l+"_share_list").load(r.b).then((function(e){t.select(n)}))})).fail((function(e){showError(e)}))}}(1)}}},{rows:[{view:"monaco-editor",css:"z_console_editor",id:l+"_share_sql",lineNumbers:"off",fontSize:"12px",renderLineHighlight:"none"}]}]}],on:{onViewShow:function(){f(!0)}}}},t.prototype.init=function(){},t.prototype.ready=function(){$$(l+"_share_sql").getEditor(!0).then((function(e){e.updateOptions({readOnly:!0})}))},t.prototype.urlChange=function(e,t){"#!/share"==window.location.hash&&this.show("/index")},t}(o.c);t.default=h},function(e,t,n){"use strict";n.r(t),n.d(t,"CompareHelp",(function(){return s}));var o=n(1);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var a=n(20).a.prefix+"_help",s=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",modal:!0,id:e=a+"_win",position:"center",move:!0,head:{height:38,cols:[{width:30},{view:"label",label:"Help",align:"center"},{view:"icon",icon:"mdi mdi-window-close",css:"win_btn",click:function(){$$(e).destructor()}}]},body:{rows:[{template:"\n          <p>\n            <ul style='margin: 0;padding: 0; list-style-type: none;'>\n              <li><span class='z-cell-src' style='padding: 2px'>src</span> = Source not found</li>\n              <li><span class='z-cell-trg' style='padding: 2px'>trg</span> = Source not found</li>\n              <li><span class='z-cell-diff' style='padding: 2px'>dif</span> = Source and Target are different</li>\n            </ul>\n          </p>\n        "}]}};var e},t.prototype.show=function(e){this.getRoot().show(e)},t}(o.c)},function(e,t,n){"use strict";n.r(t),n.d(t,"DbConfigForm",(function(){return d}));var o=n(1),i=(n(8),n(13)),r=n(22);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=i.a.prefix;function l(){var e=i.a.isEdit;return{view:"window",modal:!0,id:c+"_win",position:"center",move:!0,head:{height:38,template:e?"Edit DB Config":"Add DB Config"},body:{rows:[{padding:10,view:"form",id:c+"_form",width:400,type:"clean",elements:[{view:"text",label:"Name",name:"conn_name",id:c+"_conn_name"},{view:"text",label:"Host",name:"host",id:c+"_host"},{view:"text",label:"Port",name:"port",id:c+"_port",type:"number"},{view:"text",label:"Database",name:"database",id:c+"_database"},{view:"text",label:"User",name:"user",id:c+"_user"},{view:"text",label:"Password",name:"password",id:c+"_password",type:"password"}],rules:{conn_name:webix.rules.isNotEmpty,host:webix.rules.isNotEmpty},on:{onAfterValidation:function(e,t){if(!e){var n=[];for(var o in t)"conn_name"==o&&n.push("Name can't be empty"),"host"==o&&n.push("Host can't be empty");webix.message({type:"error",text:n.join("<br>")})}}},elementsConfig:{labelPosition:"left",labelWidth:100,bottomPadding:1}},{view:"toolbar",elements:[{view:"button",value:"Test",autowidth:!0,click:function(){}},{},{view:"button",label:e?"Update":"Save",autowidth:!0,id:c+"_save_btn",click:function(){$$(c+"_form").validate()&&function(){var e=$$(c+"_form").getValues(),t=""+e.conn_name;i.a.isEdit?webix.ajax().put(i.b+"/"+e.id,e,(function(e){webix.message({text:"<strong>"+t+"</strong> updated."}),Object(r.reloadDbConfig)()})).fail((function(e){showError(e)})):webix.ajax().post(i.b,e,(function(e){webix.message({text:"<strong>"+t+"</strong> saved."}),Object(r.reloadDbConfig)()})).fail((function(e){showError(e)}));u()}()}},{view:"button",value:"Cancel",autowidth:!0,click:function(){u()}}]}]},on:{onShow:function(){}}}}function u(){$$(c+"_form").clear(),$$(c+"_win").destructor(),$$(c+"_edit_btn").hide(),$$(c+"_delete_btn").hide(),$$(c+"_table").clearSelection()}var d=function(e){function t(){return a(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return l()},t.prototype.show=function(e){this.getRoot().show(e)},t.prototype.init=function(e){},t.prototype.ready=function(e){this.$$(c+"_form").setValues(i.a.dataSelected),i.a.isEdit?1==i.a.dataSelected.id&&($$(c+"_form").disable(),$$(c+"_save_btn").disable()):$$(c+"_form").clear()},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(19),r=(n(8),n(4)),a=n(0),s=n(3);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=i.a.prefix+"_insertquery";var d=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{id:"z_generator_content",rows:[{view:"toolbar",elements:[{cols:[{view:"combo",id:u+"_source_combo",placeholder:"Source DB",width:200,options:{url:r.a+"/content?type=2&ls=true"},on:{onChange:function(e,t){webix.storage.local.put(a.k,e)}}},{view:"icon",icon:"mdi mdi-play-box-outline",tooltip:"Generate",autowidth:!0,click:function(){var e;e={id:4,querysql:$$(u+"_insertquery_ed").getValue()},webix.ajax().post(i.b+"/outparams",e,(function(e){var t=JSON.parse(e);void 0!==t.data&&$$(u+"_result").setHTML("<pre id='insert_query_result'>"+t.data+"</pre>")})).fail((function(e){showError(e)}))}},{width:10},{view:"icon",icon:"mdi mdi-content-copy",tooltip:"Copy result content",css:"z_mdi_icon_smaller",autowidth:!0,click:function(){var e=document.getElementById("insert_query_result");e&&function(e,t){try{navigator.clipboard.writeText(t),webix.extend(e,webix.OverlayBox),e.showOverlay("<div class=\"z_overlay\"><span class='z_copied_label animate__animated animate__flash'>Copied! <span class='mdi mdi-checkbox-marked-circle-outline' style='color:orange;'></span></span></div>"),setTimeout((function(){e.hideOverlay()}),1e3)}catch(e){console.error("Failed to copy: ",e)}}($$(u+"_result"),e.innerHTML)}},{view:"icon",icon:"mdi mdi-refresh",tooltip:"Reset",autowidth:!0,click:function(){!function(){var e=$$(u+"_insertquery_ed");e.setValue(""),e.getEditor(!0).then((function(e){e.focus()}));var t=document.getElementById("insert_query_result");t&&(t.innerHTML="")}()}},{}]}]},{view:"monaco-editor",id:u+"_insertquery_ed",language:"sql"},{view:"resizer"},{view:"template",scroll:"xy",css:"z_out_template",id:u+"_result"}]}},t.prototype.init=function(){var e=webix.storage.local.get(a.k);e&&$$(u+"_source_combo").setValue(e),Object(s.h)($$(u+"_insertquery_ed"))},t}(o.c);t.default=d},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var r=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"Migration page"}},t}(n(1).c);t.default=r},function(e,t,n){"use strict";n.r(t),t.default={css:"z_tab_about",template:"\n  <div class='z_about_content'>\n\t\t<h3>About:</h3>\n\t\t<p><strong>ZPG</strong> an experimental side project written with <a href='https://nodejs.org' target='_blank'>NodeJS</a> and <a href='https://webix.com' target='_blank'>Webix</a> (<a href='https://www.npmjs.com/package/webix' target='_blank'>GPL license</a>), inspired by Jenkins and PgAdmin to improve unavailable features to make it simple and easy.<br>\n\t\tFor more other functionality of Postgres please use PgAdmin</p>\n\t\t<p>Features idea:\n\t\t\t<ul>\n\t\t\t\t<li>Easy to navigate</li>\n\t\t\t\t<li>Task SQL continues integration</li>\n\t\t\t\t<li>Comparing between SQL function direct correction</li>\n\t\t\t\t<li>Simple query editor</li>\n\t\t\t\t<li>Easy copy data between database</li>\n\t\t\t\t<li>and more..</li>\n\t\t\t</ul>\n\t\t</p>\n\n\t\t<h4>Requirement:</h4>\n\t\t<p>\n\t\t\t<ul>\n\t\t\t\t<li>Postgres version 9.6 or above</li>\n\t\t\t</ul>\n\t\t</p>\n\n\t\t<h4>Limitation:</h4>\n\t\t<p>\n\t\t\t<ul>\n\t\t\t\t<li>Query not have cancel/stop, alternatively set timeout on setting menu (to be improve should do)</li>\n\t\t\t\t<li>Not show detail tables defenition</li>\n\t\t\t</ul>\n\t\t</p>\n\t\t<section>\n\t\t\t<h4>Todo:</h4>\n\t\t\t<ul>\n\t\t\t\t<li>hide shareview if desktop mode</li>\n\t\t\t\t<li>all: load user setting from json profile</li>\n\t\t\t\t<li>share: reconstruct to separate table and notify socket.io</li>\n\t\t\t\t<li>query: change reload on user setting</li>\n\t\t\t\t<li>compare by profile </li>\n\t\t\t\t<li>execute query in compare</li>\n\t\t\t\t<li>check compatible version</li>\n\t\t\t\t<li>dashboard: show process activity</li>\n\t\t\t</ul>\n\t\t</section>\n\n\t\t<section>\n\t\t\t<h4>Change log:</h4>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.17-dev (03-03-2023)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>add copydata feature</li>\n\t\t\t\t\t<li>fix auto resize setting</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.16-dev (07-02-2023)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>feat toast query result</li>\n\t\t\t\t\t<li>feat auto resize column</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.15-dev (23-12-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>upd direct save on query result</li>\n\t\t\t\t\t<li>feature able share query to other users</li>\n\t\t\t\t\t<li>improve json/long text formatter result</li>\n\t\t\t\t\t<li>fix timezone</li>\n\t\t\t\t\t<li>upd animate copy clipboard</li>\n\t\t\t\t\t<li>upd more detail query history</li>\n\t\t\t\t\t<li>add view, trigger defenition</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.14-dev (24-10-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>add func triggers defenition</li>\n\t\t\t\t\t<li>add views defenition</li>\n\t\t\t\t\t<li>upd bookmark manager</li>\n\t\t\t\t\t<li>show void func list</li>\n\t\t\t\t\t<li>fix detach quick search</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.13-dev (26-09-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>improve query result change to array mode, show type</li>\n\t\t\t\t\t<li>smart cell show detail base on type/text length</li>\n\t\t\t\t\t<li>add connection db from server section</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.12-dev (08-09-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>update console editor </li>\n\t\t\t\t\t<li>fix copy clipboard</li>\n\t\t\t\t\t<li>fix get table content prev version</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.11-dev (10-08-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>fix compare duplicate, remove out params </li>\n\t\t\t\t\t<li>fix overlap search</li>\n\t\t\t\t\t<li>fix show all data duplicate id (webix datatable)</li>\n\t\t\t\t\t<li>upd: query human error result</li>\n\t\t\t\t\t<li>duplicate conn</li>\n\t\t\t\t\t<li>setting ui</li>\n\t\t\t\t\t<li>save last state user (history, dbconn =sideright menu) </li>\n\t\t\t\t\t<li>init app query (reset: profile last 1 month deleted)</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.10-dev (28-06-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>improve deep compare, using db left right joining </li>\n\t\t\t\t\t<li>compare table row content</li>\n\t\t\t\t\t<li>add popup quick search</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.9-dev (22-04-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>improve show table defenition</li>\n\t\t\t\t\t<li>add cascade generate out</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.8-dev (11-03-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>fix copy paste action</li>\n\t\t\t\t\t<li>snippet raise notice</li>\n\t\t\t\t\t<li>clear history</li>\n\t\t\t\t\t<li>manage bookmark</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.7-dev (23-01-2022)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>editor loading async</li>\n\t\t\t\t\t<li>query search auto focus selected</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.6-dev (17-11-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>last state datatype</li>\n\t\t\t\t\t<li>show data type query run</li>\n\t\t\t\t\t<li>more setting query</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.5-dev (15-11-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>enable ssl mode option</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.4-dev (12-11-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>set temporary ignore sslmode</li>\n\t\t\t\t\t<li>enh: set editor font size by profile</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.3-dev (10-11-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>new: out params generator</li>\n\t\t\t\t\t<li>new: layout insert query</li>\n\t\t\t\t\t<li>upd: meta app config</li>\n\t\t\t\t\t<li>upd: setting module by user</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.2-dev (21-10-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>fix: handle catch error table permission</li>\n\t\t\t\t\t<li>fix: handle table not using primary key</li>\n\t\t\t\t\t<li>fix: test db connection</li>\n\t\t\t\t\t<li>upd: user list refresh and pager</li>\n\t\t\t\t\t<li>upd: user list to standard icon</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.1-dev (12-10-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>db: load table content</li>\n\t\t\t\t\t<li>query: switch multi db conn</li>\n\t\t\t\t\t<li>query: direct inline update</li>\n\t\t\t\t\t<li>update db config module by server</li>\n\t\t\t\t\t<li>copy data module</li>\n\t\t\t\t\t<li>user module</li>\n\t\t\t\t\t<li>setting module</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<h4>0.0.0-dev (05-05-2021)</h4>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>add: db, query, conn config</li>\n\t\t\t\t\t<li>fix: query response</li>\n\t\t\t\t</ul>\n\t\t\t</p>\n\t\t</section>\n\t"}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var r=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"User page"}},t}(n(1).c);t.default=r},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(49),r=n(7),a=n(0),s=(a.d,a.a+"/setting"),c=n(50);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t={view:"button",type:"icon",icon:"mdi mdi-power",css:"zmdi_padding",tooltip:"Logout",autowidth:!0,click:function(){e.app.getService("user").logout().then((function(t){t&&e.show("/logout")}))}};return{rows:[{view:"toolbar",css:"z_query_toolbar",elements:[{view:"button",type:"icon",autowidth:!0,css:"zmdi_padding",icon:"mdi mdi-check-circle-outline",tooltip:"Apply changes"},{view:"button",type:"icon",css:"zmdi_padding",autowidth:!0,icon:"mdi mdi-backup-restore",tooltip:"Reset default"},{view:"button",type:"icon",css:"zmdi_padding",icon:"mdi mdi-account",hidden:!0,autowidth:!0,id:"z_userlist_btn",tooltip:"Users",click:function(){this.$scope.ui(i.UserForm).show()}},{},{view:"label",label:"("+r.d.fullname+")",css:{"text-align":"right"}},{view:"button",type:"icon",icon:"mdi mdi-information-outline",css:"zmdi_padding",autowidth:!0,tooltip:"About ZPG",click:function(){this.$scope.ui({view:"window",height:200,width:300,move:!0,position:"center",close:!0,head:"About ZPG",body:{template:"\n          <strong>Version: </strong> "+a.v+' <br>\n          <strong>Repository: </strong> <a href="https://github.com/finzaiko/zpg" target="_blank">https://github.com/finzaiko/zpg</a><br>\n        '}}).show()}},{view:"button",type:"icon",icon:"mdi mdi-lock-reset",css:"zmdi_padding",autowidth:!0,tooltip:"Change Password",click:function(){this.$scope.ui(c.ChangePassword).show()}},t]},{view:"datatable",select:"row",columns:[{id:"m_key",header:"Key",width:200},{id:"m_val",header:"Value",width:300},{id:"note",header:"Note",fillspace:!0}],url:""+s}]}},t.prototype.ready=function(e){r.d.userLevel<2&&$$("z_userlist_btn").show()},t}(o.c);t.default=d},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(7);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"template",id:"idx_landing",css:"ztemplate-main",template:'\n      <div class="intro">\n        <div class="page-inner">\n          <p class="sub-title">Simple and Easy PostgresSQL Migration Dev tool</p>\n          <h1 class="title text-gradient">ZPG</h1>\n          <div class=\'go-btn\' route="/'+(0!=i.d.userId?"v":"login")+"\">Go to console <span class='right-arrow-btn'>&#8594;</span></div>\n        </div>\n      </div>\n\t\t\t",on:{onEnter:function(){document.getElementsByClassName("go-btn")[0].click()}}}},t.prototype.ready=function(){document.querySelectorAll(".ztemplate-main")[0].click()},t}(o.c);t.default=s},function(e,t){e.exports.userId=1},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var r=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"<div style='background:white;padding-top:0;height:99%; display: flex;justify-content: center;align-items: center; flex-direction: column;margin-top:1px; margin-bottom:1px'>\n        <div>Select left list generator</div>\n        <div style='font-size: 20px' class='mdi mdi-arrow-left'></div>\n      </div>"}},t}(n(1).c);t.default=r},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(54);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.r(t);var r=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"GeneratorOthers"}},t}(n(1).c);t.default=r},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(35);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(0),r=n(3),a=n(5),s=n(12);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return u(t,e),t.prototype.config=function(){return{view:"template",css:"ztemplate-main",template:i.s?'\n      <div class="ocean">\n        <div class="wave"></div>\n        <div class="wave"></div>\n        <div class="wave"></div>\n      </div>\n      ':""}},t.prototype.init=function(){this.ui(f).showWindow()},t}(o.c);t.default=d;var f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return u(t,e),t.prototype.config=function(){var e,t=this;return(e={view:"window",position:"center",move:!0,head:this.app.config.name}).position="center",e.css="zwin-transparent",e.body={view:"form",scroll:!1,id:"loginForm",width:300,elements:[{cells:[{id:"z_login_segment",rows:[{view:"text",label:"Username",name:"username",id:"loginform_username",on:{onEnter:function(e){""!=this.getValue()&&$$("loginform_password").focus()}}},{height:7},{view:"text",type:"password",id:"loginform_password",label:"Password",name:"password",attributes:{autocomplete:"new-password"},on:{onEnter:function(e){""!=this.getValue()&&$$("loginform_login").focus()}}},{height:10},{margin:5,cols:[{view:"button",id:"loginform_login",label:"Login",type:"form",click:function(){return t.doLogin()}}]},{height:10},{template:"<div class='z_register_link'>Register</div>",height:32,hidden:!0,id:"z_register_btnlink",onClick:{z_register_link:function(e,t){$$("z_register_segment").show(),setTimeout((function(){return $$("registerform_username").focus()}),1e3)}}}]},{id:"z_register_segment",rows:[{view:"text",label:"Username",name:"username_reg",id:"registerform_username",on:{onEnter:function(e){""!=this.getValue()&&$$("registerform_password").focus()}}},{height:7},{view:"text",type:"password",id:"registerform_password",label:"Password",name:"password_reg",attributes:{autocomplete:"new-password"},on:{onEnter:function(e){""!=this.getValue()&&$$("registerform_login").focus()}}},{height:7},{view:"text",label:"Fullname",name:"fullname",id:"registerform_fullname",on:{onEnter:function(e){this.getValue()}}},{height:7},{view:"text",label:"Email",name:"email",id:"registerform_email",on:{onEnter:function(e){this.getValue()}}},{height:10},{margin:5,cols:[{view:"button",id:"registerform_login",label:"Register",type:"form",click:function(){return t.doRegister()}}]},{height:10},{template:"<div class='z_login_link'>Login</div>",height:32,onClick:{z_login_link:function(e,t){$$("z_login_segment").show(),setTimeout((function(){return $$("loginform_username").focus()}),1e3)}}}]}]}]},e.on={onShow:function(){($$("loginform_username").focus(),a.b.meta.length>0)&&("true"===a.b.meta.find((function(e){return"allow_register"==e.m_key})).m_val&&$$("z_register_btnlink").show())}},e},t.prototype.showWindow=function(){this.getRoot().show()},t.prototype.init=function(e){webix.extend($$("loginForm"),webix.ProgressBar)},t.prototype.ready=function(){},t.prototype.doLogin=function(){var e=this.app.getService("user"),t=this.$$("loginForm");if(t.validate()){t.disable(),t.showProgress();var n=t.getValues();e.login(n.username,n.password).catch((function(e){webix.message({type:"error",text:"Wrong User or password"}),webix.html.removeCss(t.$view,"invalid_login"),t.elements.password.focus(),webix.delay((function(){webix.html.addCss(t.$view,"invalid_login")})),t.hideProgress(),t.enable(),t.focus()}))}},t.prototype.doRegister=function(){var e=this.$$("loginForm");if(e.validate()){var t=e.getValues();if(t.username=t.username_reg,t.password=t.password_reg,delete t.username_reg,delete t.password_reg,""==t.username&&""==t.password&&""==t.fullname&&""==t.email)return webix.message({type:"error",text:"All data required"});if(!Object(r.d)(t.username))return webix.message({type:"error",text:"<strong>Invalid username format:</strong><br>\n          - Char length 4 to 20<br>\n          - Underscore or dot can't be used multiple times in a row (e.g user__name / user..name)<br>\n          - Underscore and dot can't be next to each other (e.g user_.name)<br>\n          - Underscore and dot can't be at the end or start of a username (e.g _username / username_ / .username / username.)<br>\n          - Only contains alphanumeric characters, underscore and dot"});e.disable(),e.showProgress(),Object(s.a)(t).then((function(t){e.hideProgress(),e.enable(),webix.message({text:"Register success, please login",type:"success"}),e.clear(),$$("z_login_segment").show(),$$("loginform_username").focus()})).catch((function(t){var n=JSON.parse(t.response);webix.message({text:n.message,type:"error"}),e.hideProgress(),e.enable(),e.focus()}))}},t}(o.c)},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(5);n(11);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",css:"app_layout",cols:[{rows:[{view:"toolbar",css:"zheader",height:34,elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",css:"app_button",click:function(){$$("app:sidebar").toggle()}},{type:"header",borderless:!0,template:'<a route="/index">'+this.app.config.name+"</a>",css:"webix_header app_header"}]},{view:"sidebar",id:"app:sidebar",data:i.a,width:180,on:{onAfterSelect:function(e){}}}]},{css:"z_layout_p",padding:{left:4},rows:[{$subview:!0}]}]}},t.prototype.init=function(){this.use(o.d.Menu,"app:sidebar"),webix.UIManager.addHotKey("Ctrl+2",(function(){return console.log("Ctrl+Enter for details"),!1}),$$("p_base"))},t.prototype.urlChange=function(e,t){this.app.on("app:guard",(function(e,t,n){}))},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(15),r=n(3),a=n(16);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=a.a.prefix+"_view",u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{rows:[{view:"template",id:l+"_empty_panel",template:"<div style='text-align:center;margin-top:37%;font-size: 18px;color:#ddaa88;'>ZPG share</div>"},{view:"template",id:l+"_un_authorized",template:"<div style='color:red;padding: 10px;'>ZPG share: Unauthorized user</div>",hidden:!0},{id:l+"_authorized",hidden:!0,rows:[{view:"toolbar",css:"z_navbar_viewshare",cols:[{width:10},{view:"label",css:"z_navbar_brand",label:"ZPG share",width:80},{view:"label",label:"",id:l+"_title",css:"title_width z_label_normal_white",width:200},{view:"icon",icon:"mdi mdi-content-copy",width:30,id:l+"_copy_shareview",tooltip:"Copy to clipboard",css:"z_icon_color_primary z_icon_size_16 z_icon_white",click:function(){var e=this;this.hide();var t=$$(l+"_copy_shareview_done");t.show(),setTimeout((function(){e.show(),t.hide()}),1500),Object(i.a)($$(l+"_shareview_ed").getValue())}},{view:"template",css:"copied_done",width:30,hidden:!0,borderless:!0,id:l+"_copy_shareview_done",template:'<svg class="animated-check-white" viewBox="0 0 24 24"><path d="M4.1 12.7L9 17.6 20.3 6.3" fill="none"/></svg>'},{},{view:"label",label:"",id:l+"_by_user",width:300,align:"right",css:"z_label_normal_white"},{width:10}]},{view:"monaco-editor",id:l+"_shareview_ed",language:"sql",fontSize:"12px"}]}]}},t.prototype.init=function(e){},t.prototype.ready=function(){$$(l+"_shareview_ed").getEditor(!0).then((function(e){e.updateOptions({readOnly:!0})})),document.title="ZPG share"},t.prototype.urlChange=function(e,t){var n=this,o=this.getParam("x"),i=this.$$(l+"_shareview_ed");Object(r.m)(i,50),this.checkRole(o).then((function(e){n.$$(l+"_empty_panel").hide(),n.$$(l+"_un_authorized").hide(),n.$$(l+"_authorized").show(),e>0?webix.ajax(a.b+"/by?field=ukey&value="+o).then((function(e){var t=e.json().data[0];n.$$(l+"_by_user").setValue(t.share_user_label_flat),n.$$(l+"_title").setValue("&#8212; "+t.title);var o=Object(r.c)(t.title),a=n.$$(l+"_title");a.config.width=o,a.resize(),1!=t.is_read&&0==t.is_me&&n.setReadView(t.id),i.setValue(t.content),i.hideOverlay()})).fail((function(e){setTimeout((function(){i.hideOverlay(),webix.message({text:404==e.status?"Share not found":e.responseText,type:"error"})}),2e3)})):(i.hideOverlay(),n.$$(l+"_empty_panel").hide(),n.$$(l+"_authorized").hide(),n.$$(l+"_un_authorized").show())}))},t.prototype.checkRole=function(e){return webix.ajax(a.b+"/viewverify?ukey="+e).then((function(e){return e.json().data})).fail((function(e){return 0}))},t.prototype.setReadView=function(e){webix.ajax().put(url+"/read/"+e,{is_read:1}).fail((function(e){showError(e)}))},t}(o.c);t.default=u},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(32);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(21);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"clean",borderless:!0,rows:[i.default]}},t}(o.c);t.default=s},function(e,t,n){"use strict";n.r(t);var o=n(1),i=n(0),r=(n(3),n(5)),a=n(11),s=n(56);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.addTab=function(e){$$("tabs").addView(e)},t.prototype.config=function(){var e=this,t="desktop"==i.c?r.a.filter((function(e){return"shared"!==e.id})):r.a,n={type:"clean",css:"app_layout",cols:[{rows:[{view:"toolbar",height:34,css:"zheader",elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",css:"app_button",click:function(){$$("app:sidebar").toggle(),$$("app:sidebar").config.collapsed?webix.storage.local.put(i.q,"1"):webix.storage.local.put(i.q,"0")}},{type:"header",borderless:!0,template:"<span class='z_link_btn app_name_link'>"+this.app.config.name+"</span>",css:"webix_header app_header",onClick:{app_name_link:function(t,n){webix.confirm({title:"Confirm Exit",ok:"Yes",cancel:"No",text:"Are you sure to exit current working editor ?"}).then((function(){e.show("/index")}))}}}]},{view:"sidebar",id:"app:sidebar",css:"z_app_sidebar",data:t,width:180,collapsed:!0,on:{onAfterSelect:function(e){this.$scope.menuClick(this.$scope,e)},onItemClick:function(e,t,n){this.$scope.menuClick(this.$scope,e)}}}]},{padding:{left:4},id:"tabs",view:"tabview",css:"z_app_tabview",tooltip:!0,animate:!1,cells:[{header:"Welcome",id:"query_welcome",css:"z_tabview_item",width:150,body:s.default}],tabbar:{tooltip:!0,on:{onBeforeTabClose:function(e,t){if(e.includes("query")){var n=this.getValue().split("_").pop(),o="";r=n,o=isNaN(r)||(0|(a=parseFloat(r)))!==a?"z_query_sql_editor":this.getValue()+"_sql_editor";var i=$$(o);void 0!==i&&i.getValue().length>0?webix.confirm("Are you sure?").then((function(t){t&&$$("tabs").removeView(e)})):$$("tabs").removeView(e)}else $$("tabs").removeView(e);var r,a;return!1}}}}]};return webix.ajax(i.a+"/app").then((function(e){var t=e.json();r.b.appProfile=JSON.parse(t.data.find((function(e){return 5==e.type})).content)})),n},t.prototype.ready=function(){var e=webix.storage.local.get(i.q),t=$$("app:sidebar");"1"==e?t.collapse():t.expand(),webix.event(window,"keydown",(function(e){188==e.keyCode&&e.ctrlKey&&(webix.UIManager.setFocus($$("$tabbar1")),$$("$tabbar1").attachEvent("onEnter",(function(e){})))}))},t.prototype.menuClick=function(e,t){var n=$$("app:sidebar").getItem(t);if(r.b.viewScope=e,$$(n.id))$$("tabs").getTabbar().setValue(n.id);else{var o=a.routes.find((function(e){return e.id===n.id}));e.addTab({header:n.value,css:"z_tabview_item",id:n.id,close:!0,width:150,body:o}),$$("tabs").getTabbar().setValue(n.id)}},t}(o.c);t.default=u},function(e,t){},function(e,t,n){"use strict";n.r(t);var o=n(1),i=new webix.DataCollection({});function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return i.sort("proname","asc"),{view:"datatable",id:"griddata",columns:[{id:"specific_schema",header:"Schema",adjust:!0},{id:"proname",header:"Table Func",adjust:!0},{id:"type_udt_name",header:"Func Return",adjust:!0},{id:"params_in",header:"Params In",adjust:!0},{id:"params_out",header:"Params Out",adjust:!0},{id:"params_length",header:"Params InOut",adjust:!0},{id:"content_length",header:"Func Length",adjust:!0},{id:"cols_length",header:"Cols Length",adjust:!0},{id:"dtypes_length",header:"Cols Type Length",adjust:!0},{id:"cols_count",header:"Tbl Cols Count",adjust:!0},{id:"t_type",header:"Type",adjust:!0}],data:i}},t.prototype.init=function(e){this.$$("griddata").markSorting("proname","asc")},t}(o.c);t.default=s},function(e,t,n){(function(e){var t,n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */t=this,n=function(e){var t=function e(t){return new e.lib.init(t)};function n(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function i(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:"1.12.0",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var i=document.createElement("img");i.src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(i):e.insertAdjacentElement("afterbegin",i)}if(!0===this.options.close){var r=document.createElement("button");r.type="button",r.setAttribute("aria-label","Close"),r.className="toast-close",r.innerHTML="&#10006;",r.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var a=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&a>360?e.insertAdjacentElement("afterbegin",r):e.appendChild(r)}if(this.options.stopOnFocus&&this.options.duration>0){var s=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){s.removeElement(e)}),s.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"===o(this.options.offset)){var c=n("x",this.options),l=n("y",this.options),u="left"==this.options.position?c:"-"+c,d="toastify-top"==this.options.gravity?l:"-"+l;e.style.transform="translate("+u+","+d+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,n),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},n={top:15,bottom:15},o={top:15,bottom:15},r=document.getElementsByClassName("toastify"),a=0;a<r.length;a++){e=!0===i(r[a],"toastify-top")?"toastify-top":"toastify-bottom";var s=r[a].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(r[a].style[e]=o[e]+"px",o[e]+=s+15):!0===i(r[a],"toastify-left")?(r[a].style[e]=t[e]+"px",t[e]+=s+15):(r[a].style[e]=n[e]+"px",n[e]+=s+15)}return this},t.lib.init.prototype=t.lib,t},"object"===o(e)&&e.exports?e.exports=n():t.Toastify=n()}).call(this,n(76)(e))},function(e,t,n){},function(e,t,n){var o={"./":59,"./compare":24,"./compare/":24,"./compare/CompareHelp":52,"./compare/CompareHelp.js":52,"./compare/ComparePage":41,"./compare/ComparePage.js":41,"./compare/index":24,"./compare/index.js":24,"./copydata":26,"./copydata/":26,"./copydata/CopyDataAction":17,"./copydata/CopyDataAction.js":17,"./copydata/CopyDataConfirmTable":34,"./copydata/CopyDataConfirmTable.js":34,"./copydata/CopyDataConsole":46,"./copydata/CopyDataConsole.js":46,"./copydata/CopyDataPage":45,"./copydata/CopyDataPage.js":45,"./copydata/CopyDataToolbar":47,"./copydata/CopyDataToolbar.js":47,"./copydata/index":26,"./copydata/index.js":26,"./data":72,"./data.js":72,"./database":25,"./database/":25,"./database/DatabasePage":31,"./database/DatabasePage.js":31,"./database/DatabaseServer":44,"./database/DatabaseServer.js":44,"./database/index":25,"./database/index.js":25,"./dbconfig":36,"./dbconfig/":36,"./dbconfig/DbConfigForm":53,"./dbconfig/DbConfigForm.js":53,"./dbconfig/DbConfigPage":22,"./dbconfig/DbConfigPage.js":22,"./dbconfig/index":36,"./dbconfig/index.js":36,"./generator":28,"./generator/":28,"./generator/GeneratorInsertQuery":54,"./generator/GeneratorInsertQuery.js":54,"./generator/GeneratorOutParams":35,"./generator/GeneratorOutParams.js":35,"./generator/GeneratorPage":48,"./generator/GeneratorPage.js":48,"./generator/default":61,"./generator/default.js":61,"./generator/index":28,"./generator/index.js":28,"./generator/insertquery":62,"./generator/insertquery.js":62,"./generator/others":63,"./generator/others.js":63,"./generator/outparams":64,"./generator/outparams.js":64,"./index":59,"./index.js":59,"./login":65,"./login.js":65,"./migration":37,"./migration/":37,"./migration/MigrationPage":55,"./migration/MigrationPage.js":55,"./migration/index":37,"./migration/index.js":37,"./p":66,"./p.js":66,"./query":38,"./query/":38,"./query/QueryDatabase":42,"./query/QueryDatabase.js":42,"./query/QueryHelp":43,"./query/QueryHelp.js":43,"./query/QueryPage":18,"./query/QueryPage.js":18,"./query/index":38,"./query/index.js":38,"./routes":11,"./routes.js":11,"./setting":29,"./setting/":29,"./setting/ChangePassword":50,"./setting/ChangePassword.js":50,"./setting/SettingPage":58,"./setting/SettingPage.js":58,"./setting/UserForm":49,"./setting/UserForm.js":49,"./setting/index":29,"./setting/index.js":29,"./share":30,"./share/":30,"./share/SharePage":51,"./share/SharePage.js":51,"./share/index":30,"./share/index.js":30,"./shareview":67,"./shareview.js":67,"./start":56,"./start.js":56,"./task":27,"./task/":27,"./task/TaskForm":32,"./task/TaskForm.js":32,"./task/TaskPage":21,"./task/TaskPage.js":21,"./task/form":68,"./task/form.js":68,"./task/index":27,"./task/index.js":27,"./task/page":69,"./task/page.js":69,"./user":39,"./user/":39,"./user/UserPage":57,"./user/UserPage.js":57,"./user/index":39,"./user/index.js":39,"./v":70,"./v.js":70,"./viewdata":40,"./viewdata/":40,"./viewdata/ViewDataPage":33,"./viewdata/ViewDataPage.js":33,"./viewdata/index":40,"./viewdata/index.js":40};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=75},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){},function(e,t,n){var o={"./en":71,"./en.js":71};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=78},function(e,t,n){"use strict";n.r(t);n(74);var o=n(1),i=n(0),r=n(8),a=n(7);var s={status:function(){return webix.ajax().post(i.a+"/ping",{t:Date.now()}).then((function(e){return e.json().status}))},login:function(e,t){return webix.ajax().post(i.a+"/auth/login",{username:e,password:t}).then((function(e){var t=e.json();if(t){var n=t.token;Object(a.c)(n),webix.storage.cookie.put(i.g,n)}return t}))},logout:function(){return new Promise((function(e,t){webix.storage.cookie.remove(i.g),e(!0)}))}},c=n(5),l=n(2),u=n(3),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};webix.protoUI({name:"fadeInWindow",$init:function(){this.$ready.push((function(){this.attachEvent("onShow",(function(){document.querySelectorAll("body > div.webix_modal").forEach((function(e){e.style.backgroundColor="#FFF"})),this.$view.className=this.$view.className+" animate__animated animate__bounceInDown"})),this.attachEvent("onHide",(function(){this.$view.style.display="block",this.$view.className+=" animate__fadeOut"}))}))}},webix.ui.window);var f=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={id:"zpg-frontend",version:"0.0.17-dev",router:o.a,debug:!1,start:"/index",name:i.b},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,d({},r,n)));return a.use(o.d.User,{model:s,afterLogin:"/v",ping:i.t,public:function(e){return e.indexOf("/index")>-1}}),webix.ajax(i.a+"/meta").then((function(e){c.b.meta=e.json()})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.b);t.default=f;webix.ready((function(){document.querySelectorAll(".zl").forEach((function(e){setTimeout((function(){e.classList.add("zfo"),e.remove()}),800)}));var e=new f;setTimeout((function(){var t=void 0;e.on("app:guard",(function(e,n,o){c.b.navUrl=o,t=o,"/p"==e&&(o.redirect="/p/start")}));var n=!1;window.onbeforeunload=function(e){e=e||window.event;for(var t=0,n=0;n<l.b.countPage+1;n++){if(n>0){if($$("z_query_"+n+"_sql_editor"))t+=$$("z_query_"+n+"_sql_editor").getValue().length}else if($$("z_query_sql_editor"))t+=$$("z_query_sql_editor").getValue().length}if(t>0)return e&&(e.returnValue="Sure?"),"Sure?"},webix.attachEvent("onBeforeAjax",(function(o,s,c,l,d,f,p){p.then((function(o){var r=o.json().status,s=t.url[0].page;null===r&&"login"!==s&&(webix.storage.cookie.remove(i.g),a.d.token="",n||(Object(u.k)(e,!0),n=!0))})),p.catch((function(t){401!=t.status||/\/auth\/login.*|\/v1$/.test(l.responseURL)||n||(Object(u.k)(e,!0),n=!0)})),/\/auth\/login.*|\/v1$/.test(l.responseURL)&&(webix.storage.cookie.remove(i.g),a.d.token=""),webix.storage.cookie.get(i.g)?Object(r.b)(d):Object(r.c)(d)})),Object(a.b)(),e.attachEvent("app:guard",(function(e,t,n){-1!==e.indexOf("/blocked")&&(n.redirect="/index")})),e.render()}),800)}))}]);